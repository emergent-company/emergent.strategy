# ============================================================================
# Spec Server 2 - Production Environment Configuration
# ============================================================================
# Copy this file to .env.production and fill in actual values
# Never commit .env.production to version control
# ============================================================================

# ----------------------------------------------------------------------------
# Database Configuration (PostgreSQL with pgvector)
# ----------------------------------------------------------------------------
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_USER=spec
POSTGRES_PASSWORD=<generate-secure-password>
POSTGRES_DB=spec

# E2E Testing Database (optional, for test environments)
POSTGRES_DB_E2E=spec_e2e

# ----------------------------------------------------------------------------
# Google AI Configuration
# ----------------------------------------------------------------------------
# Get your key from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=<your-google-api-key>

# Embedding dimension for vector search (default: 1536)
# Supported: 128, 384, 768, 1536 (recommended), 3072
# Note: Changing requires database migration
EMBEDDING_DIMENSION=1536

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
PORT=3002
NODE_ENV=production

# Database auto-initialization (run migrations on startup)
DB_AUTOINIT=true

# Demo organization seed data (disable for production)
ORGS_DEMO_SEED=false

# ----------------------------------------------------------------------------
# Zitadel Authentication
# ----------------------------------------------------------------------------
# Your Zitadel domain (without https://)
ZITADEL_DOMAIN=auth.yourdomain.com

# Full issuer URL
ZITADEL_ISSUER=https://${ZITADEL_DOMAIN}

# Token introspection endpoint
ZITADEL_INTROSPECTION_URL=https://${ZITADEL_DOMAIN}/oauth/v2/introspect

# Backend API OAuth Client (JWT Profile)
ZITADEL_CLIENT_ID=<your-backend-client-id>
ZITADEL_CLIENT_SECRET=<your-backend-client-secret-jwt>

# Zitadel Organization ID
ZITADEL_MAIN_ORG_ID=<your-organization-id>

# Cache configuration for token introspection
INTROSPECTION_CACHE_TTL=300
CACHE_CLEANUP_INTERVAL=900

# ----------------------------------------------------------------------------
# Frontend Build Configuration
# ----------------------------------------------------------------------------
# ⚠️  These are BAKED INTO the frontend build at build time
# Changing these requires rebuilding the frontend image

# API endpoint URL (publicly accessible)
VITE_API_URL=https://api.yourdomain.com

# Zitadel issuer for frontend OAuth
VITE_ZITADEL_ISSUER=https://auth.yourdomain.com

# Frontend OAuth Client ID (User Agent / PKCE)
VITE_ZITADEL_CLIENT_ID=<your-frontend-client-id>

# Application environment
VITE_APP_ENV=production

# ----------------------------------------------------------------------------
# API CORS Configuration
# ----------------------------------------------------------------------------
# Frontend origin for CORS (must match actual frontend URL)
CORS_ORIGIN=https://app.yourdomain.com

# ----------------------------------------------------------------------------
# Zitadel First Instance Setup
# ----------------------------------------------------------------------------
# ⚠️  Only used for FIRST deployment when Zitadel initializes
# After first run, these values are ignored

ZITADEL_ORG_NAME=Your Organization
ZITADEL_ADMIN_USERNAME=admin@yourdomain.com
ZITADEL_ADMIN_PASSWORD=<generate-secure-password>
ZITADEL_ADMIN_FIRSTNAME=Admin
ZITADEL_ADMIN_LASTNAME=User

# Master encryption key (exactly 32 characters)
# Generate with: openssl rand -hex 16
ZITADEL_MASTERKEY=<generate-32-character-key>

# ----------------------------------------------------------------------------
# Optional: Google OAuth Configuration
# ----------------------------------------------------------------------------
# If using Google OAuth integration
GCP_PROJECT_ID=<your-gcp-project-id>
GOOGLE_REDIRECT_URL=https://app.yourdomain.com/oauth/callback

# ----------------------------------------------------------------------------
# Optional: Feature Flags
# ----------------------------------------------------------------------------
# Enable MCP (Model Context Protocol) integration for chat
CHAT_ENABLE_MCP=1
MCP_SERVER_URL=http://localhost:3001
MCP_TIMEOUT=30000

# ----------------------------------------------------------------------------
# Coolify Configuration (for deployment scripts)
# ----------------------------------------------------------------------------
COOLIFY_APP_UUID=<your-coolify-app-uuid>
COOLIFY_TOKEN=<your-coolify-api-token>
COOLIFY_URL=https://coolify.yourdomain.com
