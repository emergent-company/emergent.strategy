# Atomic Shim Cleanup (Admin Components)

Date: 2025-09-21

This document records the removal of legacy root-level component shim files from `apps/admin/src/components` as part of enforcing the atomic design structure.

## Removed Root Shim Files
All of the following were neutralized (empty `export {}`) prior to deletion and have canonical replacements inside atomic layer directories:

| Removed File | Replacement | Layer | Notes |
|--------------|-------------|-------|-------|
| MetaData.tsx | atoms/MetaData | Atom | Root test & import paths migrated earlier. |
| NewChatCtas.tsx | molecules/NewChatCtas | Molecule | CTA + composer composition. |
| ProjectGate.tsx | organisms/ProjectGate | Organism | Project selection/creation gating. |
| OrgAndProjectGate.tsx | organisms/OrgAndProjectGate | Organism | Combined org + project gating. |

## Policy Update
- `scripts/validate-story-duplicates.mjs` now treats ANY root-level `.ts` / `.tsx` (other than `index.ts`) as a violation unless explicitly added (transitional list is intentionally empty).
- Root-level `*.test.tsx` files are explicitly blocked; tests must live beside their component.

## Rationale
1. Prevent shadow imports (accidental `@/components/Foo` reaching stale shim).
2. Ensure discoverability: every component has exactly one physical implementation location.
3. Simplify future codemods and layer-based lint rules.

## Follow-Up Enforcement
- Add ESLint rule (future) disallowing imports from `@/components/*` when the target is not `index.ts` or a barrel.
- Optionally add a pre-commit hook running `npm --prefix apps/admin run stories:validate`.

## Historical Deadlines (Now Obsolete)
Previous transitional deadlines for these files (MetaData.tsx, NewChatCtas.tsx, ProjectGate.tsx, OrgAndProjectGate.tsx) have been superseded by immediate deletion.

## Open Items (Pre-Removal Snapshot)
The following items were pending prior to final removal and are retained here for historical context:
- (Resolved) Classify and migrate remaining legacy directories (`forms`, `layout`).
- Introduce an automated migration checklist surfaced in Storybook Docs tab (still optional future enhancement).

## 2025-09-21 Update – Forms Domain Decomposition (Superseded)
The ad-hoc `forms/` domain directory was decomposed and is now fully removed:

| Legacy Path | New Path | Layer | Notes |
|-------------|----------|-------|-------|
| forms/FileUploader.tsx | molecules/FileUploader | Molecule | Wrapper migrated; legacy shim deleted 2025-09-21. |

Rationale: A single wrapper around a 3rd-party control is a compositional unit (Molecule) rather than a domain grouping. Eliminating the `Forms/` story namespace avoids reintroducing domain-centric buckets counter to atomic layering.

Superseded Steps (now completed):
1. Removed `forms/FileUploader.tsx` shim and deleted `forms/` directory.
2. Validator already fails if any new `components/forms/*` paths appear.
3. (Optional future) Add Storybook docs snippet for form-related guidance.

## 2025-09-21 Final Removal – Layout & Forms Directories

The legacy `layout/` and `forms/` directories and residual root test files were physically deleted on 2025-09-21.

### Deleted Paths
| Path | Notes | Replacement Guidance |
|------|-------|----------------------|
| components/layout/**/* | All shim/barrel/stories removed | Use atomic `organisms/` (e.g., SidebarSection) and utilities under `utils/sidebar/activation` |
| components/forms/**/* | Shim + story removed | `molecules/FileUploader` |
| components/MetaData.test.tsx | Duplicate root test removed | Test lives at `atoms/MetaData/MetaData.test.tsx` |
| components/PageTitle.test.tsx | Duplicate root test removed | Test lives at `molecules/PageTitle/PageTitle.test.tsx` |
| components/ThemeToggle.test.tsx | Duplicate root test removed | Test lives at `molecules/ThemeToggle/ThemeToggle.test.tsx` |

### Post-Removal State
- Validator passes with zero structural or duplicate story violations.
- Root now contains only: `atoms/`, `molecules/`, `organisms/`, `templates/` (reserved).
- Any reintroduction of `layout/`, `forms/`, `chat/`, or `ui/` will immediately fail validation.

### Forward Looking
- Optional: Add Storybook docs page summarizing atomic layering for newcomers.
- Optional: ESLint rule to block importing from removed paths (`@/components/layout`, `@/components/forms`, `@/components/chat`, `@/components/ui`).

## 2025-09-21 Chat Directory Removal

The transient `chat/` directory (legacy namespace placeholder) was removed. Remaining chat-related components live under appropriate atomic layers (e.g., `molecules/ChatPromptActions`, `molecules/ChatPromptComposer`). Story meta titles updated (e.g., `ChatPromptActions` now under `Molecules/ChatPromptActions`). Validator updated to remove `chat` and `ui` from transitional allowances.


---
---
Generated by automated atomic migration workflow.
