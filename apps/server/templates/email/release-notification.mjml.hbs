{{!--
  Release notification email template
  
  Required context:
  - version: Release version (e.g., "v2024.12.19")
  - releaseDate: Date of the release (formatted string)
  - releaseUrl: URL to view the full release notes
  - changelog: Object containing categorized changes:
    - features: Array of { title, description }
    - improvements: Array of { title, description }
    - bugFixes: Array of { title, description }
    - breakingChanges: Array of { title, description }
  - commitCount: Number of commits in this release
  - fromCommit: Short SHA of the starting commit
  - toCommit: Short SHA of the ending commit
  
  Optional context:
  - recipientName: Name of the recipient
  - summary: Brief summary paragraph from LLM
--}}

{{!-- View in browser link at top --}}
<mj-text align="center" font-size="12px" color="#6b7280" padding-bottom="8px">
  <a href="{{releaseUrl}}" style="color: #4F46E5;">View this release in your browser</a>
</mj-text>

{{!-- Greeting --}}
<mj-text font-size="16px" padding-bottom="16px">
  Hi{{#if recipientName}} {{recipientName}}{{/if}},
</mj-text>

{{!-- Introduction --}}
<mj-text padding-bottom="16px">
  A new version of <strong>Emergent</strong> has been deployed! Here's what's new in <strong>{{version}}</strong>.
</mj-text>

{{!-- Summary (if provided) --}}
{{#if summary}}
<mj-text padding-bottom="16px" color="#374151">
  {{summary}}
</mj-text>
{{/if}}

{{!-- Breaking Changes (shown first with warning styling) --}}
{{#if changelog.breakingChanges.length}}
<mj-text font-size="16px" font-weight="600" color="#DC2626" padding-top="24px" padding-bottom="12px">
  ‚ö†Ô∏è Breaking Changes
</mj-text>
{{#each changelog.breakingChanges}}
<mj-text padding-bottom="8px" padding-left="16px">
  <strong>{{this.title}}</strong>{{#if this.description}} ‚Äî {{this.description}}{{/if}}
</mj-text>
{{/each}}
{{#if breakingChangesRemaining}}
<mj-text padding-bottom="8px" padding-left="16px" color="#6b7280" font-style="italic">
  ...and {{breakingChangesRemaining}} more
</mj-text>
{{/if}}
{{/if}}

{{!-- New Features --}}
{{#if changelog.features.length}}
<mj-text font-size="16px" font-weight="600" color="#374151" padding-top="24px" padding-bottom="12px">
  ‚ú® New Features
</mj-text>
{{#each changelog.features}}
<mj-text padding-bottom="8px" padding-left="16px">
  <strong>{{this.title}}</strong>{{#if this.description}} ‚Äî {{this.description}}{{/if}}
</mj-text>
{{/each}}
{{#if featuresRemaining}}
<mj-text padding-bottom="8px" padding-left="16px" color="#6b7280" font-style="italic">
  ...and {{featuresRemaining}} more
</mj-text>
{{/if}}
{{/if}}

{{!-- Improvements --}}
{{#if changelog.improvements.length}}
<mj-text font-size="16px" font-weight="600" color="#374151" padding-top="24px" padding-bottom="12px">
  üöÄ Improvements
</mj-text>
{{#each changelog.improvements}}
<mj-text padding-bottom="8px" padding-left="16px">
  <strong>{{this.title}}</strong>{{#if this.description}} ‚Äî {{this.description}}{{/if}}
</mj-text>
{{/each}}
{{#if improvementsRemaining}}
<mj-text padding-bottom="8px" padding-left="16px" color="#6b7280" font-style="italic">
  ...and {{improvementsRemaining}} more
</mj-text>
{{/if}}
{{/if}}

{{!-- Bug Fixes --}}
{{#if changelog.bugFixes.length}}
<mj-text font-size="16px" font-weight="600" color="#374151" padding-top="24px" padding-bottom="12px">
  üêõ Bug Fixes
</mj-text>
{{#each changelog.bugFixes}}
<mj-text padding-bottom="8px" padding-left="16px">
  <strong>{{this.title}}</strong>{{#if this.description}} ‚Äî {{this.description}}{{/if}}
</mj-text>
{{/each}}
{{#if bugFixesRemaining}}
<mj-text padding-bottom="8px" padding-left="16px" color="#6b7280" font-style="italic">
  ...and {{bugFixesRemaining}} more
</mj-text>
{{/if}}
{{/if}}

{{!-- CTA Button --}}
<mj-button href="{{releaseUrl}}" padding-top="32px">
  View Full Release Notes
</mj-button>

{{!-- Divider --}}
<mj-divider border-color="#e5e7eb" padding-top="32px" padding-bottom="16px" />

{{!-- Technical details --}}
<mj-text font-size="12px" color="#6b7280">
  <strong>Release Details</strong><br />
  Version: {{version}}<br />
  Date: {{releaseDate}}<br />
  Commits: {{commitCount}} ({{fromCommit}}...{{toCommit}})
</mj-text>

{{!-- Help text --}}
<mj-text font-size="12px" color="#9ca3af" padding-top="16px">
  You're receiving this because you're an active user of Emergent. If you have any questions about this release, please reach out to our support team.
</mj-text>
