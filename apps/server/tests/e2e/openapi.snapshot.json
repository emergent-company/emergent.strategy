{
  "components": {
    "schemas": {
      "AcceptInviteDto": {
        "properties": {},
        "type": "object"
      },
      "AddAlternativeEmailDto": {
        "properties": {},
        "type": "object"
      },
      "AlternativeEmailDto": {
        "properties": {
          "createdAt": {
            "description": "ISO timestamp created",
            "type": "string"
          },
          "email": {
            "description": "Email address (lowercased canonical form)",
            "type": "string"
          },
          "verified": {
            "description": "Verification status",
            "type": "boolean"
          }
        },
        "required": [
          "email",
          "verified",
          "createdAt"
        ],
        "type": "object"
      },
      "AssignTemplatePackDto": {
        "properties": {},
        "type": "object"
      },
      "BranchMergeObjectSummaryDto": {
        "properties": {
          "canonical_id": {
            "description": "Canonical object id",
            "type": "string"
          },
          "conflicts": {
            "description": "List of conflicting property paths (subset intersection of source/target paths with differing final values)",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "source_head_id": {
            "description": "Head version id on source branch",
            "nullable": true,
            "type": "object"
          },
          "source_paths": {
            "description": "Changed property paths on source since LCA",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "status": {
            "enum": [
              "unchanged",
              "added",
              "fast_forward",
              "conflict"
            ],
            "type": "string"
          },
          "target_head_id": {
            "description": "Head version id on target branch",
            "nullable": true,
            "type": "object"
          },
          "target_paths": {
            "description": "Changed property paths on target since LCA (empty if no divergence)",
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "required": [
          "canonical_id",
          "status",
          "source_head_id",
          "target_head_id",
          "source_paths",
          "target_paths"
        ],
        "type": "object"
      },
      "BranchMergeRelationshipSummaryDto": {
        "properties": {
          "canonical_id": {
            "description": "Canonical relationship id",
            "type": "string"
          },
          "conflicts": {
            "description": "List of conflicting property paths (subset intersection of source/target paths with differing final values)",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "source_dst_id": {
            "description": "Destination node id (dst) on source head",
            "nullable": true,
            "type": "object"
          },
          "source_head_id": {
            "description": "Head version id on source branch",
            "nullable": true,
            "type": "object"
          },
          "source_paths": {
            "description": "Changed property paths on source since LCA",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "source_src_id": {
            "description": "Source node id (src) on source head",
            "nullable": true,
            "type": "object"
          },
          "status": {
            "enum": [
              "unchanged",
              "added",
              "fast_forward",
              "conflict"
            ],
            "type": "string"
          },
          "target_dst_id": {
            "description": "Destination node id (dst) on target head",
            "nullable": true,
            "type": "object"
          },
          "target_head_id": {
            "description": "Head version id on target branch",
            "nullable": true,
            "type": "object"
          },
          "target_paths": {
            "description": "Changed property paths on target since LCA (empty if no divergence)",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "target_src_id": {
            "description": "Source node id (src) on target head",
            "nullable": true,
            "type": "object"
          }
        },
        "required": [
          "canonical_id",
          "status",
          "source_head_id",
          "target_head_id",
          "source_src_id",
          "source_dst_id",
          "target_src_id",
          "target_dst_id",
          "source_paths",
          "target_paths"
        ],
        "type": "object"
      },
      "BranchMergeRequestDto": {
        "properties": {
          "execute": {
            "description": "If true, attempt to apply the merge (will fail with 409 if any conflicts). When false or omitted, performs a dry-run only.",
            "type": "boolean"
          },
          "limit": {
            "description": "Optional enumeration limit override (must be <= server max). Primarily for testing.",
            "type": "number"
          },
          "sourceBranchId": {
            "description": "Source branch to merge from",
            "type": "string"
          }
        },
        "required": [
          "sourceBranchId"
        ],
        "type": "object"
      },
      "BranchMergeSummaryDto": {
        "properties": {
          "added_count": {
            "description": "Count of objects newly added by source branch",
            "type": "number"
          },
          "applied": {
            "description": "True when merge changes were applied (execute=true & no conflicts)",
            "type": "boolean"
          },
          "applied_objects": {
            "description": "Number of objects mutated/created during apply (added + fast_forward)",
            "type": "number"
          },
          "conflict_count": {
            "description": "Count of objects with conflicts requiring manual resolution",
            "type": "number"
          },
          "dryRun": {
            "description": "True if this response is only a dry-run (always true in MVP)",
            "type": "boolean"
          },
          "fast_forward_count": {
            "description": "Count of objects that can be applied without conflict (fast-forward or safe merge)",
            "type": "number"
          },
          "hard_limit": {
            "description": "Server enforced hard limit (for client visibility)",
            "type": "number"
          },
          "objects": {
            "items": {
              "$ref": "#/components/schemas/BranchMergeObjectSummaryDto"
            },
            "type": "array"
          },
          "relationships": {
            "items": {
              "$ref": "#/components/schemas/BranchMergeRelationshipSummaryDto"
            },
            "type": "array"
          },
          "relationships_added_count": {
            "description": "Count of relationships newly added by source branch",
            "type": "number"
          },
          "relationships_conflict_count": {
            "description": "Count of relationships with conflicts requiring manual resolution",
            "type": "number"
          },
          "relationships_fast_forward_count": {
            "description": "Count of relationships that can be applied without conflict (fast-forward or safe merge)",
            "type": "number"
          },
          "relationships_total": {
            "description": "Total divergent canonical relationships considered",
            "type": "number"
          },
          "relationships_unchanged_count": {
            "description": "Count of relationships unchanged after merge (no action needed)",
            "type": "number"
          },
          "sourceBranchId": {
            "description": "Source branch provided in request",
            "type": "string"
          },
          "targetBranchId": {
            "description": "Target branch the merge would apply to",
            "type": "string"
          },
          "total_objects": {
            "description": "Total divergent canonical objects considered",
            "type": "number"
          },
          "truncated": {
            "description": "Set when enumeration truncated due to limit cap",
            "type": "boolean"
          },
          "unchanged_count": {
            "description": "Count of objects unchanged after merge (no action needed)",
            "type": "number"
          }
        },
        "required": [
          "targetBranchId",
          "sourceBranchId",
          "dryRun",
          "total_objects",
          "unchanged_count",
          "added_count",
          "fast_forward_count",
          "conflict_count",
          "objects"
        ],
        "type": "object"
      },
      "BulkDeleteRequestDto": {
        "properties": {
          "ids": {
            "description": "Array of document IDs to delete",
            "example": [
              "123e4567-e89b-12d3-a456-426614174000",
              "123e4567-e89b-12d3-a456-426614174001"
            ],
            "items": {
              "type": "string"
            },
            "minItems": 1,
            "type": "array"
          }
        },
        "required": [
          "ids"
        ],
        "type": "object"
      },
      "BulkDeletionImpactDto": {
        "properties": {
          "documents": {
            "description": "Optional per-document breakdown",
            "items": {
              "$ref": "#/components/schemas/DeletionImpactDto"
            },
            "type": "array"
          },
          "impact": {
            "description": "Aggregated impact summary across all documents",
            "example": {
              "chunks": 150,
              "extractionJobs": 12,
              "graphObjects": 48,
              "graphRelationships": 25,
              "notifications": 3
            },
            "type": "object"
          },
          "totalDocuments": {
            "description": "Total number of documents to be deleted",
            "example": 5,
            "type": "number"
          }
        },
        "required": [
          "totalDocuments",
          "impact"
        ],
        "type": "object"
      },
      "BulkDeletionSummaryDto": {
        "properties": {
          "deleted": {
            "description": "Number of documents successfully deleted",
            "example": 5,
            "type": "number"
          },
          "notFound": {
            "description": "Document IDs that could not be found or deleted",
            "example": [
              "123e4567-e89b-12d3-a456-426614174999"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "status": {
            "description": "Deletion status",
            "enum": [
              "deleted",
              "partial"
            ],
            "example": "deleted",
            "type": "string"
          },
          "summary": {
            "description": "Summary of deleted entities",
            "example": {
              "chunks": 42,
              "extractionJobs": 3,
              "graphObjects": 15,
              "graphRelationships": 8,
              "notifications": 1
            },
            "type": "object"
          }
        },
        "required": [
          "status",
          "summary",
          "deleted"
        ],
        "type": "object"
      },
      "BulkUpdateStatusDto": {
        "properties": {
          "ids": {
            "description": "Array of object IDs to update",
            "example": [
              "uuid1",
              "uuid2",
              "uuid3"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "status": {
            "description": "New status value",
            "example": "accepted",
            "maxLength": 64,
            "type": "string"
          }
        },
        "required": [
          "ids",
          "status"
        ],
        "type": "object"
      },
      "ChatRequestDto": {
        "properties": {
          "conversationId": {
            "description": "Conversation ID for maintaining state",
            "type": "string"
          },
          "messages": {
            "description": "Array of chat messages",
            "items": {
              "properties": {
                "content": {
                  "type": "string"
                },
                "role": {
                  "enum": [
                    "user",
                    "assistant",
                    "system"
                  ],
                  "type": "string"
                }
              },
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "messages"
        ],
        "type": "object"
      },
      "ChatStreamDoneEvent": {
        "properties": {},
        "type": "object"
      },
      "ChatStreamErrorEvent": {
        "properties": {},
        "type": "object"
      },
      "ChatStreamMcpToolEvent": {
        "properties": {},
        "type": "object"
      },
      "ChatStreamMetaEvent": {
        "properties": {},
        "type": "object"
      },
      "ChatStreamTokenEvent": {
        "properties": {},
        "type": "object"
      },
      "ChunkDto": {
        "properties": {
          "documentId": {
            "example": "doc_1",
            "type": "string"
          },
          "documentTitle": {
            "description": "Best-effort document title derived from filename or source URL",
            "example": "User Guide.pdf",
            "type": "string"
          },
          "hasEmbedding": {
            "description": "Whether an embedding vector exists for this chunk",
            "example": true,
            "type": "boolean"
          },
          "id": {
            "example": "chunk_1",
            "type": "string"
          },
          "index": {
            "description": "Zero-based index of chunk inside the document",
            "example": 0,
            "type": "number"
          },
          "size": {
            "description": "Size in characters",
            "example": 512,
            "type": "number"
          },
          "text": {
            "description": "Plaintext content of the chunk (may be truncated client-side)",
            "example": "This is the chunk text...",
            "type": "string"
          }
        },
        "required": [
          "id",
          "documentId",
          "documentTitle",
          "index",
          "size",
          "hasEmbedding",
          "text"
        ],
        "type": "object"
      },
      "CitationDto": {
        "properties": {},
        "type": "object"
      },
      "CreateEmbeddingPolicyDto": {
        "properties": {
          "enabled": {
            "default": true,
            "description": "Whether embedding is enabled for this object type",
            "example": true,
            "type": "boolean"
          },
          "excludedLabels": {
            "description": "Labels that prevent embedding if present on the object",
            "example": [
              "sensitive",
              "draft"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "excludedStatuses": {
            "description": "Status values that prevent embedding if present on the object",
            "example": [
              "draft",
              "archived"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "maxPropertySize": {
            "description": "Maximum property size in bytes. Objects with properties larger than this will not be embedded.",
            "example": 10000,
            "type": "number"
          },
          "objectType": {
            "description": "Object type to apply policy to (e.g., \"Document\", \"Requirement\", \"TestCase\")",
            "example": "Document",
            "type": "string"
          },
          "projectId": {
            "description": "Project ID this policy applies to",
            "example": "123e4567-e89b-12d3-a456-426614174000",
            "type": "string"
          },
          "relevantPaths": {
            "description": "JSON Pointer paths to relevant properties. If specified, only these paths will be embedded (field masking).",
            "example": [
              "/properties/title",
              "/properties/description"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "requiredLabels": {
            "description": "Labels that must be present on the object for it to be embedded",
            "example": [
              "public",
              "approved"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "required": [
          "projectId",
          "objectType"
        ],
        "type": "object"
      },
      "CreateExtractionJobDto": {
        "properties": {
          "extraction_config": {
            "description": "Extraction configuration",
            "example": {
              "auto_create_types": true,
              "confidence_threshold": 0.7,
              "target_types": [
                "Requirement",
                "Feature"
              ]
            },
            "type": "object"
          },
          "project_id": {
            "description": "Project ID",
            "example": "550e8400-e29b-41d4-a716-446655440001",
            "type": "string"
          },
          "source_id": {
            "description": "Source object ID (e.g., document ID)",
            "example": "550e8400-e29b-41d4-a716-446655440002",
            "type": "string"
          },
          "source_metadata": {
            "description": "Additional source metadata",
            "example": {
              "filename": "requirements.pdf",
              "filesize": 1024000
            },
            "type": "object"
          },
          "source_type": {
            "description": "Source type for extraction",
            "enum": [
              "document",
              "api",
              "manual",
              "bulk_import"
            ],
            "example": "document",
            "type": "string"
          },
          "subject_id": {
            "description": "User subject ID (canonical internal user ID)",
            "example": "550e8400-e29b-41d4-a716-446655440003",
            "type": "string"
          }
        },
        "required": [
          "project_id",
          "source_type",
          "extraction_config"
        ],
        "type": "object"
      },
      "CreateGraphObjectDto": {
        "properties": {},
        "type": "object"
      },
      "CreateGraphRelationshipDto": {
        "properties": {},
        "type": "object"
      },
      "CreateIntegrationDto": {
        "properties": {},
        "type": "object"
      },
      "CreateInviteDto": {
        "properties": {},
        "type": "object"
      },
      "CreateInviteWithUserDto": {
        "properties": {},
        "type": "object"
      },
      "CreateObjectTypeDto": {
        "properties": {},
        "type": "object"
      },
      "CreateOrgDto": {
        "properties": {},
        "type": "object"
      },
      "CreateProductVersionDto": {
        "properties": {},
        "type": "object"
      },
      "CreateProjectDto": {
        "properties": {
          "name": {
            "description": "Project name (unique per organization, case-insensitive)",
            "example": "My Project",
            "type": "string"
          },
          "orgId": {
            "description": "Organization UUID (must belong to caller; no implicit default org)",
            "type": "string"
          }
        },
        "required": [
          "name",
          "orgId"
        ],
        "type": "object"
      },
      "CreateTagDto": {
        "properties": {
          "description": {
            "description": "Optional tag description",
            "example": "Stable release for production",
            "type": "string"
          },
          "name": {
            "description": "Tag name (unique within project)",
            "example": "stable",
            "type": "string"
          },
          "product_version_id": {
            "description": "Product version ID to tag",
            "example": "11111111-1111-4111-8111-111111111111",
            "type": "string"
          }
        },
        "required": [
          "name",
          "product_version_id"
        ],
        "type": "object"
      },
      "CreateTemplatePackDto": {
        "properties": {},
        "type": "object"
      },
      "DeletionImpactDto": {
        "properties": {
          "document": {
            "description": "Document information",
            "example": {
              "createdAt": "2024-01-01T00:00:00Z",
              "id": "123e4567-e89b-12d3-a456-426614174000",
              "name": "example.pdf"
            },
            "type": "object"
          },
          "impact": {
            "description": "Impact summary of entities that will be deleted",
            "example": {
              "chunks": 42,
              "extractionJobs": 3,
              "graphObjects": 15,
              "graphRelationships": 8,
              "notifications": 1
            },
            "type": "object"
          }
        },
        "required": [
          "document",
          "impact"
        ],
        "type": "object"
      },
      "DeletionSummaryDto": {
        "properties": {
          "status": {
            "description": "Deletion status",
            "enum": [
              "deleted",
              "partial"
            ],
            "example": "deleted",
            "type": "string"
          },
          "summary": {
            "description": "Summary of deleted entities",
            "example": {
              "chunks": 42,
              "extractionJobs": 3,
              "graphObjects": 15,
              "graphRelationships": 8,
              "notifications": 1
            },
            "type": "object"
          }
        },
        "required": [
          "status",
          "summary"
        ],
        "type": "object"
      },
      "DocumentDto": {
        "properties": {
          "chunks": {
            "description": "Number of chunks associated with this document",
            "example": 12,
            "type": "number"
          },
          "content": {
            "description": "The full text content of the document",
            "example": "# Document Title\n\nDocument content here...",
            "nullable": true,
            "type": "object"
          },
          "contentLength": {
            "description": "The byte length of the content field",
            "example": 7332286,
            "nullable": true,
            "type": "object"
          },
          "createdAt": {
            "example": "2025-01-01T00:00:00.000Z",
            "type": "string"
          },
          "extractionCompletedAt": {
            "description": "Timestamp when the most recent extraction job was completed",
            "example": "2025-01-01T00:10:00.000Z",
            "nullable": true,
            "type": "string"
          },
          "extractionObjectsCount": {
            "description": "Number of objects extracted in the most recent extraction job",
            "example": 15,
            "nullable": true,
            "type": "number"
          },
          "extractionStatus": {
            "description": "Status of the most recent extraction job for this document (pending, running, completed, failed)",
            "enum": [
              "pending",
              "running",
              "completed",
              "failed"
            ],
            "example": "completed",
            "nullable": true,
            "type": "string"
          },
          "id": {
            "example": "doc_1",
            "type": "string"
          },
          "integrationMetadata": {
            "description": "Integration-specific metadata (ClickUp IDs, creator info, etc.)",
            "example": {
              "doc_id": "4bj41-33735",
              "source": "clickup",
              "workspace_id": "4573313"
            },
            "nullable": true,
            "type": "object"
          },
          "mimeType": {
            "example": "text/markdown",
            "nullable": true,
            "type": "object"
          },
          "name": {
            "example": "Spec.md",
            "type": "string"
          },
          "orgId": {
            "example": "11111111-2222-3333-4444-555555555555",
            "nullable": true,
            "type": "string"
          },
          "parentDocumentId": {
            "description": "Parent document ID for hierarchical structures (e.g., ClickUp page hierarchy)",
            "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
            "nullable": true,
            "type": "object"
          },
          "projectId": {
            "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
            "nullable": true,
            "type": "string"
          },
          "sourceUrl": {
            "example": "https://example.com/file.pdf",
            "nullable": true,
            "type": "object"
          },
          "updatedAt": {
            "example": "2025-01-01T00:05:00.000Z",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "createdAt",
          "updatedAt",
          "chunks"
        ],
        "type": "object"
      },
      "EdgePhaseDto": {
        "properties": {
          "direction": {
            "description": "Edge traversal direction: out (src->dst), in (dst<-src), or both",
            "enum": [
              "out",
              "in",
              "both"
            ],
            "example": "out",
            "type": "string"
          },
          "labels": {
            "description": "Filter discovered nodes by labels. Nodes must have at least one matching label.",
            "example": [
              "verified",
              "high-priority"
            ],
            "items": {
              "type": "string"
            },
            "maxItems": 64,
            "type": "array"
          },
          "maxDepth": {
            "description": "Maximum depth (hops) to traverse in this phase, relative to phase start nodes",
            "example": 2,
            "maximum": 8,
            "minimum": 1,
            "type": "number"
          },
          "objectTypes": {
            "description": "Filter discovered nodes by object types. Only matching types included.",
            "example": [
              "Implementation",
              "TestCase"
            ],
            "items": {
              "type": "string"
            },
            "maxItems": 64,
            "type": "array"
          },
          "relationshipTypes": {
            "description": "Relationship types to follow in this phase. If omitted, all types are allowed.",
            "example": [
              "DEPENDS_ON",
              "REQUIRES"
            ],
            "items": {
              "type": "string"
            },
            "maxItems": 32,
            "type": "array"
          }
        },
        "required": [
          "direction",
          "maxDepth"
        ],
        "type": "object"
      },
      "EmbeddingPolicyResponseDto": {
        "properties": {
          "createdAt": {
            "description": "Creation timestamp",
            "example": "2025-10-01T12:00:00Z",
            "format": "date-time",
            "type": "string"
          },
          "enabled": {
            "description": "Whether embedding is enabled",
            "example": true,
            "type": "boolean"
          },
          "excludedLabels": {
            "description": "Excluded labels",
            "example": [
              "sensitive"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "excludedStatuses": {
            "description": "Excluded status values",
            "example": [
              "draft"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "id": {
            "description": "Policy ID",
            "example": "123e4567-e89b-12d3-a456-426614174000",
            "type": "string"
          },
          "maxPropertySize": {
            "description": "Maximum property size in bytes",
            "example": 10000,
            "nullable": true,
            "type": "object"
          },
          "objectType": {
            "description": "Object type",
            "example": "Document",
            "type": "string"
          },
          "projectId": {
            "description": "Project ID",
            "example": "123e4567-e89b-12d3-a456-426614174001",
            "type": "string"
          },
          "relevantPaths": {
            "description": "Relevant property paths (JSON Pointers)",
            "example": [
              "/properties/title"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "requiredLabels": {
            "description": "Required labels",
            "example": [
              "public"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "updatedAt": {
            "description": "Last update timestamp",
            "example": "2025-10-01T12:30:00Z",
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "projectId",
          "objectType",
          "enabled",
          "maxPropertySize",
          "requiredLabels",
          "excludedLabels",
          "relevantPaths",
          "excludedStatuses",
          "createdAt",
          "updatedAt"
        ],
        "type": "object"
      },
      "ExtractionJobDto": {
        "properties": {
          "completed_at": {
            "description": "Job completion timestamp",
            "format": "date-time",
            "type": "string"
          },
          "created_at": {
            "description": "Job creation timestamp",
            "format": "date-time",
            "type": "string"
          },
          "created_objects": {
            "description": "Created object IDs",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "debug_info": {
            "description": "Debug information (LLM requests/responses, intermediate results)",
            "example": {
              "llm_calls": [
                {
                  "duration_ms": 1234,
                  "prompt": "Extract requirements...",
                  "response": "LLM response data",
                  "type": "Requirement"
                }
              ]
            },
            "type": "object"
          },
          "discovered_types": {
            "description": "Discovered type names",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "error_details": {
            "description": "Error details",
            "type": "object"
          },
          "error_message": {
            "description": "Error message",
            "type": "string"
          },
          "extraction_config": {
            "description": "Extraction configuration",
            "type": "object"
          },
          "failed_items": {
            "description": "Failed items count",
            "type": "number"
          },
          "id": {
            "description": "Job ID",
            "type": "string"
          },
          "processed_items": {
            "description": "Processed items count",
            "type": "number"
          },
          "project_id": {
            "description": "Project ID",
            "type": "string"
          },
          "source_id": {
            "description": "Source ID",
            "type": "string"
          },
          "source_metadata": {
            "description": "Source metadata",
            "type": "object"
          },
          "source_type": {
            "description": "Source type",
            "enum": [
              "document",
              "api",
              "manual",
              "bulk_import"
            ],
            "type": "string"
          },
          "started_at": {
            "description": "Job start timestamp",
            "format": "date-time",
            "type": "string"
          },
          "status": {
            "description": "Job status",
            "enum": [
              "pending",
              "running",
              "completed",
              "requires_review",
              "failed",
              "cancelled"
            ],
            "type": "string"
          },
          "subject_id": {
            "description": "User subject ID (canonical internal user ID)",
            "type": "string"
          },
          "successful_items": {
            "description": "Successful items count",
            "type": "number"
          },
          "total_items": {
            "description": "Total items to process",
            "type": "number"
          },
          "updated_at": {
            "description": "Last update timestamp",
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "project_id",
          "source_type",
          "source_metadata",
          "extraction_config",
          "status",
          "total_items",
          "processed_items",
          "successful_items",
          "failed_items",
          "discovered_types",
          "created_objects",
          "created_at",
          "updated_at"
        ],
        "type": "object"
      },
      "ExtractionJobListDto": {
        "properties": {
          "jobs": {
            "description": "List of extraction jobs",
            "items": {
              "$ref": "#/components/schemas/ExtractionJobDto"
            },
            "type": "array"
          },
          "limit": {
            "description": "Items per page",
            "type": "number"
          },
          "page": {
            "description": "Current page number",
            "type": "number"
          },
          "total": {
            "description": "Total count of jobs",
            "type": "number"
          },
          "total_pages": {
            "description": "Total pages",
            "type": "number"
          }
        },
        "required": [
          "jobs",
          "total",
          "page",
          "limit",
          "total_pages"
        ],
        "type": "object"
      },
      "ExtractionJobResourceDto": {
        "properties": {
          "completedAt": {
            "example": "2025-10-22T10:35:00Z",
            "type": "string"
          },
          "documentId": {
            "example": "doc_456",
            "type": "string"
          },
          "failedItems": {
            "example": 0,
            "type": "number"
          },
          "id": {
            "example": "123e4567-e89b-12d3-a456-426614174000",
            "type": "string"
          },
          "processedItems": {
            "example": 5,
            "type": "number"
          },
          "startedAt": {
            "example": "2025-10-22T10:30:00Z",
            "type": "string"
          },
          "status": {
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ],
            "example": "completed",
            "type": "string"
          },
          "successfulItems": {
            "example": 5,
            "type": "number"
          },
          "totalCostUsd": {
            "example": 0.0125,
            "type": "number"
          },
          "totalItems": {
            "example": 5,
            "type": "number"
          }
        },
        "required": [
          "id",
          "documentId",
          "status",
          "totalItems",
          "processedItems",
          "successfulItems",
          "failedItems",
          "startedAt"
        ],
        "type": "object"
      },
      "GetChatStreamCitationsFrame": {
        "properties": {},
        "type": "object"
      },
      "GetChatStreamDoneFrame": {
        "properties": {},
        "type": "object"
      },
      "GetChatStreamErrorFrame": {
        "properties": {},
        "type": "object"
      },
      "GetChatStreamGraphNeighborsFrame": {
        "properties": {},
        "type": "object"
      },
      "GetChatStreamGraphObjectsFrame": {
        "properties": {},
        "type": "object"
      },
      "GetChatStreamMetaFrame": {
        "properties": {},
        "type": "object"
      },
      "GetChatStreamSummaryFrame": {
        "properties": {},
        "type": "object"
      },
      "GetChatStreamTokenFrame": {
        "properties": {},
        "type": "object"
      },
      "GraphExpandDto": {
        "properties": {},
        "type": "object"
      },
      "GraphObjectDto": {
        "properties": {},
        "type": "object"
      },
      "GraphObjectNeighborsDto": {
        "properties": {},
        "type": "object"
      },
      "GraphSearchCitationDto": {
        "properties": {
          "confidence": {
            "example": 0.82,
            "type": "number"
          },
          "source_object_id": {
            "example": "b3d52c50-5101-4c6c-8d30-4a1f0f7645cb",
            "type": "string"
          },
          "span": {
            "example": "Decision depends on consistent flag rollout",
            "type": "string"
          }
        },
        "required": [
          "span",
          "source_object_id",
          "confidence"
        ],
        "type": "object"
      },
      "GraphSearchDebugDto": {
        "properties": {
          "edge_samples": {
            "example": [
              {
                "depth": 1,
                "edge_score": 0.63,
                "hub_damping": 0.43,
                "relation": "decides"
              }
            ],
            "items": {
              "type": "object"
            },
            "type": "array"
          },
          "feature_flags": {
            "example": {
              "citations": false,
              "paths": true,
              "rerank": true
            },
            "type": "object"
          },
          "gain_rejections": {
            "example": 5,
            "type": "number"
          },
          "marginal_gain_min": {
            "example": 0.02,
            "type": "number"
          },
          "normalization": {
            "example": {
              "lexical": {
                "mean": 0.42,
                "std": 0.11
              }
            },
            "type": "object"
          }
        },
        "required": [
          "normalization",
          "gain_rejections",
          "marginal_gain_min",
          "edge_samples",
          "feature_flags"
        ],
        "type": "object"
      },
      "GraphSearchDocumentFusionDto": {
        "properties": {
          "enabled": {
            "default": false,
            "type": "boolean"
          },
          "mode": {
            "default": "blend",
            "enum": [
              "blend",
              "rrf",
              "sequential"
            ],
            "type": "string"
          },
          "topK": {
            "default": 8,
            "maximum": 50,
            "minimum": 1,
            "type": "number"
          },
          "weight": {
            "default": 0.35,
            "maximum": 1,
            "minimum": 0,
            "type": "number"
          }
        },
        "type": "object"
      },
      "GraphSearchEmbeddingModelMetaDto": {
        "properties": {
          "coverage_pct": {
            "example": 91.4,
            "type": "number"
          },
          "model": {
            "example": "text-embedding-3-large",
            "type": "string"
          },
          "version": {
            "example": 2,
            "type": "number"
          }
        },
        "required": [
          "model",
          "version",
          "coverage_pct"
        ],
        "type": "object"
      },
      "GraphSearchExpansionMetaDto": {
        "properties": {
          "hub_degree": {
            "example": 1342,
            "type": "number"
          },
          "hub_sampled": {
            "example": true,
            "type": "boolean"
          },
          "neighbors": {
            "example": 42,
            "type": "number"
          }
        },
        "required": [
          "neighbors",
          "hub_sampled"
        ],
        "type": "object"
      },
      "GraphSearchFiltersDto": {
        "properties": {
          "excludeObjectTypes": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "labelsAny": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "objectTypes": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "updatedAfter": {
            "example": "2025-09-01T00:00:00Z",
            "type": "string"
          },
          "updatedBefore": {
            "example": "2025-09-20T00:00:00Z",
            "type": "string"
          }
        },
        "type": "object"
      },
      "GraphSearchItemDto": {
        "properties": {
          "canonical_id": {
            "example": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd",
            "type": "string"
          },
          "citations": {
            "items": {
              "$ref": "#/components/schemas/GraphSearchCitationDto"
            },
            "type": "array"
          },
          "cursor": {
            "example": "eyJzY29yZSI6MC44NzEyMywiaWQiOiJkb2MtMSJ9",
            "type": "string"
          },
          "explanation": {
            "example": "High lexical match on ...",
            "type": "string"
          },
          "fields": {
            "example": {
              "status": "active",
              "title": "Adopt Feature Flagging",
              "type": "Decision"
            },
            "type": "object"
          },
          "object_id": {
            "example": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd",
            "type": "string"
          },
          "rank": {
            "example": 1,
            "type": "number"
          },
          "reasons": {
            "items": {
              "$ref": "#/components/schemas/GraphSearchReasonDto"
            },
            "type": "array"
          },
          "role": {
            "enum": [
              "primary",
              "neighbor",
              "reference",
              "document_chunk"
            ],
            "type": "string"
          },
          "score": {
            "example": 0.87123,
            "type": "number"
          },
          "truncated_fields": {
            "example": [
              "description"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "required": [
          "object_id",
          "canonical_id",
          "score",
          "rank",
          "role",
          "fields",
          "reasons"
        ],
        "type": "object"
      },
      "GraphSearchMetaDto": {
        "properties": {
          "approx_position_end": {
            "description": "Approximate 1-based index of last item in this page relative to fused pool snapshot. 0 if page empty.",
            "example": 80,
            "type": "number"
          },
          "approx_position_start": {
            "description": "Approximate 1-based index of first item in this page relative to fused pool snapshot. 0 if page empty.",
            "example": 41,
            "type": "number"
          },
          "channels": {
            "example": [
              "lexical",
              "vector"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "elapsed_ms": {
            "example": 92,
            "type": "number"
          },
          "embedding_model": {
            "$ref": "#/components/schemas/GraphSearchEmbeddingModelMetaDto"
          },
          "expansion": {
            "$ref": "#/components/schemas/GraphSearchExpansionMetaDto"
          },
          "fusion": {
            "example": "weighted_sum:v2",
            "type": "string"
          },
          "hasNext": {
            "example": true,
            "type": "boolean"
          },
          "hasPrev": {
            "example": false,
            "type": "boolean"
          },
          "lexical_considered": {
            "example": 100,
            "type": "number"
          },
          "neighbor_expanded": {
            "example": 47,
            "type": "number"
          },
          "nextCursor": {
            "example": null,
            "type": "object"
          },
          "normalization_version": {
            "example": "zscore_v1",
            "type": "string"
          },
          "prevCursor": {
            "example": null,
            "type": "object"
          },
          "request": {
            "$ref": "#/components/schemas/GraphSearchRequestMetaDto"
          },
          "rerank": {
            "$ref": "#/components/schemas/GraphSearchRerankMetaDto"
          },
          "skipped_unembedded": {
            "example": 12,
            "type": "number"
          },
          "token_budget": {
            "example": 3500,
            "type": "number"
          },
          "token_estimate": {
            "example": 1450,
            "type": "number"
          },
          "total_estimate": {
            "description": "Total size of fused candidate pool prior to pagination (may be less than lexical_considered+vector_considered due to overlaps).",
            "example": 8,
            "type": "number"
          },
          "truncation_notice": {
            "example": false,
            "type": "boolean"
          },
          "vector_considered": {
            "example": 100,
            "type": "number"
          },
          "warnings": {
            "example": [
              "embedding_version_backlog"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "required": [
          "channels",
          "fusion",
          "normalization_version",
          "lexical_considered",
          "vector_considered",
          "skipped_unembedded",
          "neighbor_expanded",
          "token_estimate",
          "token_budget",
          "truncation_notice",
          "embedding_model",
          "rerank",
          "expansion",
          "request",
          "elapsed_ms",
          "total_estimate",
          "hasNext",
          "hasPrev"
        ],
        "type": "object"
      },
      "GraphSearchNeighborDto": {
        "properties": {
          "edgeTypes": {
            "example": [
              "decides",
              "attended_by"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "globalLimit": {
            "default": 50,
            "minimum": 0,
            "type": "number"
          },
          "maxDepth": {
            "default": 1,
            "minimum": 0,
            "type": "number"
          },
          "perPrimaryLimit": {
            "default": 3,
            "minimum": 0,
            "type": "number"
          }
        },
        "type": "object"
      },
      "GraphSearchPaginationDto": {
        "properties": {
          "cursor": {
            "example": null,
            "type": "object"
          },
          "direction": {
            "default": "forward",
            "description": "Pagination direction relative to cursor (forward = items after cursor, backward = items before cursor). Only meaningful when cursor is supplied.",
            "enum": [
              "forward",
              "backward"
            ],
            "type": "string"
          },
          "limit": {
            "default": 40,
            "maximum": 100,
            "minimum": 1,
            "type": "number"
          }
        },
        "type": "object"
      },
      "GraphSearchPathSummaryDto": {
        "properties": {
          "path_id": {
            "example": "e7b7ff6e-ef5f-4b55-9580-5d3b45d0a123",
            "type": "string"
          },
          "reasons": {
            "items": {
              "$ref": "#/components/schemas/GraphSearchReasonDto"
            },
            "type": "array"
          },
          "summary": {
            "example": "Meeting X decided Decision Y",
            "type": "string"
          }
        },
        "required": [
          "path_id",
          "summary",
          "reasons"
        ],
        "type": "object"
      },
      "GraphSearchReasonDto": {
        "properties": {
          "channel": {
            "enum": [
              "lexical",
              "vector",
              "neighbor_boost",
              "doc"
            ],
            "type": "string"
          },
          "score": {
            "example": 0.42,
            "type": "number"
          }
        },
        "required": [
          "channel",
          "score"
        ],
        "type": "object"
      },
      "GraphSearchRequestDto": {
        "properties": {
          "channels": {
            "items": {
              "enum": [
                "lexical",
                "vector",
                "neighbor_boost",
                "doc"
              ],
              "type": "string"
            },
            "type": "array"
          },
          "documentFusion": {
            "$ref": "#/components/schemas/GraphSearchDocumentFusionDto"
          },
          "experimental": {
            "description": "Experimental feature flags container",
            "type": "object"
          },
          "filters": {
            "$ref": "#/components/schemas/GraphSearchFiltersDto"
          },
          "includeCitations": {
            "default": false,
            "type": "boolean"
          },
          "includeDebug": {
            "default": false,
            "type": "boolean"
          },
          "includePathSummaries": {
            "default": true,
            "type": "boolean"
          },
          "intentOverride": {
            "enum": [
              "explain",
              "locate_config",
              "debug_error",
              "roadmap"
            ],
            "example": "explain",
            "type": "string"
          },
          "limit": {
            "default": 40,
            "maximum": 100,
            "minimum": 1,
            "type": "number"
          },
          "maxTokenBudget": {
            "default": 3500,
            "maximum": 6000,
            "minimum": 800,
            "type": "number"
          },
          "neighbor": {
            "$ref": "#/components/schemas/GraphSearchNeighborDto"
          },
          "pagination": {
            "$ref": "#/components/schemas/GraphSearchPaginationDto"
          },
          "query": {
            "description": "Search query",
            "maxLength": 800,
            "type": "string"
          },
          "rerank": {
            "default": null,
            "type": "object"
          }
        },
        "required": [
          "query"
        ],
        "type": "object"
      },
      "GraphSearchRequestMetaDto": {
        "properties": {
          "channels": {
            "example": [
              "lexical",
              "vector"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "direction": {
            "description": "Pagination direction used for this page.",
            "enum": [
              "forward",
              "backward"
            ],
            "example": "forward",
            "type": "string"
          },
          "limit": {
            "description": "Effective page size after server cap",
            "example": 40,
            "type": "number"
          },
          "requested_limit": {
            "description": "Original client requested limit before clamping",
            "example": 100,
            "type": "number"
          },
          "rerank": {
            "example": false,
            "type": "object"
          }
        },
        "required": [
          "limit"
        ],
        "type": "object"
      },
      "GraphSearchRerankMetaDto": {
        "properties": {
          "applied": {
            "example": true,
            "type": "boolean"
          },
          "latency_ms": {
            "example": 42,
            "type": "number"
          },
          "model": {
            "example": "mini-cross-encoder-v1",
            "type": "string"
          },
          "pool": {
            "example": 60,
            "type": "number"
          },
          "timeout": {
            "example": false,
            "type": "boolean"
          }
        },
        "required": [
          "applied"
        ],
        "type": "object"
      },
      "GraphSearchResponseDto": {
        "properties": {
          "debug": {
            "$ref": "#/components/schemas/GraphSearchDebugDto"
          },
          "intent": {
            "enum": [
              "explain",
              "locate_config",
              "debug_error",
              "roadmap"
            ],
            "type": "string"
          },
          "items": {
            "items": {
              "$ref": "#/components/schemas/GraphSearchItemDto"
            },
            "type": "array"
          },
          "meta": {
            "$ref": "#/components/schemas/GraphSearchMetaDto"
          },
          "path_summaries": {
            "items": {
              "$ref": "#/components/schemas/GraphSearchPathSummaryDto"
            },
            "type": "array"
          },
          "query": {
            "example": "original query text",
            "type": "string"
          }
        },
        "required": [
          "query",
          "items",
          "meta"
        ],
        "type": "object"
      },
      "IngestionUploadDto": {
        "properties": {
          "filename": {
            "description": "Original filename (optional, will fallback to uploaded file name)",
            "example": "spec.md",
            "type": "string"
          },
          "mimeType": {
            "description": "Optional MIME type",
            "example": "text/markdown",
            "type": "string"
          },
          "orgId": {
            "description": "Optional organisation UUID to associate the document with",
            "example": "11111111-2222-3333-4444-555555555555",
            "type": "string"
          },
          "projectId": {
            "description": "Project UUID that this document belongs to (required)",
            "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
            "type": "string"
          }
        },
        "required": [
          "projectId"
        ],
        "type": "object"
      },
      "IngestionUrlDto": {
        "properties": {
          "orgId": {
            "description": "Optional organisation UUID to associate the document with",
            "example": "11111111-2222-3333-4444-555555555555",
            "type": "string"
          },
          "projectId": {
            "description": "Project UUID that this document belongs to (required)",
            "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
            "type": "string"
          },
          "url": {
            "description": "Remote URL to ingest",
            "example": "https://example.com/spec.md",
            "type": "string"
          }
        },
        "required": [
          "url",
          "projectId"
        ],
        "type": "object"
      },
      "LLMCallDto": {
        "properties": {
          "completedAt": {
            "example": "2025-10-22T10:30:05Z",
            "type": "string"
          },
          "costUsd": {
            "example": 0.00875,
            "type": "number"
          },
          "durationMs": {
            "example": 5000,
            "type": "number"
          },
          "errorMessage": {
            "example": "Timeout after 30s",
            "type": "string"
          },
          "id": {
            "example": "123e4567-e89b-12d3-a456-426614174000",
            "type": "string"
          },
          "inputTokens": {
            "example": 1000,
            "type": "number"
          },
          "modelName": {
            "example": "gemini-1.5-pro",
            "type": "string"
          },
          "outputTokens": {
            "example": 500,
            "type": "number"
          },
          "processId": {
            "example": "job_123",
            "type": "string"
          },
          "processType": {
            "example": "extraction_job",
            "type": "string"
          },
          "requestPayload": {
            "example": {
              "prompt": "Extract entities from..."
            },
            "type": "object"
          },
          "responsePayload": {
            "example": {
              "entities": []
            },
            "type": "object"
          },
          "startedAt": {
            "example": "2025-10-22T10:30:00Z",
            "type": "string"
          },
          "status": {
            "enum": [
              "success",
              "error",
              "timeout",
              "pending"
            ],
            "example": "success",
            "type": "string"
          },
          "totalTokens": {
            "example": 1500,
            "type": "number"
          }
        },
        "required": [
          "id",
          "processId",
          "processType",
          "modelName",
          "requestPayload",
          "status",
          "startedAt"
        ],
        "type": "object"
      },
      "LogEntryDto": {
        "properties": {
          "id": {
            "example": "123e4567-e89b-12d3-a456-426614174000",
            "type": "string"
          },
          "level": {
            "enum": [
              "debug",
              "info",
              "warn",
              "error",
              "fatal"
            ],
            "example": "info",
            "type": "string"
          },
          "message": {
            "example": "Job processing started",
            "type": "string"
          },
          "metadata": {
            "example": {
              "entity_count": 5,
              "step": "extraction"
            },
            "type": "object"
          },
          "processId": {
            "example": "job_123",
            "type": "string"
          },
          "processType": {
            "example": "extraction_job",
            "type": "string"
          },
          "timestamp": {
            "example": "2025-10-22T10:30:00Z",
            "type": "string"
          }
        },
        "required": [
          "id",
          "processId",
          "processType",
          "level",
          "message",
          "timestamp"
        ],
        "type": "object"
      },
      "ObjectHistoryResponseDto": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/VersionedObjectDto"
            },
            "type": "array"
          },
          "next_cursor": {
            "description": "Present when more pages available; pass as cursor query param",
            "type": "string"
          }
        },
        "required": [
          "items"
        ],
        "type": "object"
      },
      "OrgDto": {
        "properties": {
          "id": {
            "example": "org_1",
            "type": "string"
          },
          "name": {
            "example": "Example Org",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name"
        ],
        "type": "object"
      },
      "OrgWithProjectsDto": {
        "properties": {
          "id": {
            "description": "Organization UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000",
            "type": "string"
          },
          "name": {
            "description": "Organization name",
            "example": "Acme Corp",
            "type": "string"
          },
          "projects": {
            "description": "Projects within organization that user has access to",
            "items": {
              "type": "array"
            },
            "type": "array"
          },
          "role": {
            "description": "User role in organization",
            "enum": [
              "org_admin",
              "org_member"
            ],
            "example": "org_admin",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "role",
          "projects"
        ],
        "type": "object"
      },
      "PatchGraphObjectDto": {
        "properties": {},
        "type": "object"
      },
      "PatchGraphRelationshipDto": {
        "properties": {},
        "type": "object"
      },
      "PredicateDto": {
        "properties": {
          "operator": {
            "description": "Comparison operator to apply",
            "enum": [
              "equals",
              "notEquals",
              "greaterThan",
              "lessThan",
              "greaterThanOrEqual",
              "lessThanOrEqual",
              "contains",
              "in",
              "notIn",
              "matches",
              "exists",
              "notExists"
            ],
            "example": "equals",
            "type": "string"
          }
        },
        "required": [
          "operator"
        ],
        "type": "object"
      },
      "ProjectDto": {
        "properties": {
          "auto_extract_config": {
            "description": "Configuration for automatic extraction jobs",
            "example": {
              "duplicate_strategy": "skip",
              "enabled_types": [
                "Requirement",
                "Decision",
                "Feature"
              ],
              "min_confidence": 0.7,
              "notification_channels": [
                "inbox"
              ],
              "notify_on_complete": true,
              "require_review": true
            },
            "type": "object"
          },
          "auto_extract_objects": {
            "description": "When true, automatically create extraction jobs when documents are uploaded",
            "example": false,
            "type": "boolean"
          },
          "chat_prompt_template": {
            "description": "Custom chat prompt template with placeholders",
            "example": "You are a helpful assistant...\n\n{{GRAPH_CONTEXT}}\n\n{{MESSAGE}}",
            "type": "string"
          },
          "id": {
            "example": "proj_1",
            "type": "string"
          },
          "kb_purpose": {
            "example": "This knowledge base contains...",
            "type": "string"
          },
          "name": {
            "example": "Demo Project",
            "type": "string"
          },
          "orgId": {
            "example": "org_1",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "orgId"
        ],
        "type": "object"
      },
      "RelationshipHistoryResponseDto": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/VersionedRelationshipDto"
            },
            "type": "array"
          },
          "next_cursor": {
            "description": "Present when more pages available; pass as cursor query param",
            "type": "string"
          }
        },
        "required": [
          "items"
        ],
        "type": "object"
      },
      "ResourceDetailResponseDto": {
        "properties": {
          "llmCalls": {
            "items": {
              "$ref": "#/components/schemas/LLMCallDto"
            },
            "type": "array"
          },
          "metrics": {
            "example": {
              "avgDuration": 5000,
              "totalCost": 0.0125
            },
            "type": "object"
          },
          "recentLogs": {
            "items": {
              "$ref": "#/components/schemas/LogEntryDto"
            },
            "type": "array"
          },
          "resource": {
            "$ref": "#/components/schemas/ExtractionJobResourceDto"
          }
        },
        "required": [
          "resource",
          "recentLogs",
          "llmCalls"
        ],
        "type": "object"
      },
      "ResourceListResponseDto": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/ExtractionJobResourceDto"
            },
            "type": "array"
          },
          "limit": {
            "example": 50,
            "type": "number"
          },
          "offset": {
            "example": 0,
            "type": "number"
          },
          "total": {
            "example": 42,
            "type": "number"
          }
        },
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "type": "object"
      },
      "SchemaChangeDto": {
        "properties": {
          "change_type": {
            "description": "Type of change",
            "enum": [
              "created",
              "updated",
              "deleted"
            ],
            "type": "string"
          },
          "created_at": {
            "description": "ISO timestamp of change",
            "type": "string"
          },
          "pack_id": {
            "description": "Template pack ID",
            "type": "string"
          },
          "schema_hash": {
            "description": "Schema hash for this version",
            "type": "string"
          },
          "version": {
            "description": "New version number",
            "type": "string"
          }
        },
        "required": [
          "pack_id",
          "version",
          "schema_hash",
          "created_at"
        ],
        "type": "object"
      },
      "SchemaVersionDto": {
        "properties": {
          "cache_hint_ttl": {
            "description": "Suggested cache TTL in seconds",
            "example": 300,
            "type": "number"
          },
          "updated_at": {
            "description": "ISO timestamp of last schema update",
            "example": "2025-10-20T10:30:00.000Z",
            "type": "string"
          },
          "version": {
            "description": "Hash representing current schema state",
            "example": "a1b2c3d4e5f6g7h8",
            "type": "string"
          }
        },
        "required": [
          "version",
          "updated_at",
          "cache_hint_ttl"
        ],
        "type": "object"
      },
      "SearchObjectsWithNeighborsDto": {
        "properties": {
          "branchId": {
            "description": "Filter by branch ID",
            "type": "string"
          },
          "includeNeighbors": {
            "default": false,
            "description": "Whether to include neighbors for each result",
            "type": "boolean"
          },
          "labels": {
            "description": "Filter by labels",
            "example": [
              "accepted",
              "high-priority"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "limit": {
            "default": 10,
            "description": "Maximum number of primary search results",
            "maximum": 100,
            "minimum": 1,
            "type": "number"
          },
          "maxDistance": {
            "default": 0.5,
            "description": "Maximum vector distance for similarity (0.0-2.0, lower = more similar)",
            "maximum": 2,
            "minimum": 0,
            "type": "number"
          },
          "maxNeighbors": {
            "default": 5,
            "description": "Maximum number of neighbors per result",
            "maximum": 20,
            "minimum": 1,
            "type": "number"
          },
          "orgId": {
            "description": "Filter by organization ID",
            "type": "string"
          },
          "projectId": {
            "description": "Filter by project ID",
            "type": "string"
          },
          "query": {
            "description": "Natural language query text to search for",
            "example": "authentication and authorization patterns",
            "type": "string"
          },
          "types": {
            "description": "Filter by object types",
            "example": [
              "Decision",
              "Pattern",
              "Document"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "required": [
          "query"
        ],
        "type": "object"
      },
      "SearchResponseDto": {
        "properties": {
          "mode": {
            "enum": [
              "hybrid",
              "lexical",
              "vector"
            ],
            "type": "string"
          },
          "query_time_ms": {
            "description": "Query execution time in milliseconds",
            "example": 142.5,
            "type": "number"
          },
          "result_count": {
            "description": "Total number of results found before pagination/limits",
            "example": 50,
            "type": "number"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/SearchResultDto"
            },
            "type": "array"
          },
          "warning": {
            "example": "Embeddings unavailable; fell back to lexical.",
            "type": "string"
          }
        },
        "required": [
          "mode",
          "results"
        ],
        "type": "object"
      },
      "SearchResultDto": {
        "properties": {
          "id": {
            "example": "mock-1",
            "type": "string"
          },
          "pathSummary": {
            "description": "Human-readable summary of how this result relates to other objects in the knowledge graph",
            "example": "Related: links to Requirement \"REQ-1\" via 'implements'; linked from Meeting \"M3\" via 'discussed_in'",
            "type": "string"
          },
          "score": {
            "example": 0.98,
            "type": "number"
          },
          "snippet": {
            "example": "Result snippet for \"foo\" (#1, mode=hybrid)",
            "type": "string"
          },
          "source": {
            "example": "source.doc#L10",
            "type": "string"
          }
        },
        "required": [
          "id",
          "snippet",
          "score"
        ],
        "type": "object"
      },
      "SnoozeNotificationDto": {
        "properties": {
          "until": {
            "description": "ISO 8601 datetime string for snooze until time",
            "type": "string"
          }
        },
        "required": [
          "until"
        ],
        "type": "object"
      },
      "TemporalFilterDto": {
        "properties": {
          "asOf": {
            "description": "Timestamp for point-in-time query (ISO 8601 format). Only nodes/edges valid at this timestamp are included.",
            "example": "2024-12-31T23:59:59Z",
            "format": "date-time",
            "type": "string"
          },
          "field": {
            "default": "valid_from",
            "description": "Which temporal field to use for filtering. Default: valid_from",
            "enum": [
              "valid_from",
              "created_at",
              "updated_at"
            ],
            "example": "valid_from",
            "type": "string"
          }
        },
        "required": [
          "asOf"
        ],
        "type": "object"
      },
      "TraverseGraphDto": {
        "properties": {
          "edgeFilter": {
            "allOf": [
              {
                "$ref": "#/components/schemas/PredicateDto"
              }
            ],
            "description": "Filter edges by property values. Only edges satisfying the predicate will be traversed.",
            "example": {
              "operator": "greaterThan",
              "path": "/confidence",
              "value": 0.7
            }
          },
          "edgePhases": {
            "description": "Define multiple sequential traversal phases with different constraints per phase. When provided, legacy direction/max_depth/relationship_types are ignored.",
            "example": [
              {
                "direction": "out",
                "maxDepth": 2,
                "relationshipTypes": [
                  "DEPENDS_ON"
                ]
              },
              {
                "direction": "in",
                "maxDepth": 1,
                "objectTypes": [
                  "TestCase"
                ],
                "relationshipTypes": [
                  "IMPLEMENTED_BY"
                ]
              }
            ],
            "items": {
              "$ref": "#/components/schemas/EdgePhaseDto"
            },
            "maxItems": 8,
            "type": "array"
          },
          "fieldStrategy": {
            "default": "full",
            "description": "Field pruning strategy to control response payload size. compact removes paths/phaseIndex (~25% reduction), minimal keeps only essential fields (~45% reduction).",
            "enum": [
              "full",
              "compact",
              "minimal"
            ],
            "example": "compact",
            "type": "string"
          },
          "maxPathsPerNode": {
            "default": 10,
            "description": "Maximum paths to track per node (used with returnPaths). Limits memory usage when a node is reachable via many routes.",
            "example": 10,
            "maximum": 100,
            "minimum": 1,
            "type": "number"
          },
          "nodeFilter": {
            "allOf": [
              {
                "$ref": "#/components/schemas/PredicateDto"
              }
            ],
            "description": "Filter nodes by property values using JSON Pointer paths and comparison operators. Only nodes satisfying the predicate are included.",
            "example": {
              "operator": "equals",
              "path": "/status",
              "value": "active"
            }
          },
          "returnPaths": {
            "description": "When true, include full paths from root nodes to each result node. Each path is an array of node IDs showing the traversal route.",
            "example": true,
            "type": "boolean"
          },
          "temporalFilter": {
            "allOf": [
              {
                "$ref": "#/components/schemas/TemporalFilterDto"
              }
            ],
            "description": "Filter nodes and edges based on temporal validity. Enables point-in-time queries to see historical graph state.",
            "example": {
              "asOf": "2024-12-31T23:59:59Z",
              "field": "valid_from"
            }
          }
        },
        "type": "object"
      },
      "UnifiedSearchDebugDto": {
        "properties": {
          "graphSearch": {
            "description": "Raw graph search response",
            "type": "object"
          },
          "textSearch": {
            "description": "Raw text search results",
            "type": "object"
          }
        },
        "type": "object"
      },
      "UnifiedSearchMetadataDto": {
        "properties": {
          "executionTime": {
            "description": "Query execution time breakdown (ms)",
            "example": {
              "fusionMs": 5.7,
              "graphSearchMs": 45.2,
              "relationshipExpansionMs": 12.1,
              "textSearchMs": 67.3,
              "totalMs": 130.3
            },
            "type": "object"
          },
          "fusionStrategy": {
            "description": "Fusion strategy used",
            "example": "weighted",
            "type": "string"
          },
          "graphResultCount": {
            "description": "Number of graph results",
            "example": 12,
            "type": "number"
          },
          "textResultCount": {
            "description": "Number of text results",
            "example": 15,
            "type": "number"
          },
          "totalResults": {
            "description": "Total number of results across both types",
            "example": 27,
            "type": "number"
          }
        },
        "required": [
          "totalResults",
          "graphResultCount",
          "textResultCount",
          "fusionStrategy",
          "executionTime"
        ],
        "type": "object"
      },
      "UnifiedSearchRelationshipOptionsDto": {
        "properties": {
          "direction": {
            "default": "both",
            "description": "Direction for relationship expansion",
            "enum": [
              "in",
              "out",
              "both"
            ],
            "type": "string"
          },
          "enabled": {
            "default": true,
            "description": "Whether to include relationships for graph results",
            "type": "boolean"
          },
          "maxDepth": {
            "default": 1,
            "description": "Maximum depth for relationship traversal",
            "maximum": 3,
            "minimum": 0,
            "type": "number"
          },
          "maxNeighbors": {
            "default": 5,
            "description": "Maximum number of neighbors per graph result",
            "maximum": 20,
            "minimum": 0,
            "type": "number"
          }
        },
        "type": "object"
      },
      "UnifiedSearchRequestDto": {
        "properties": {
          "fusionStrategy": {
            "default": "weighted",
            "description": "Strategy for combining/fusing graph and text results",
            "enum": [
              "weighted",
              "rrf",
              "interleave",
              "graph_first",
              "text_first"
            ],
            "type": "string"
          },
          "includeDebug": {
            "default": false,
            "description": "Whether to include debug metadata in response",
            "type": "boolean"
          },
          "limit": {
            "default": 20,
            "description": "Maximum total number of results to return",
            "maximum": 100,
            "minimum": 1,
            "type": "number"
          },
          "maxTokenBudget": {
            "default": 3500,
            "description": "Maximum token budget for field truncation (applies to graph results)",
            "maximum": 6000,
            "minimum": 800,
            "type": "number"
          },
          "query": {
            "description": "Natural language search query",
            "example": "hybrid search architecture decisions",
            "maxLength": 800,
            "type": "string"
          },
          "relationshipOptions": {
            "allOf": [
              {
                "$ref": "#/components/schemas/UnifiedSearchRelationshipOptionsDto"
              }
            ],
            "description": "Options for expanding relationships in graph results"
          },
          "resultTypes": {
            "default": "both",
            "description": "Types of results to include",
            "enum": [
              "graph",
              "text",
              "both"
            ],
            "type": "string"
          },
          "weights": {
            "allOf": [
              {
                "$ref": "#/components/schemas/UnifiedSearchWeightsDto"
              }
            ],
            "description": "Weights for combining graph and text scores"
          }
        },
        "required": [
          "query"
        ],
        "type": "object"
      },
      "UnifiedSearchResponseDto": {
        "properties": {
          "debug": {
            "allOf": [
              {
                "$ref": "#/components/schemas/UnifiedSearchDebugDto"
              }
            ],
            "description": "Debug information (only included with search:debug scope)"
          },
          "metadata": {
            "allOf": [
              {
                "$ref": "#/components/schemas/UnifiedSearchMetadataDto"
              }
            ],
            "description": "Query metadata and performance metrics"
          },
          "results": {
            "description": "Fused and ranked search results",
            "example": [
              {
                "canonical_id": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd",
                "fields": {
                  "title": "Adopt Hybrid Search"
                },
                "key": "dec-search-architecture",
                "object_id": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd",
                "object_type": "Decision",
                "rank": 1,
                "score": 0.92,
                "type": "graph"
              },
              {
                "id": "chunk-123",
                "score": 0.87,
                "snippet": "Hybrid search combines...",
                "type": "text"
              }
            ],
            "items": {
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "results",
          "metadata"
        ],
        "type": "object"
      },
      "UnifiedSearchWeightsDto": {
        "properties": {
          "graphWeight": {
            "default": 0.5,
            "description": "Weight for graph search results (0-1)",
            "example": 0.6,
            "maximum": 1,
            "minimum": 0,
            "type": "number"
          },
          "textWeight": {
            "default": 0.5,
            "description": "Weight for text search results (0-1)",
            "example": 0.4,
            "maximum": 1,
            "minimum": 0,
            "type": "number"
          }
        },
        "type": "object"
      },
      "UpdateEmbeddingPolicyDto": {
        "properties": {
          "enabled": {
            "description": "Whether embedding is enabled for this object type",
            "example": false,
            "type": "boolean"
          },
          "excludedLabels": {
            "description": "Labels that prevent embedding if present on the object",
            "example": [
              "archived"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "excludedStatuses": {
            "description": "Status values that prevent embedding",
            "example": [
              "draft"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "maxPropertySize": {
            "description": "Maximum property size in bytes. Objects with properties larger than this will not be embedded.",
            "example": 20000,
            "type": "number"
          },
          "relevantPaths": {
            "description": "JSON Pointer paths to relevant properties",
            "example": [
              "/properties/summary"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "requiredLabels": {
            "description": "Labels that must be present on the object for it to be embedded",
            "example": [
              "verified"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "UpdateExtractionJobDto": {
        "properties": {
          "created_objects": {
            "description": "Created object IDs",
            "example": [
              "550e8400-e29b-41d4-a716-446655440010"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "debug_info": {
            "description": "Debug information (LLM requests/responses, intermediate results)",
            "example": {
              "llm_requests": [],
              "llm_responses": [],
              "processing_steps": []
            },
            "type": "object"
          },
          "discovered_types": {
            "description": "Discovered type names",
            "example": [
              "Requirement",
              "Feature"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "error_details": {
            "description": "Detailed error information",
            "example": {
              "context": "...",
              "stack": "..."
            },
            "type": "object"
          },
          "error_message": {
            "description": "Error message (if failed)",
            "example": "Failed to parse document",
            "type": "string"
          },
          "failed_items": {
            "description": "Number of failed items",
            "example": 5,
            "minimum": 0,
            "type": "number"
          },
          "processed_items": {
            "description": "Number of processed items",
            "example": 50,
            "minimum": 0,
            "type": "number"
          },
          "status": {
            "description": "Job status",
            "enum": [
              "pending",
              "running",
              "completed",
              "requires_review",
              "failed",
              "cancelled"
            ],
            "example": "running",
            "type": "string"
          },
          "successful_items": {
            "description": "Number of successful items",
            "example": 45,
            "minimum": 0,
            "type": "number"
          },
          "total_items": {
            "description": "Total items to process",
            "example": 100,
            "minimum": 0,
            "type": "number"
          }
        },
        "type": "object"
      },
      "UpdateIntegrationDto": {
        "properties": {},
        "type": "object"
      },
      "UpdateObjectTypeDto": {
        "properties": {},
        "type": "object"
      },
      "UpdateProjectDto": {
        "properties": {
          "auto_extract_config": {
            "description": "Configuration for automatic extraction (enabled_types, min_confidence, duplicate_strategy, require_review, notify_on_complete, notification_channels)",
            "example": {
              "duplicate_strategy": "skip",
              "enabled_types": [
                "Requirement",
                "Decision",
                "Feature"
              ],
              "min_confidence": 0.7,
              "notification_channels": [
                "inbox"
              ],
              "notify_on_complete": true,
              "require_review": true
            },
            "type": "object"
          },
          "auto_extract_objects": {
            "description": "Enable/disable automatic extraction of objects from uploaded documents",
            "example": false,
            "type": "boolean"
          },
          "chat_prompt_template": {
            "description": "Custom chat prompt template. Supports placeholders: {{SYSTEM_PROMPT}}, {{MCP_CONTEXT}}, {{GRAPH_CONTEXT}}, {{MESSAGE}}, {{MARKDOWN_RULES}}",
            "example": "You are a helpful assistant specialized in {{DOMAIN}}.\n\n{{GRAPH_CONTEXT}}\n\n{{MESSAGE}}",
            "type": "string"
          },
          "kb_purpose": {
            "description": "Markdown description of the knowledge base purpose and domain. Used by auto-discovery to understand context.",
            "example": "This knowledge base contains documentation about...",
            "type": "string"
          },
          "name": {
            "description": "New project name (unique per organization)",
            "example": "Updated Project Name",
            "type": "string"
          }
        },
        "type": "object"
      },
      "UpdateTagDto": {
        "properties": {
          "description": {
            "description": "Updated tag description",
            "example": "Updated stable release",
            "type": "string"
          }
        },
        "type": "object"
      },
      "UpdateTemplatePackAssignmentDto": {
        "properties": {},
        "type": "object"
      },
      "UpdateUserProfileDto": {
        "properties": {},
        "type": "object"
      },
      "UserProfileDto": {
        "properties": {
          "avatarObjectKey": {
            "description": "Object storage key for avatar (if stored internally)",
            "type": "object"
          },
          "displayName": {
            "description": "Display name fallback (explicit) or derived (first + last)",
            "type": "object"
          },
          "firstName": {
            "type": "object"
          },
          "id": {
            "description": "Internal UUID user id (primary key)",
            "format": "uuid",
            "type": "string"
          },
          "lastName": {
            "type": "object"
          },
          "phoneE164": {
            "description": "E.164 formatted phone number, leading + and digits",
            "type": "object"
          },
          "subjectId": {
            "description": "Canonical internal user id (subject id, from identity provider) - DEPRECATED: use id",
            "format": "uuid",
            "type": "string"
          },
          "zitadelUserId": {
            "description": "Zitadel user ID (external auth provider)",
            "type": "object"
          }
        },
        "required": [
          "id",
          "subjectId"
        ],
        "type": "object"
      },
      "VectorSearchDto": {
        "properties": {
          "branchId": {
            "description": "Filter by branch id",
            "format": "uuid",
            "type": "string"
          },
          "keyPrefix": {
            "description": "Optional key prefix match (ILIKE prefix%)",
            "type": "string"
          },
          "labelsAll": {
            "description": "Require all labels (array contains)  matches rows whose labels array contains every listed label",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "labelsAny": {
            "description": "Require any label (overlap)  matches rows whose labels array overlaps any listed label",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "limit": {
            "description": "Max results (default 10, max 100)",
            "maximum": 100,
            "minimum": 1,
            "type": "number"
          },
          "maxDistance": {
            "description": "Alias for minScore (preferred). Same constraints (0  d  2). If both provided, maxDistance wins.",
            "maximum": 2,
            "minimum": 0,
            "type": "number"
          },
          "minScore": {
            "description": "Optional max distance (cosine) filter (0  d  2; typical cosine range).",
            "maximum": 2,
            "minimum": 0,
            "type": "number"
          },
          "orgId": {
            "description": "Filter by org id",
            "format": "uuid",
            "type": "string"
          },
          "projectId": {
            "description": "Filter by project id",
            "format": "uuid",
            "type": "string"
          },
          "type": {
            "description": "Filter by object type (exact match)",
            "type": "string"
          },
          "vector": {
            "description": "Query vector numbers",
            "items": {
              "type": "number"
            },
            "type": "array"
          }
        },
        "required": [
          "vector"
        ],
        "type": "object"
      },
      "VersionedObjectDto": {
        "properties": {
          "canonical_id": {
            "type": "string"
          },
          "created_at": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "key": {
            "nullable": true,
            "type": "object"
          },
          "labels": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "org_id": {
            "nullable": true,
            "type": "object"
          },
          "project_id": {
            "nullable": true,
            "type": "object"
          },
          "properties": {
            "type": "object"
          },
          "supersedes_id": {
            "nullable": true,
            "type": "object"
          },
          "type": {
            "type": "string"
          },
          "version": {
            "type": "number"
          }
        },
        "required": [
          "id",
          "org_id",
          "project_id",
          "canonical_id",
          "supersedes_id",
          "version",
          "type",
          "key",
          "properties",
          "labels",
          "created_at"
        ],
        "type": "object"
      },
      "VersionedRelationshipDto": {
        "properties": {
          "canonical_id": {
            "type": "string"
          },
          "created_at": {
            "type": "string"
          },
          "dst_id": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "properties": {
            "type": "object"
          },
          "src_id": {
            "type": "string"
          },
          "supersedes_id": {
            "nullable": true,
            "type": "object"
          },
          "type": {
            "type": "string"
          },
          "valid_from": {
            "nullable": true,
            "type": "object"
          },
          "valid_to": {
            "nullable": true,
            "type": "object"
          },
          "version": {
            "type": "number"
          },
          "weight": {
            "nullable": true,
            "type": "object"
          }
        },
        "required": [
          "id",
          "canonical_id",
          "supersedes_id",
          "version",
          "type",
          "src_id",
          "dst_id",
          "properties",
          "created_at",
          "weight",
          "valid_from",
          "valid_to"
        ],
        "type": "object"
      }
    },
    "securitySchemes": {
      "bearer": {
        "bearerFormat": "JWT",
        "scheme": "bearer",
        "type": "http"
      }
    }
  },
  "info": {
    "contact": {},
    "description": "Generated OpenAPI spec (code-first). All protected operations include x-required-scopes and 403 examples with missing_scopes.",
    "title": "Spec Server API",
    "version": "0.2.0"
  },
  "openapi": "3.0.0",
  "paths": {
    "/admin/extraction-jobs": {
      "post": {
        "description": "Creates a new extraction job with pending status. Phase 2 will enqueue to worker queue.",
        "operationId": "ExtractionJobController_createJob",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateExtractionJobDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractionJobDto"
                }
              }
            },
            "description": "Job created successfully"
          },
          "400": {
            "description": "Invalid request data"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create extraction job",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:write"
        ]
      }
    },
    "/admin/extraction-jobs/_debug/available-models": {
      "get": {
        "description": "Query Google Gemini API to list all available models with their capabilities",
        "operationId": "ExtractionJobController_listAvailableModels",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "available_models": {
                      "items": {
                        "properties": {
                          "description": {
                            "type": "string"
                          },
                          "displayName": {
                            "example": "Gemini 2.0 Flash",
                            "type": "string"
                          },
                          "inputTokenLimit": {
                            "type": "number"
                          },
                          "name": {
                            "example": "models/gemini-2.0-flash-exp",
                            "type": "string"
                          },
                          "outputTokenLimit": {
                            "type": "number"
                          },
                          "supportedGenerationMethods": {
                            "items": {
                              "type": "string"
                            },
                            "type": "array"
                          }
                        },
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "current_model": {
                      "example": "gemini-1.5-flash-latest",
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "description": "Models retrieved successfully"
          },
          "500": {
            "description": "Failed to fetch models from API"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List available Gemini models",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:read"
        ]
      }
    },
    "/admin/extraction-jobs/projects/{projectId}": {
      "get": {
        "description": "List extraction jobs for a project with optional filters and pagination",
        "operationId": "ExtractionJobController_listJobs",
        "parameters": [
          {
            "description": "Project ID",
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Filter by status",
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "enum": [
                "pending",
                "running",
                "completed",
                "requires_review",
                "failed",
                "cancelled"
              ],
              "type": "string"
            }
          },
          {
            "description": "Filter by source type",
            "in": "query",
            "name": "source_type",
            "required": false,
            "schema": {
              "enum": [
                "document",
                "api",
                "manual",
                "bulk_import"
              ],
              "type": "string"
            }
          },
          {
            "description": "Filter by source ID",
            "in": "query",
            "name": "source_id",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Page number (1-indexed)",
            "in": "query",
            "name": "page",
            "required": false,
            "schema": {
              "default": 1,
              "minimum": 1,
              "type": "number"
            }
          },
          {
            "description": "Items per page",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 20,
              "minimum": 1,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractionJobListDto"
                }
              }
            },
            "description": "Jobs retrieved successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List extraction jobs",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:read"
        ]
      }
    },
    "/admin/extraction-jobs/projects/{projectId}/bulk-cancel": {
      "post": {
        "description": "Bulk cancel all pending and running extraction jobs for a project",
        "operationId": "ExtractionJobController_bulkCancelJobs",
        "parameters": [
          {
            "description": "Project ID",
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "cancelled": {
                      "example": 5,
                      "type": "number"
                    },
                    "message": {
                      "example": "Cancelled 5 jobs",
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "description": "Jobs cancelled successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Cancel all pending/running jobs",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:write"
        ]
      }
    },
    "/admin/extraction-jobs/projects/{projectId}/bulk-delete": {
      "delete": {
        "description": "Bulk delete all extraction jobs that are completed, failed, or cancelled",
        "operationId": "ExtractionJobController_bulkDeleteJobs",
        "parameters": [
          {
            "description": "Project ID",
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "deleted": {
                      "example": 10,
                      "type": "number"
                    },
                    "message": {
                      "example": "Deleted 10 jobs",
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "description": "Jobs deleted successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete all completed/failed/cancelled jobs",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:write"
        ]
      }
    },
    "/admin/extraction-jobs/projects/{projectId}/bulk-retry": {
      "post": {
        "description": "Bulk retry all extraction jobs with failed status",
        "operationId": "ExtractionJobController_bulkRetryJobs",
        "parameters": [
          {
            "description": "Project ID",
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "message": {
                      "example": "Retrying 3 jobs",
                      "type": "string"
                    },
                    "retried": {
                      "example": 3,
                      "type": "number"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "description": "Jobs reset for retry successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Retry all failed jobs",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:write"
        ]
      }
    },
    "/admin/extraction-jobs/projects/{projectId}/statistics": {
      "get": {
        "description": "Get aggregated statistics for extraction jobs in a project",
        "operationId": "ExtractionJobController_getStatistics",
        "parameters": [
          {
            "description": "Project ID",
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "avg_duration_ms": {
                      "example": 45000,
                      "nullable": true,
                      "type": "number"
                    },
                    "by_source_type": {
                      "example": {
                        "api": 30,
                        "document": 100,
                        "manual": 20
                      },
                      "type": "object"
                    },
                    "by_status": {
                      "example": {
                        "cancelled": 3,
                        "completed": 120,
                        "failed": 20,
                        "pending": 5,
                        "running": 2
                      },
                      "type": "object"
                    },
                    "total": {
                      "example": 150,
                      "type": "number"
                    },
                    "total_objects_created": {
                      "example": 5230,
                      "type": "number"
                    },
                    "total_types_discovered": {
                      "example": 15,
                      "type": "number"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "description": "Statistics retrieved successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get job statistics",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:read"
        ]
      }
    },
    "/admin/extraction-jobs/{jobId}": {
      "delete": {
        "description": "Delete a completed, failed, or cancelled extraction job",
        "operationId": "ExtractionJobController_deleteJob",
        "parameters": [
          {
            "description": "Job ID",
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Job deleted successfully"
          },
          "400": {
            "description": "Cannot delete running/pending job"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Job not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete extraction job",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:write"
        ]
      },
      "get": {
        "description": "Get detailed information about a specific extraction job",
        "operationId": "ExtractionJobController_getJob",
        "parameters": [
          {
            "description": "Job ID",
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractionJobDto"
                }
              }
            },
            "description": "Job retrieved successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Job not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get extraction job",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:read"
        ]
      },
      "patch": {
        "description": "Update job status, progress, results, or errors",
        "operationId": "ExtractionJobController_updateJob",
        "parameters": [
          {
            "description": "Job ID",
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateExtractionJobDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractionJobDto"
                }
              }
            },
            "description": "Job updated successfully"
          },
          "400": {
            "description": "Invalid update data"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Job not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Update extraction job",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:write"
        ]
      }
    },
    "/admin/extraction-jobs/{jobId}/cancel": {
      "post": {
        "description": "Cancel a pending or running extraction job",
        "operationId": "ExtractionJobController_cancelJob",
        "parameters": [
          {
            "description": "Job ID",
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractionJobDto"
                }
              }
            },
            "description": "Job cancelled successfully"
          },
          "400": {
            "description": "Job cannot be cancelled (already completed/failed)"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Job not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Cancel extraction job",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:write"
        ]
      }
    },
    "/admin/extraction-jobs/{jobId}/logs": {
      "get": {
        "description": "Retrieve step-by-step logs for an extraction job including LLM interactions, errors, and performance metrics",
        "operationId": "ExtractionJobController_getExtractionLogs",
        "parameters": [
          {
            "description": "Extraction job UUID",
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "logs": {
                      "items": {
                        "properties": {
                          "duration_ms": {
                            "nullable": true,
                            "type": "number"
                          },
                          "error_message": {
                            "nullable": true,
                            "type": "string"
                          },
                          "error_stack": {
                            "nullable": true,
                            "type": "string"
                          },
                          "id": {
                            "format": "uuid",
                            "type": "string"
                          },
                          "input_data": {
                            "nullable": true,
                            "type": "object"
                          },
                          "logged_at": {
                            "format": "date-time",
                            "type": "string"
                          },
                          "metadata": {
                            "nullable": true,
                            "type": "object"
                          },
                          "operation_name": {
                            "nullable": true,
                            "type": "string"
                          },
                          "operation_type": {
                            "enum": [
                              "llm_call",
                              "chunk_processing",
                              "object_creation",
                              "relationship_creation",
                              "suggestion_creation",
                              "validation",
                              "error"
                            ],
                            "type": "string"
                          },
                          "output_data": {
                            "nullable": true,
                            "type": "object"
                          },
                          "status": {
                            "enum": [
                              "success",
                              "error",
                              "warning"
                            ],
                            "type": "string"
                          },
                          "step_index": {
                            "type": "number"
                          },
                          "tokens_used": {
                            "nullable": true,
                            "type": "number"
                          }
                        },
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "summary": {
                      "properties": {
                        "errorSteps": {
                          "type": "number"
                        },
                        "operationCounts": {
                          "type": "object"
                        },
                        "successSteps": {
                          "type": "number"
                        },
                        "totalDurationMs": {
                          "type": "number"
                        },
                        "totalSteps": {
                          "type": "number"
                        },
                        "totalTokensUsed": {
                          "type": "number"
                        },
                        "warningSteps": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "description": "Logs retrieved successfully"
          },
          "400": {
            "description": "Invalid job ID format"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "extraction:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Access denied to this extraction job"
          },
          "404": {
            "description": "Extraction job not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get detailed extraction logs",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:read"
        ]
      }
    },
    "/admin/extraction-jobs/{jobId}/retry": {
      "post": {
        "description": "Resets a job stuck in running status or failed status back to pending for retry. Useful after server restarts that leave jobs orphaned.",
        "operationId": "ExtractionJobController_retryJob",
        "parameters": [
          {
            "description": "Job ID",
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractionJobDto"
                }
              }
            },
            "description": "Job reset to pending for retry"
          },
          "400": {
            "description": "Cannot retry job with current status (only running/failed jobs)"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Job not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Retry a stuck or failed extraction job",
        "tags": [
          "Extraction Jobs"
        ],
        "x-required-scopes": [
          "extraction:write"
        ]
      }
    },
    "/auth/me": {
      "get": {
        "operationId": "AuthController_me",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileDto"
                }
              }
            },
            "description": "Return current authenticated user"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Unauthorized"
                    }
                  }
                }
              }
            },
            "description": "Missing or invalid bearer token"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "org:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Insufficient scope"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Auth"
        ],
        "x-required-scopes": [
          "org:read"
        ]
      }
    },
    "/auth/test-passport": {
      "get": {
        "operationId": "AuthController_testPassport",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Test passport-zitadel introspection"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Missing or invalid bearer token"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "org:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Auth"
        ],
        "x-required-scopes": [
          "org:read"
        ]
      }
    },
    "/chat-ui": {
      "post": {
        "operationId": "ChatUiController_chat",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequestDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "text/event-stream": {
                "schema": {
                  "description": "Server-sent events stream",
                  "type": "string"
                }
              }
            },
            "description": "Streaming chat response"
          }
        },
        "tags": [
          "Chat UI"
        ]
      }
    },
    "/chat-ui/conversations": {
      "get": {
        "operationId": "ChatUiController_getConversations",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List user conversations"
          }
        },
        "tags": [
          "Chat UI"
        ]
      }
    },
    "/chat-ui/conversations/{id}": {
      "delete": {
        "operationId": "ChatUiController_deleteConversation",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Delete conversation"
          }
        },
        "tags": [
          "Chat UI"
        ]
      },
      "get": {
        "operationId": "ChatUiController_getConversation",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get conversation details"
          }
        },
        "tags": [
          "Chat UI"
        ]
      },
      "patch": {
        "operationId": "ChatUiController_updateConversation",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Update conversation title"
          }
        },
        "tags": [
          "Chat UI"
        ]
      }
    },
    "/chat/conversations": {
      "get": {
        "operationId": "ChatController_listConversations",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": [
                    {
                      "id": "11111111-1111-4111-8111-111111111111",
                      "is_private": false,
                      "title": "2025-01-01  Hello world"
                    }
                  ]
                }
              }
            },
            "description": "List chat conversations"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "chat:use"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Chat"
        ],
        "x-required-scopes": [
          "chat:use"
        ]
      },
      "post": {
        "operationId": "ChatController_createConversation",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "conversationId": "11111111-1111-4111-8111-111111111111",
                    "id": "11111111-1111-4111-8111-111111111111",
                    "title": "2025-01-01  New Conversation"
                  }
                }
              }
            },
            "description": "Create a new conversation (201)"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "message required"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Chat"
        ],
        "x-required-scopes": [
          "chat:use"
        ]
      }
    },
    "/chat/stream": {
      "post": {
        "operationId": "ChatController_streamPost",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequestDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "text/event-stream": {
                "examples": {
                  "done": {
                    "value": "data: {\"type\":\"done\"}\n\n"
                  },
                  "error": {
                    "value": "data: {\"type\":\"error\",\"error\":\"model key missing\"}\n\n"
                  },
                  "mcp_completed": {
                    "value": "data: {\"type\":\"mcp_tool\",\"tool\":\"schema_version\",\"status\":\"completed\",\"result\":{\"version\":\"1.0.0\"}}\n\n"
                  },
                  "mcp_error": {
                    "value": "data: {\"type\":\"mcp_tool\",\"tool\":\"schema_version\",\"status\":\"error\",\"error\":\"MCP server unavailable\"}\n\n"
                  },
                  "mcp_started": {
                    "value": "data: {\"type\":\"mcp_tool\",\"tool\":\"schema_version\",\"status\":\"started\"}\n\n"
                  },
                  "meta": {
                    "value": "data: {\"type\":\"meta\",\"conversationId\":\"11111111-1111-4111-8111-111111111111\",\"citations\":[]}\n\n"
                  },
                  "token": {
                    "value": "data: {\"type\":\"token\",\"token\":\"Hello\"}\n\n"
                  }
                },
                "schema": {
                  "description": "Union of possible chat stream events (serialized per line as SSE frame).",
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/ChatStreamMetaEvent"
                    },
                    {
                      "$ref": "#/components/schemas/ChatStreamTokenEvent"
                    },
                    {
                      "$ref": "#/components/schemas/ChatStreamMcpToolEvent"
                    },
                    {
                      "$ref": "#/components/schemas/ChatStreamErrorEvent"
                    },
                    {
                      "$ref": "#/components/schemas/ChatStreamDoneEvent"
                    }
                  ]
                }
              }
            },
            "description": "Chat streaming endpoint (SSE). Each line is an SSE data frame beginning with \"data: \", followed by one of the JSON event shapes."
          },
          "400": {
            "content": {
              "text/event-stream": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "message required"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              },
              "text/event-stream": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "text/event-stream": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "chat:use"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "text/event-stream": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Chat"
        ],
        "x-required-scopes": [
          "chat:use"
        ]
      }
    },
    "/chat/{id}": {
      "delete": {
        "operationId": "ChatController_delete",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "id": "c1",
                    "ok": true
                  }
                }
              }
            },
            "description": "Delete conversation"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "not-found",
                      "message": "Conversation not found"
                    }
                  }
                }
              }
            },
            "description": "Conversation not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Chat"
        ],
        "x-required-scopes": [
          "chat:admin"
        ]
      },
      "get": {
        "operationId": "ChatController_getConversation",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get a conversation with messages"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "chat:use"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "not-found",
                      "message": "Conversation not found"
                    }
                  }
                }
              }
            },
            "description": "Conversation not found"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Chat"
        ],
        "x-required-scopes": [
          "chat:use"
        ]
      },
      "patch": {
        "operationId": "ChatController_rename",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "id": "c1",
                    "ok": true,
                    "title": "New Title"
                  }
                }
              }
            },
            "description": "Rename conversation"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "title required"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "not-found",
                      "message": "Conversation not found"
                    }
                  }
                }
              }
            },
            "description": "Conversation not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Chat"
        ],
        "x-required-scopes": [
          "chat:admin"
        ]
      }
    },
    "/chat/{id}/stream": {
      "get": {
        "operationId": "ChatController_streamGet",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "text/event-stream": {
                "examples": {
                  "citations": {
                    "value": "data: {\"citations\":[{\"documentId\":\"11111111-1111-4111-8111-111111111111\"}]}\n\n"
                  },
                  "done": {
                    "value": "data: {\"done\":true,\"message\":\"[DONE]\"}\n\n"
                  },
                  "error": {
                    "value": "data: {\"error\":{\"code\":\"upstream-failed\",\"message\":\"Simulated upstream model failure\"},\"done\":true}\n\n"
                  },
                  "meta": {
                    "value": "data: {\"meta\":{\"chat_model_enabled\":true,\"google_key\":true}}\n\n"
                  },
                  "summary": {
                    "value": "data: {\"summary\":true,\"token_count\":5,\"citations_count\":2}\n\n"
                  },
                  "token": {
                    "value": "data: {\"message\":\"token-0\",\"index\":0,\"streaming\":true}\n\n"
                  }
                },
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/GetChatStreamMetaFrame"
                    },
                    {
                      "$ref": "#/components/schemas/GetChatStreamTokenFrame"
                    },
                    {
                      "$ref": "#/components/schemas/GetChatStreamCitationsFrame"
                    },
                    {
                      "$ref": "#/components/schemas/GetChatStreamSummaryFrame"
                    },
                    {
                      "$ref": "#/components/schemas/GetChatStreamDoneFrame"
                    },
                    {
                      "$ref": "#/components/schemas/GetChatStreamErrorFrame"
                    }
                  ]
                }
              }
            },
            "description": "Chat streaming endpoint (SSE). Emits a sequence of JSON frames each prefixed by \"data: \"."
          },
          "400": {
            "content": {
              "text/event-stream": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "x-project-id header required"
                    }
                  }
                }
              }
            },
            "description": "Missing project header"
          },
          "404": {
            "content": {
              "text/event-stream": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "not-found",
                      "message": "Conversation not found"
                    }
                  }
                }
              }
            },
            "description": "Conversation not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Chat"
        ],
        "x-required-scopes": [
          "chat:use"
        ]
      }
    },
    "/chunks": {
      "get": {
        "operationId": "ChunksController_list",
        "parameters": [
          {
            "description": "Filter by document UUID",
            "in": "query",
            "name": "documentId",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ChunkDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List chunks"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid filter"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "chunks:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Chunks"
        ],
        "x-required-scopes": [
          "chunks:read"
        ]
      }
    },
    "/discovery-jobs/projects/{projectId}": {
      "get": {
        "operationId": "DiscoveryJobController_listJobs",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "discovery:read"
        ]
      }
    },
    "/discovery-jobs/projects/{projectId}/start": {
      "post": {
        "operationId": "DiscoveryJobController_startDiscovery",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "discovery:write"
        ]
      }
    },
    "/discovery-jobs/{jobId}": {
      "delete": {
        "operationId": "DiscoveryJobController_cancelJob",
        "parameters": [
          {
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "discovery:write"
        ]
      },
      "get": {
        "operationId": "DiscoveryJobController_getJobStatus",
        "parameters": [
          {
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "discovery:read"
        ]
      }
    },
    "/discovery-jobs/{jobId}/finalize": {
      "post": {
        "operationId": "DiscoveryJobController_finalizeDiscovery",
        "parameters": [
          {
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "discovery:write"
        ]
      }
    },
    "/documents": {
      "delete": {
        "operationId": "DocumentsController_bulkDelete",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkDeleteRequestDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkDeletionSummaryDto"
                }
              }
            },
            "description": "Bulk delete documents with cascade"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "documents:delete"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Documents"
        ],
        "x-required-scopes": [
          "documents:delete"
        ]
      },
      "get": {
        "operationId": "DocumentsController_list",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 100,
              "maximum": 500,
              "minimum": 1,
              "type": "number"
            }
          },
          {
            "in": "query",
            "name": "cursor",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DocumentDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List ingested documents",
            "headers": {
              "x-next-cursor": {
                "description": "Base64 cursor for next page",
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid filter"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "documents:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Documents"
        ],
        "x-required-scopes": [
          "documents:read"
        ]
      },
      "post": {
        "operationId": "DocumentsController_create",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "content": {
                    "type": "string"
                  },
                  "filename": {
                    "type": "string"
                  },
                  "projectId": {
                    "format": "uuid",
                    "type": "string"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentDto"
                }
              }
            },
            "description": "Created document"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "documents:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Documents"
        ],
        "x-required-scopes": [
          "documents:write"
        ]
      }
    },
    "/documents/deletion-impact": {
      "post": {
        "operationId": "DocumentsController_getBulkDeletionImpact",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkDeleteRequestDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkDeletionImpactDto"
                }
              }
            },
            "description": "Get bulk deletion impact analysis"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "documents:delete"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Documents"
        ],
        "x-required-scopes": [
          "documents:delete"
        ]
      }
    },
    "/documents/{id}": {
      "delete": {
        "operationId": "DocumentsController_delete",
        "parameters": [
          {
            "description": "Document UUID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletionSummaryDto"
                }
              }
            },
            "description": "Delete a document with cascade"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "documents:delete"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Documents"
        ],
        "x-required-scopes": [
          "documents:delete"
        ]
      },
      "get": {
        "operationId": "DocumentsController_get",
        "parameters": [
          {
            "description": "Document UUID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentDto"
                }
              }
            },
            "description": "Get a document"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid id"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "documents:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Documents"
        ],
        "x-required-scopes": [
          "documents:read"
        ]
      }
    },
    "/documents/{id}/deletion-impact": {
      "get": {
        "operationId": "DocumentsController_getDeletionImpact",
        "parameters": [
          {
            "description": "Document UUID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletionImpactDto"
                }
              }
            },
            "description": "Get deletion impact analysis for a document"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "documents:delete"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Documents"
        ],
        "x-required-scopes": [
          "documents:delete"
        ]
      }
    },
    "/graph/branches": {
      "get": {
        "operationId": "BranchController_list",
        "parameters": [
          {
            "in": "query",
            "name": "project_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        }
      },
      "post": {
        "operationId": "BranchController_create",
        "parameters": [],
        "responses": {
          "201": {
            "description": ""
          }
        }
      }
    },
    "/graph/branches/{targetBranchId}/merge": {
      "post": {
        "description": "Enumerate divergent canonical graph objects between source and target branches. Default is dry-run (no mutations). If `execute=true` and there are no conflicts: Added objects are cloned into target; Fast-forward objects are patched by adding only new properties (superset heuristic). Conflicts block apply. Classification statuses: added, unchanged, fast_forward, conflict.",
        "operationId": "GraphObjectsController_mergeDryRun",
        "parameters": [
          {
            "in": "path",
            "name": "targetBranchId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BranchMergeRequestDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BranchMergeSummaryDto"
                }
              }
            },
            "description": "Merge summary including classification counts, per-object statuses, and optional applied/applied_objects when executed"
          },
          "400": {
            "description": "Missing sourceBranchId or validation error"
          },
          "404": {
            "description": "Branch not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Branch merge (dry-run or execute)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/embedding-policies": {
      "get": {
        "operationId": "GraphObjectsController_listEmbeddingPolicies",
        "parameters": [
          {
            "description": "Filter policies by project ID",
            "in": "query",
            "name": "project_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Filter policies by object type",
            "in": "query",
            "name": "object_type",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/EmbeddingPolicyResponseDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List of policies"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List all embedding policies for a project",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      },
      "post": {
        "operationId": "GraphObjectsController_createEmbeddingPolicy",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateEmbeddingPolicyDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmbeddingPolicyResponseDto"
                }
              }
            },
            "description": "Policy created"
          },
          "400": {
            "description": "Validation error or duplicate policy"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create an embedding policy for a project and object type",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/embedding-policies/{id}": {
      "delete": {
        "operationId": "GraphObjectsController_deleteEmbeddingPolicy",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Project ID for authorization",
            "in": "query",
            "name": "project_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Policy deleted"
          },
          "404": {
            "description": "Policy not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete an embedding policy",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      },
      "get": {
        "operationId": "GraphObjectsController_getEmbeddingPolicy",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Project ID for authorization",
            "in": "query",
            "name": "project_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmbeddingPolicyResponseDto"
                }
              }
            },
            "description": "Policy details"
          },
          "404": {
            "description": "Policy not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get a specific embedding policy by ID",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      },
      "patch": {
        "operationId": "GraphObjectsController_updateEmbeddingPolicy",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Project ID for authorization",
            "in": "query",
            "name": "project_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateEmbeddingPolicyDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmbeddingPolicyResponseDto"
                }
              }
            },
            "description": "Policy updated"
          },
          "400": {
            "description": "Validation error"
          },
          "404": {
            "description": "Policy not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Update an embedding policy",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/expand": {
      "post": {
        "operationId": "GraphObjectsController_expand",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GraphExpandDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Expand graph (single-pass bounded traversal with projection & edge property option)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/objects": {
      "post": {
        "operationId": "GraphObjectsController_create",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGraphObjectDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Validation error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create a graph object (initial version)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/objects/bulk-update-status": {
      "post": {
        "description": "Updates the status field for multiple objects in a single request. Creates a new version for each object. Returns summary of successes and failures.",
        "operationId": "GraphObjectsController_bulkUpdateStatus",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkUpdateStatusDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "failed": {
                      "description": "Number of failed updates",
                      "type": "number"
                    },
                    "results": {
                      "items": {
                        "properties": {
                          "error": {
                            "type": "string"
                          },
                          "id": {
                            "type": "string"
                          },
                          "success": {
                            "type": "boolean"
                          }
                        },
                        "type": "object"
                      },
                      "type": "array"
                    },
                    "success": {
                      "description": "Number of successfully updated objects",
                      "type": "number"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bulk update completed"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Update status for multiple objects",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/objects/fts": {
      "get": {
        "description": "Websearch syntax over inline-populated tsvector (type, key, properties JSON). Returns newest heads ranked by ts_rank. Supports optional type, label, branch_id filters. Limit max 100.",
        "operationId": "GraphObjectsController_ftsSearch",
        "parameters": [
          {
            "description": "Search query (websearch syntax)",
            "in": "query",
            "name": "q",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "type",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "label",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "branch_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Full-text search graph objects",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/objects/search": {
      "get": {
        "description": "Supports pagination via created_at cursor. Optional order param (asc|desc) controls chronological direction (default asc). Desc returns newest first; cursor always set to last item created_at in current page.",
        "operationId": "GraphObjectsController_searchObjects",
        "parameters": [
          {
            "in": "query",
            "name": "type",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "key",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "label",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "cursor",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Chronological direction (asc=oldestnewest, desc=newestoldest). Default asc.",
            "in": "query",
            "name": "order",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          },
          {
            "description": "Filter objects by branch ID. Use \"null\" to search main branch (branch_id IS NULL). Omit to search all branches.",
            "in": "query",
            "name": "branch_id",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Search graph objects (basic filters)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/objects/tags": {
      "get": {
        "operationId": "GraphObjectsController_getTags",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List of distinct tags"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get all distinct tags from graph objects",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/objects/vector-search": {
      "post": {
        "description": "Returns nearest neighbors (cosine distance) for provided query vector over embedding_vec. Threshold: use maxDistance (preferred) or legacy minScore (acts as maximum distance). When both are supplied, maxDistance takes precedence.",
        "operationId": "GraphObjectsController_vectorSearch",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VectorSearchDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Vector similarity search",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/objects/{id}": {
      "delete": {
        "operationId": "GraphObjectsController_deleteObject",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Soft delete (tombstone) an object (creates new version with deleted_at)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      },
      "get": {
        "operationId": "GraphObjectsController_get",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          },
          "404": {
            "description": "Not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get latest version of a graph object",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      },
      "patch": {
        "operationId": "GraphObjectsController_patch",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PatchGraphObjectDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Version created"
          },
          "400": {
            "description": "No effective change"
          },
          "404": {
            "description": "Not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Patch (create new version) of a graph object",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/objects/{id}/edges": {
      "get": {
        "operationId": "GraphObjectsController_edges",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "direction",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List relationships adjacent to an object",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/objects/{id}/history": {
      "get": {
        "operationId": "GraphObjectsController_history",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "cursor",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectHistoryResponseDto"
                }
              }
            },
            "description": ""
          },
          "404": {
            "description": "Not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List version history for a graph object",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/objects/{id}/restore": {
      "post": {
        "operationId": "GraphObjectsController_restoreObject",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Restored (new version created)"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Restore a soft-deleted object (creates new version clearing deleted_at)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/objects/{id}/similar": {
      "get": {
        "description": "Supports same filters as POST /graph/objects/vector-search (type, orgId, projectId, branchId, keyPrefix, labelsAll, labelsAny, maxDistance|minScore, limit). maxDistance preferred; if both provided, maxDistance overrides minScore.",
        "operationId": "GraphObjectsController_similar",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Limit number of neighbors (1-100); default 10",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "description": "Maximum cosine distance (lower is more similar). 0  d  2. Rows with distance > threshold filtered out.",
            "in": "query",
            "name": "minScore",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "description": "Alias for minScore (preferred name). 0  d  2. If both provided, maxDistance wins.",
            "in": "query",
            "name": "maxDistance",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "description": "Filter by object type",
            "in": "query",
            "name": "type",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Filter by org id (UUID)",
            "in": "query",
            "name": "orgId",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Filter by project id (UUID)",
            "in": "query",
            "name": "projectId",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Filter by branch id (UUID)",
            "in": "query",
            "name": "branchId",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Filter by key prefix (ILIKE)",
            "in": "query",
            "name": "keyPrefix",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Require all labels to be present on object",
            "in": "query",
            "name": "labelsAll",
            "required": false,
            "schema": {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          {
            "description": "Require any of the labels to overlap",
            "in": "query",
            "name": "labelsAny",
            "required": false,
            "schema": {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Find objects similar to given object id using stored embedding_vec",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/relationships": {
      "post": {
        "operationId": "GraphObjectsController_createRel",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGraphRelationshipDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create a relationship (initial version) or new version if properties changed",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/relationships/search": {
      "get": {
        "description": "Supports pagination via created_at cursor. Optional order param (asc|desc) for chronological direction (default asc).",
        "operationId": "GraphObjectsController_searchRels",
        "parameters": [
          {
            "in": "query",
            "name": "type",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "src_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "dst_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "cursor",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Chronological direction (asc=oldestnewest, desc=newestoldest). Default asc.",
            "in": "query",
            "name": "order",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Search relationships (basic filters)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/relationships/{id}": {
      "delete": {
        "operationId": "GraphObjectsController_deleteRel",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Soft delete a relationship (tombstone version)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      },
      "get": {
        "operationId": "GraphObjectsController_getRel",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get relationship by id",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      },
      "patch": {
        "operationId": "GraphObjectsController_patchRel",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PatchGraphRelationshipDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Patch (create new version) of a relationship (only head version allowed)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/relationships/{id}/history": {
      "get": {
        "operationId": "GraphObjectsController_historyRel",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "cursor",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RelationshipHistoryResponseDto"
                }
              }
            },
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List version history for a relationship",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/relationships/{id}/restore": {
      "post": {
        "operationId": "GraphObjectsController_restoreRel",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Restored (new version created)"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Restore a soft-deleted relationship",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/graph/search": {
      "post": {
        "operationId": "GraphSearchController_search",
        "parameters": [
          {
            "in": "query",
            "name": "debug",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GraphSearchRequestDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GraphSearchResponseDto"
                }
              }
            },
            "description": "Graph hybrid search results (prototype)"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "graph:search:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Missing required scope (e.g., debug scope)"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:search:read"
        ]
      }
    },
    "/graph/search-with-neighbors": {
      "post": {
        "description": "\nPerforms semantic search over graph objects and optionally retrieves their neighbors.\n\n**Search Strategy:**\n- Uses full-text search (FTS) to find primary results matching the query\n- Optionally expands each result to include:\n  1. Semantically similar objects (via vector embeddings)\n  2. Directly connected objects (via relationships)\n\n**Use Cases:**\n- Chat context retrieval (similar to document citations)\n- Discovery features (\"related objects\")\n- Rich detail views with context\n\n**Neighbor Sources:**\n- **Semantic**: Objects with similar embedding vectors (via searchSimilar)\n- **Relational**: Objects connected via graph relationships (depends_on, implements, etc.)\n\n**Example:**\n```json\n{\n  \"query\": \"authentication patterns\",\n  \"limit\": 5,\n  \"includeNeighbors\": true,\n  \"maxNeighbors\": 3,\n  \"maxDistance\": 0.5\n}\n```\n        ",
        "operationId": "GraphObjectsController_searchWithNeighbors",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchObjectsWithNeighborsDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "neighbors": {
                      "additionalProperties": {
                        "items": {
                          "type": "object"
                        },
                        "type": "array"
                      },
                      "description": "Map of object ID to array of neighbor objects",
                      "type": "object"
                    },
                    "primaryResults": {
                      "description": "Objects matching the search query",
                      "items": {
                        "type": "object"
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "description": "Search results with optional neighbors"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Search graph objects with optional neighbor expansion",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/graph/traverse": {
      "post": {
        "operationId": "GraphObjectsController_traverse",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TraverseGraphDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Traverse the graph from one or more root object ids (bounded BFS)",
        "tags": [
          "Graph"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/health": {
      "get": {
        "operationId": "HealthController_get",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "db": "up",
                    "embeddings": "enabled",
                    "model": "text-embedding-004",
                    "ok": true,
                    "rls_policies_ok": true,
                    "rls_policy_count": 8,
                    "rls_policy_hash": "policies:123:1a2b"
                  }
                }
              }
            },
            "description": "Health probe"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "Health"
        ]
      }
    },
    "/ingest/upload": {
      "post": {
        "operationId": "IngestionController_upload",
        "parameters": [],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/IngestionUploadDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "alreadyExists": false,
                    "chunks": 12,
                    "documentId": "11111111-2222-3333-4444-555555555555"
                  }
                }
              }
            },
            "description": "Upload a file for ingestion"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "validation-failed",
                      "details": {
                        "filename": [
                          "must be a string"
                        ]
                      },
                      "message": "Validation failed"
                    }
                  }
                }
              }
            },
            "description": "Invalid upload payload"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "ingest:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Ingestion"
        ],
        "x-required-scopes": [
          "ingest:write"
        ]
      }
    },
    "/ingest/url": {
      "post": {
        "operationId": "IngestionController_ingestUrl",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IngestionUrlDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "alreadyExists": false,
                    "chunks": 8,
                    "documentId": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"
                  }
                }
              }
            },
            "description": "Ingest a remote URL"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "validation-failed",
                      "details": {
                        "url": [
                          "must be an URL address"
                        ]
                      },
                      "message": "Validation failed"
                    }
                  }
                }
              }
            },
            "description": "Invalid URL payload"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "ingest:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Ingestion"
        ],
        "x-required-scopes": [
          "ingest:write"
        ]
      }
    },
    "/integrations": {
      "get": {
        "description": "List all integrations for a project with optional filters",
        "operationId": "IntegrationsController_listIntegrations",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Integrations retrieved successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List integrations",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:read"
        ]
      },
      "post": {
        "description": "Create a new integration configuration with encrypted credentials",
        "operationId": "IntegrationsController_createIntegration",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateIntegrationDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Integration created successfully"
          },
          "400": {
            "description": "Invalid request data"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "409": {
            "description": "Integration already exists for this project"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Create integration",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:write"
        ]
      }
    },
    "/integrations/available": {
      "get": {
        "description": "Get a list of all integration types that can be configured (ClickUp, GitHub, etc.)",
        "operationId": "IntegrationsController_listAvailableIntegrations",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Available integrations retrieved successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List available integration types",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:read"
        ]
      }
    },
    "/integrations/clickup/folders/{folderId}": {
      "get": {
        "description": "Fetch details for a specific ClickUp folder by ID",
        "operationId": "IntegrationsController_getClickUpFolder",
        "parameters": [
          {
            "description": "ClickUp folder ID",
            "in": "path",
            "name": "folderId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Folder details retrieved successfully"
          },
          "404": {
            "description": "ClickUp integration not found or folder not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get ClickUp folder details",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:read"
        ]
      }
    },
    "/integrations/clickup/spaces/{spaceId}": {
      "get": {
        "description": "Fetch details for a specific ClickUp space by ID",
        "operationId": "IntegrationsController_getClickUpSpace",
        "parameters": [
          {
            "description": "ClickUp space ID",
            "in": "path",
            "name": "spaceId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Space details retrieved successfully"
          },
          "404": {
            "description": "ClickUp integration not found or space not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get ClickUp space details",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:read"
        ]
      }
    },
    "/integrations/clickup/structure": {
      "get": {
        "description": "Fetch hierarchical workspace structure (spaces, folders, lists) with task counts for list selection UI",
        "operationId": "IntegrationsController_getClickUpWorkspaceStructure",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Workspace structure retrieved successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "ClickUp integration not found or not configured"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get ClickUp workspace structure",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:read"
        ]
      }
    },
    "/integrations/{name}": {
      "delete": {
        "description": "Delete an integration and all its associated data",
        "operationId": "IntegrationsController_deleteIntegration",
        "parameters": [
          {
            "description": "Integration name (e.g., \"clickup\")",
            "in": "path",
            "name": "name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Integration deleted successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Integration not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete integration",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:write"
        ]
      },
      "get": {
        "description": "Get detailed information about a specific integration",
        "operationId": "IntegrationsController_getIntegration",
        "parameters": [
          {
            "description": "Integration name (e.g., \"clickup\")",
            "in": "path",
            "name": "name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Integration retrieved successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Integration not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get integration",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:read"
        ]
      },
      "put": {
        "description": "Update an existing integration configuration",
        "operationId": "IntegrationsController_updateIntegration",
        "parameters": [
          {
            "description": "Integration name (e.g., \"clickup\")",
            "in": "path",
            "name": "name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateIntegrationDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Integration updated successfully"
          },
          "400": {
            "description": "Invalid update data"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Integration not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Update integration",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:write"
        ]
      }
    },
    "/integrations/{name}/public": {
      "get": {
        "description": "Get non-sensitive information about an integration",
        "operationId": "IntegrationsController_getPublicIntegrationInfo",
        "parameters": [
          {
            "description": "Integration name (e.g., \"clickup\")",
            "in": "path",
            "name": "name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Public info retrieved successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Integration not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get public integration info",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:read"
        ]
      }
    },
    "/integrations/{name}/sync": {
      "post": {
        "description": "Manually trigger a full import/sync from the integration",
        "operationId": "IntegrationsController_triggerSync",
        "parameters": [
          {
            "description": "Integration name (e.g., \"clickup\")",
            "in": "path",
            "name": "name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sync initiated successfully"
          },
          "400": {
            "description": "Integration does not support import"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Integration not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Trigger integration sync",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:write"
        ]
      }
    },
    "/integrations/{name}/sync/stream": {
      "get": {
        "description": "Starts a sync and streams progress updates via Server-Sent Events",
        "operationId": "IntegrationsController_triggerSyncStream",
        "parameters": [
          {
            "description": "Integration name (e.g., \"clickup\")",
            "in": "path",
            "name": "name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSE stream started"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Trigger integration sync with real-time progress (SSE)",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:write"
        ]
      }
    },
    "/integrations/{name}/test": {
      "post": {
        "description": "Test if the integration credentials are valid and the connection works",
        "operationId": "IntegrationsController_testConnection",
        "parameters": [
          {
            "description": "Integration name (e.g., \"clickup\")",
            "in": "path",
            "name": "name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Connection test completed"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "404": {
            "description": "Integration not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Test integration connection",
        "tags": [
          "Integrations"
        ],
        "x-required-scopes": [
          "integrations:write"
        ]
      }
    },
    "/invites": {
      "post": {
        "operationId": "InvitesController_create",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInviteDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "org:invite:create",
          "project:invite:create"
        ]
      }
    },
    "/invites/accept": {
      "post": {
        "operationId": "InvitesController_accept",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AcceptInviteDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "org:read"
        ]
      }
    },
    "/invites/with-user": {
      "post": {
        "operationId": "InvitesController_createWithUser",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInviteWithUserDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "org:invite:create",
          "project:invite:create"
        ]
      }
    },
    "/mcp/rpc": {
      "post": {
        "description": "\nModel Context Protocol (MCP) server endpoint.\n\n**Protocol:** JSON-RPC 2.0\n**Methods:** initialize, tools/list, tools/call\n**Tools:** schema_version, schema_changelog, type_info\n\n**Example Initialize Request:**\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"initialize\",\n  \"params\": {\n    \"protocolVersion\": \"2025-06-18\",\n    \"capabilities\": {},\n    \"clientInfo\": {\n      \"name\": \"example-client\",\n      \"version\": \"1.0.0\"\n    }\n  }\n}\n```\n\n**Example tools/list Request:**\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 2,\n  \"method\": \"tools/list\"\n}\n```\n\n**Example tools/call Request:**\n```json\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 3,\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"schema_version\",\n    \"arguments\": {}\n  }\n}\n```\n        ",
        "operationId": "McpServerController_handleRpc",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "id": {
                    "description": "Request ID (omit for notifications)",
                    "oneOf": [
                      {
                        "type": "number"
                      },
                      {
                        "type": "string"
                      }
                    ]
                  },
                  "jsonrpc": {
                    "description": "JSON-RPC version",
                    "enum": [
                      "2.0"
                    ],
                    "type": "string"
                  },
                  "method": {
                    "description": "RPC method name",
                    "enum": [
                      "initialize",
                      "tools/list",
                      "tools/call",
                      "notifications/initialized"
                    ],
                    "type": "string"
                  },
                  "params": {
                    "description": "Method parameters",
                    "type": "object"
                  }
                },
                "required": [
                  "jsonrpc",
                  "method"
                ],
                "type": "object"
              }
            }
          },
          "description": "JSON-RPC 2.0 request",
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "properties": {
                        "id": {
                          "oneOf": [
                            {
                              "type": "number"
                            },
                            {
                              "type": "string"
                            }
                          ]
                        },
                        "jsonrpc": {
                          "enum": [
                            "2.0"
                          ],
                          "type": "string"
                        },
                        "result": {
                          "type": "object"
                        }
                      },
                      "required": [
                        "jsonrpc",
                        "id",
                        "result"
                      ],
                      "type": "object"
                    },
                    {
                      "properties": {
                        "error": {
                          "properties": {
                            "code": {
                              "type": "number"
                            },
                            "data": {
                              "type": "object"
                            },
                            "message": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "code",
                            "message"
                          ],
                          "type": "object"
                        },
                        "id": {
                          "oneOf": [
                            {
                              "type": "number"
                            },
                            {
                              "type": "string"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "jsonrpc": {
                          "enum": [
                            "2.0"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "jsonrpc",
                        "id",
                        "error"
                      ],
                      "type": "object"
                    }
                  ]
                }
              }
            },
            "description": "JSON-RPC 2.0 response"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "MCP JSON-RPC 2.0 Endpoint",
        "tags": [
          "MCP Server (JSON-RPC 2.0)"
        ],
        "x-required-scopes": [
          "schema:read"
        ]
      }
    },
    "/mcp/schema/changelog": {
      "get": {
        "description": "Returns recent schema changes for debugging and tracking",
        "operationId": "McpController_getSchemaChangelog",
        "parameters": [
          {
            "in": "query",
            "name": "since",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": true,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/SchemaChangeDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": "Schema change history"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Unauthorized"
                    }
                  }
                }
              }
            },
            "description": "Missing or invalid bearer token"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "schema:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Insufficient scope - requires schema:read"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get schema change history",
        "tags": [
          "MCP"
        ],
        "x-required-scopes": [
          "schema:read"
        ]
      }
    },
    "/mcp/schema/version": {
      "get": {
        "description": "Returns a hash representing the current state of all schemas. Agents can use this to determine if cached tools are still valid.",
        "operationId": "McpController_getSchemaVersion",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SchemaVersionDto"
                }
              }
            },
            "description": "Current schema version information"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Unauthorized"
                    }
                  }
                }
              }
            },
            "description": "Missing or invalid bearer token"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "schema:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Insufficient scope - requires schema:read"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get current schema version hash",
        "tags": [
          "MCP"
        ],
        "x-required-scopes": [
          "schema:read"
        ]
      }
    },
    "/monitoring/extraction-jobs": {
      "get": {
        "operationId": "MonitoringController_listExtractionJobs",
        "parameters": [
          {
            "description": "Type of resource to query (optional, inferred from endpoint path)",
            "in": "query",
            "name": "type",
            "required": false,
            "schema": {
              "enum": [
                "extraction_job",
                "chat_session",
                "frontend_session"
              ],
              "example": "extraction_job",
              "type": "string"
            }
          },
          {
            "description": "Number of items to return",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 50,
              "example": 50,
              "maximum": 100,
              "minimum": 1,
              "type": "number"
            }
          },
          {
            "description": "Number of items to skip",
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "example": 0,
              "minimum": 0,
              "type": "number"
            }
          },
          {
            "description": "Filter by status",
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "example": "completed",
              "type": "string"
            }
          },
          {
            "description": "Filter by date from (ISO 8601)",
            "in": "query",
            "name": "date_from",
            "required": false,
            "schema": {
              "example": "2025-10-01T00:00:00Z",
              "type": "string"
            }
          },
          {
            "description": "Filter by date to (ISO 8601)",
            "in": "query",
            "name": "date_to",
            "required": false,
            "schema": {
              "example": "2025-10-31T23:59:59Z",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResourceListResponseDto"
                }
              }
            },
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List extraction jobs with metrics",
        "tags": [
          "monitoring"
        ],
        "x-required-scopes": [
          "extraction:read"
        ]
      }
    },
    "/monitoring/extraction-jobs/{id}": {
      "get": {
        "operationId": "MonitoringController_getExtractionJobDetail",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResourceDetailResponseDto"
                }
              }
            },
            "description": ""
          },
          "404": {
            "description": "Job not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get extraction job details with logs and LLM calls",
        "tags": [
          "monitoring"
        ],
        "x-required-scopes": [
          "extraction:read"
        ]
      }
    },
    "/monitoring/extraction-jobs/{id}/llm-calls": {
      "get": {
        "operationId": "MonitoringController_getExtractionJobLLMCalls",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/LLMCallDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get LLM calls for extraction job",
        "tags": [
          "monitoring"
        ],
        "x-required-scopes": [
          "extraction:read"
        ]
      }
    },
    "/monitoring/extraction-jobs/{id}/logs": {
      "get": {
        "operationId": "MonitoringController_getExtractionJobLogs",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Filter by log level",
            "in": "query",
            "name": "level",
            "required": false,
            "schema": {
              "enum": [
                "debug",
                "info",
                "warn",
                "error",
                "fatal"
              ],
              "example": "info",
              "type": "string"
            }
          },
          {
            "description": "Number of log entries to return",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 100,
              "example": 100,
              "maximum": 500,
              "minimum": 1,
              "type": "number"
            }
          },
          {
            "description": "Number of log entries to skip",
            "in": "query",
            "name": "offset",
            "required": false,
            "schema": {
              "default": 0,
              "example": 0,
              "minimum": 0,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/LogEntryDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get process logs for extraction job",
        "tags": [
          "monitoring"
        ],
        "x-required-scopes": [
          "extraction:read"
        ]
      }
    },
    "/notifications": {
      "delete": {
        "operationId": "NotificationsController_clearAll",
        "parameters": [
          {
            "description": "Tab to clear",
            "in": "query",
            "name": "tab",
            "required": false,
            "schema": {
              "enum": [
                "important",
                "other"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "All notifications cleared"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Clear all notifications in a tab",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:write"
        ]
      },
      "get": {
        "operationId": "NotificationsController_getNotifications",
        "parameters": [
          {
            "description": "Filter by tab",
            "in": "query",
            "name": "tab",
            "required": false,
            "schema": {
              "enum": [
                "important",
                "other",
                "snoozed",
                "cleared"
              ],
              "type": "string"
            }
          },
          {
            "description": "Filter by category (e.g., \"import\", \"extraction\")",
            "in": "query",
            "name": "category",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Show only unread notifications",
            "in": "query",
            "name": "unread_only",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "description": "Search in title and message",
            "in": "query",
            "name": "search",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of notifications"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get notifications for current user",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:read"
        ]
      }
    },
    "/notifications/counts": {
      "get": {
        "operationId": "NotificationsController_getUnreadCounts",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Notification counts by tab"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get unread notification counts",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:read"
        ]
      }
    },
    "/notifications/stats": {
      "get": {
        "operationId": "NotificationsController_getStats",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Notification statistics"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get notification statistics (unread, dismissed, total)",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:read"
        ]
      }
    },
    "/notifications/{id}": {
      "delete": {
        "operationId": "NotificationsController_clear",
        "parameters": [
          {
            "description": "Notification ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification cleared"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Clear notification (move to cleared tab)",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:write"
        ]
      }
    },
    "/notifications/{id}/dismiss": {
      "post": {
        "operationId": "NotificationsController_dismiss",
        "parameters": [
          {
            "description": "Notification ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification dismissed"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Dismiss notification",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:write"
        ]
      }
    },
    "/notifications/{id}/read": {
      "post": {
        "operationId": "NotificationsController_markRead",
        "parameters": [
          {
            "description": "Notification ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification marked as read"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Mark notification as read",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:write"
        ]
      }
    },
    "/notifications/{id}/snooze": {
      "post": {
        "operationId": "NotificationsController_snooze",
        "parameters": [
          {
            "description": "Notification ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SnoozeNotificationDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Notification snoozed"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Snooze notification until a specific time",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:write"
        ]
      }
    },
    "/notifications/{id}/unclear": {
      "post": {
        "operationId": "NotificationsController_unclear",
        "parameters": [
          {
            "description": "Notification ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification restored"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Restore notification from cleared tab",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:write"
        ]
      }
    },
    "/notifications/{id}/unread": {
      "post": {
        "operationId": "NotificationsController_markUnread",
        "parameters": [
          {
            "description": "Notification ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification marked as unread"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Mark notification as unread",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:write"
        ]
      }
    },
    "/notifications/{id}/unsnooze": {
      "post": {
        "operationId": "NotificationsController_unsnooze",
        "parameters": [
          {
            "description": "Notification ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification unsnoozed"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "notifications:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Unsnooze notification",
        "tags": [
          "Notifications"
        ],
        "x-required-scopes": [
          "notifications:write"
        ]
      }
    },
    "/orgs": {
      "get": {
        "operationId": "OrgsController_list",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/OrgDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List organizations"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid filter"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "Orgs"
        ]
      },
      "post": {
        "operationId": "OrgsController_create",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOrgDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrgDto"
                }
              }
            },
            "description": "Organization created (users may have at most 10 orgs)"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "validation-failed",
                      "details": {
                        "name": [
                          "must be a string"
                        ]
                      },
                      "message": "Validation failed"
                    }
                  }
                }
              }
            },
            "description": "Invalid body"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "409": {
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "example": {
                        "error": {
                          "code": "conflict",
                          "message": "Organization limit reached (10)"
                        }
                      }
                    },
                    {
                      "example": {
                        "error": {
                          "code": "conflict",
                          "details": {
                            "name": [
                              "already exists"
                            ]
                          },
                          "message": "Organization name already exists"
                        }
                      }
                    }
                  ]
                }
              }
            },
            "description": "Organization limit reached or duplicate name"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "Orgs"
        ]
      }
    },
    "/orgs/{id}": {
      "delete": {
        "operationId": "OrgsController_delete",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Organization deleted (projects, documents, chunks, conversations cascade)"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "not-found",
                      "message": "Org not found"
                    }
                  }
                }
              }
            },
            "description": "Org not found"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "Orgs"
        ]
      },
      "get": {
        "operationId": "OrgsController_getOne",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrgDto"
                }
              }
            },
            "description": "Get an organization"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "not-found",
                      "message": "Org not found"
                    }
                  }
                }
              }
            },
            "description": "Org not found"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "Orgs"
        ]
      }
    },
    "/product-versions": {
      "get": {
        "operationId": "ProductVersionController_list",
        "parameters": [
          {
            "description": "Pagination cursor (created_at timestamp of last item from previous page)",
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Number of items per page (1-100, default 20)",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "items": [
                      {
                        "base_product_version_id": null,
                        "created_at": "2025-01-01T00:00:00Z",
                        "description": null,
                        "id": "...",
                        "member_count": 42,
                        "name": "v1.0.0"
                      }
                    ],
                    "next_cursor": "2025-01-01T00:00:00Z"
                  }
                }
              }
            },
            "description": "List product version snapshots for a project"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Product Versions"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      },
      "post": {
        "operationId": "ProductVersionController_create",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProductVersionDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "id": "11111111-1111-4111-8111-111111111111",
                    "member_count": 42,
                    "name": "v1.0.0"
                  }
                }
              }
            },
            "description": "Create product version snapshot"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "product_version_name_exists",
                      "message": "Name already exists"
                    }
                  }
                }
              }
            },
            "description": "Name exists"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Product Versions"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/product-versions/{id}": {
      "get": {
        "operationId": "ProductVersionController_get",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get product version snapshot"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Product Versions"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/product-versions/{id}/diff/{otherId}": {
      "get": {
        "operationId": "ProductVersionController_diff",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "otherId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "items": [
                      {
                        "canonical_id": "...",
                        "change_type": "modified",
                        "version_a_object_id": "...",
                        "version_b_object_id": "..."
                      }
                    ],
                    "meta": {
                      "added": 5,
                      "modified": 10,
                      "removed": 2,
                      "unchanged": 100
                    }
                  }
                }
              }
            },
            "description": "Diff two product version snapshots"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Product Versions"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/projects": {
      "get": {
        "operationId": "ProjectsController_list",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Filter projects by organization id (must be explicit elsewhere when creating projects)",
            "in": "query",
            "name": "orgId",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ProjectDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List projects (must create at least one before ingesting documents)"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid filter"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "project:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Projects"
        ],
        "x-required-scopes": [
          "project:read"
        ]
      },
      "post": {
        "operationId": "ProjectsController_create",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateProjectDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectDto"
                }
              }
            },
            "description": "Project created"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "duplicate",
                      "message": "Project with this name exists in org"
                    }
                  }
                }
              }
            },
            "description": "Validation / duplicate / org errors"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "org:project:create"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Projects"
        ],
        "x-required-scopes": [
          "org:project:create"
        ]
      }
    },
    "/projects/{id}": {
      "delete": {
        "operationId": "ProjectsController_delete",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "status": "deleted"
                  }
                }
              }
            },
            "description": "Deleted project"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid id"
                    }
                  }
                }
              }
            },
            "description": "Invalid id"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "org:project:delete"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Projects"
        ],
        "x-required-scopes": [
          "org:project:delete"
        ]
      },
      "get": {
        "operationId": "ProjectsController_getById",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectDto"
                }
              }
            },
            "description": "Get project by ID"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid id"
                    }
                  }
                }
              }
            },
            "description": "Invalid id"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "project:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Projects"
        ],
        "x-required-scopes": [
          "project:read"
        ]
      },
      "patch": {
        "operationId": "ProjectsController_update",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProjectDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectDto"
                }
              }
            },
            "description": "Project updated"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid id"
                    }
                  }
                }
              }
            },
            "description": "Invalid id or validation error"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "project:write"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Projects"
        ],
        "x-required-scopes": [
          "project:write"
        ]
      }
    },
    "/search": {
      "get": {
        "operationId": "SearchController_search",
        "parameters": [
          {
            "description": "Query string",
            "in": "query",
            "name": "q",
            "required": true,
            "schema": {
              "example": "vector index design",
              "type": "string"
            }
          },
          {
            "description": "Result limit (1..50)",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 10,
              "maximum": 50,
              "minimum": 1,
              "type": "number"
            }
          },
          {
            "in": "query",
            "name": "mode",
            "required": false,
            "schema": {
              "default": "hybrid",
              "enum": [
                "hybrid",
                "lexical",
                "vector"
              ],
              "type": "string"
            }
          },
          {
            "description": "Lexical weight for hybrid search (0-1). Only used when mode=hybrid. Weights are normalized to sum to 1.",
            "in": "query",
            "name": "lexicalWeight",
            "required": false,
            "schema": {
              "default": 0.5,
              "example": 0.7,
              "maximum": 1,
              "minimum": 0,
              "type": "number"
            }
          },
          {
            "description": "Vector weight for hybrid search (0-1). Only used when mode=hybrid. Weights are normalized to sum to 1.",
            "in": "query",
            "name": "vectorWeight",
            "required": false,
            "schema": {
              "default": 0.5,
              "example": 0.3,
              "maximum": 1,
              "minimum": 0,
              "type": "number"
            }
          },
          {
            "description": "Include path summaries showing how results relate to other objects in the knowledge graph",
            "in": "query",
            "name": "includePaths",
            "required": false,
            "schema": {
              "default": false,
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponseDto"
                }
              }
            },
            "description": "Hybrid / lexical / vector search over chunks"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "validation-failed",
                      "details": {
                        "q": [
                          "must be longer than or equal to 1 characters"
                        ]
                      },
                      "message": "Validation failed"
                    }
                  }
                }
              }
            },
            "description": "Validation failed"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "search:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Search"
        ],
        "x-required-scopes": [
          "search:read"
        ]
      }
    },
    "/search/unified": {
      "post": {
        "operationId": "UnifiedSearchController_search",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UnifiedSearchRequestDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnifiedSearchResponseDto"
                }
              }
            },
            "description": "Unified search results combining graph objects and document chunks"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "validation-failed",
                      "details": {
                        "query": [
                          "query must be shorter than or equal to 800 characters"
                        ]
                      },
                      "message": "Validation failed"
                    }
                  }
                }
              }
            },
            "description": "Validation failed"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "search:read"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Missing required scope (e.g., debug scope)"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Search"
        ],
        "x-required-scopes": [
          "search:read"
        ]
      }
    },
    "/settings": {
      "get": {
        "operationId": "SettingsController_list",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": [
                    {
                      "key": "theme",
                      "value": "dark"
                    }
                  ]
                }
              }
            },
            "description": "List all settings"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "Settings"
        ]
      }
    },
    "/settings/{key}": {
      "get": {
        "operationId": "SettingsController_getOne",
        "parameters": [
          {
            "in": "path",
            "name": "key",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "key": "theme",
                    "value": "dark"
                  }
                }
              }
            },
            "description": "Get a single setting"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "not-found",
                      "message": "Setting not found"
                    }
                  }
                }
              }
            },
            "description": "Setting not found"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "Settings"
        ]
      },
      "put": {
        "operationId": "SettingsController_update",
        "parameters": [
          {
            "in": "path",
            "name": "key",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "example": {
                  "value": "dark"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "key": "theme",
                    "value": "dark"
                  }
                }
              }
            },
            "description": "Update or create a setting"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "Settings"
        ]
      }
    },
    "/tags": {
      "get": {
        "operationId": "TagController_list",
        "parameters": [
          {
            "description": "Pagination cursor (created_at timestamp)",
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Number of items per page (1-100, default 20)",
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "items": [
                      {
                        "created_at": "2025-09-30T00:00:00Z",
                        "description": null,
                        "id": "...",
                        "name": "stable",
                        "product_version_id": "..."
                      }
                    ],
                    "next_cursor": "2025-09-30T00:00:00Z"
                  }
                }
              }
            },
            "description": "List tags for a project"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Tags"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      },
      "post": {
        "operationId": "TagController_create",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTagDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "created_at": "2025-09-30T00:00:00Z",
                    "description": "Stable release",
                    "id": "11111111-1111-4111-8111-111111111111",
                    "name": "stable",
                    "product_version_id": "22222222-2222-4222-8222-222222222222"
                  }
                }
              }
            },
            "description": "Create tag"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "tag_name_exists",
                      "message": "Tag name already exists"
                    }
                  }
                }
              }
            },
            "description": "Tag name exists or product version not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Tags"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/tags/by-name/{name}": {
      "get": {
        "operationId": "TagController_getByName",
        "parameters": [
          {
            "in": "path",
            "name": "name",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get tag by name"
          },
          "404": {
            "description": "Tag not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Tags"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/tags/{id}": {
      "delete": {
        "operationId": "TagController_delete",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Tag deleted"
          },
          "404": {
            "description": "Tag not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Tags"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      },
      "get": {
        "operationId": "TagController_get",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get tag by ID"
          },
          "404": {
            "description": "Tag not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Tags"
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      },
      "put": {
        "operationId": "TagController_update",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTagDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Update tag"
          },
          "404": {
            "description": "Tag not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "tags": [
          "Tags"
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/template-packs": {
      "get": {
        "operationId": "TemplatePackController_listTemplatePacks",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      },
      "post": {
        "operationId": "TemplatePackController_createTemplatePack",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTemplatePackDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "admin:write"
        ]
      }
    },
    "/template-packs/projects/{projectId}/assign": {
      "post": {
        "operationId": "TemplatePackController_assignTemplatePack",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "org_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "user_id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignTemplatePackDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/template-packs/projects/{projectId}/assignments/{assignmentId}": {
      "delete": {
        "operationId": "TemplatePackController_uninstallTemplatePack",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "assignmentId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      },
      "patch": {
        "operationId": "TemplatePackController_updateTemplatePackAssignment",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "assignmentId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTemplatePackAssignmentDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/template-packs/projects/{projectId}/available": {
      "get": {
        "operationId": "TemplatePackController_getAvailableTemplates",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/template-packs/projects/{projectId}/compiled-types": {
      "get": {
        "operationId": "TemplatePackController_getCompiledObjectTypes",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/template-packs/projects/{projectId}/installed": {
      "get": {
        "operationId": "TemplatePackController_getInstalledTemplatePacks",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/template-packs/{id}": {
      "delete": {
        "operationId": "TemplatePackController_deleteTemplatePack",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      },
      "get": {
        "operationId": "TemplatePackController_getTemplatePack",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/type-registry/projects/{projectId}": {
      "get": {
        "operationId": "TypeRegistryController_getProjectTypes",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/type-registry/projects/{projectId}/stats": {
      "get": {
        "operationId": "TypeRegistryController_getProjectStats",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/type-registry/projects/{projectId}/types": {
      "post": {
        "operationId": "TypeRegistryController_createType",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateObjectTypeDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/type-registry/projects/{projectId}/types/{typeName}": {
      "delete": {
        "operationId": "TypeRegistryController_deleteType",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "typeName",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      },
      "get": {
        "operationId": "TypeRegistryController_getType",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "typeName",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      },
      "patch": {
        "operationId": "TypeRegistryController_updateType",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "typeName",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateObjectTypeDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/type-registry/projects/{projectId}/types/{typeName}/schema": {
      "get": {
        "operationId": "TypeRegistryController_getTypeSchema",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "typeName",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/type-registry/projects/{projectId}/types/{typeName}/toggle": {
      "patch": {
        "operationId": "TypeRegistryController_toggleType",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "typeName",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:write"
        ]
      }
    },
    "/type-registry/projects/{projectId}/validate": {
      "post": {
        "operationId": "TypeRegistryController_validateData",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "x-required-scopes": [
          "graph:read"
        ]
      }
    },
    "/user/delete-account": {
      "post": {
        "operationId": "UserDeletionController_deleteAccount",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "deleted": {
                      "properties": {
                        "chunks": {
                          "type": "number"
                        },
                        "documents": {
                          "type": "number"
                        },
                        "embeddings": {
                          "type": "number"
                        },
                        "extractionJobs": {
                          "type": "number"
                        },
                        "graphObjects": {
                          "type": "number"
                        },
                        "integrations": {
                          "type": "number"
                        },
                        "organizations": {
                          "type": "number"
                        },
                        "projects": {
                          "type": "number"
                        }
                      },
                      "type": "object"
                    },
                    "duration_ms": {
                      "type": "number"
                    },
                    "message": {
                      "type": "string"
                    }
                  },
                  "type": "object"
                }
              }
            },
            "description": "Account deleted successfully"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Delete user account and all data",
        "tags": [
          "user"
        ],
        "x-required-scopes": [
          "account:delete"
        ]
      }
    },
    "/user/orgs-and-projects": {
      "get": {
        "description": "Returns hierarchical access tree with orgs and nested projects, including user roles at each level",
        "operationId": "UserDeletionController_getOrgsAndProjects",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/OrgWithProjectsDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": "Access tree retrieved successfully",
            "schema": {
              "example": [
                {
                  "id": "550e8400-e29b-41d4-a716-446655440000",
                  "name": "Acme Corp",
                  "projects": [
                    {
                      "id": "550e8400-e29b-41d4-a716-446655440001",
                      "name": "Product Docs",
                      "orgId": "550e8400-e29b-41d4-a716-446655440000",
                      "role": "project_admin"
                    }
                  ],
                  "role": "org_admin"
                }
              ]
            }
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get user access tree (organizations and projects with roles)",
        "tags": [
          "user"
        ],
        "x-required-scopes": [
          "orgs:read",
          "project:read"
        ]
      }
    },
    "/user/profile": {
      "get": {
        "operationId": "UserProfileController_getSelf",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileDto"
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "UserProfile"
        ]
      },
      "put": {
        "operationId": "UserProfileController_updateSelf",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserProfileDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileDto"
                }
              }
            },
            "description": ""
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "UserProfile"
        ]
      }
    },
    "/user/profile/emails": {
      "get": {
        "operationId": "UserProfileController_listEmails",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/AlternativeEmailDto"
                  },
                  "type": "array"
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "UserProfile"
        ]
      },
      "post": {
        "operationId": "UserProfileController_addEmail",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddAlternativeEmailDto"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlternativeEmailDto"
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "UserProfile"
        ]
      }
    },
    "/user/profile/emails/{email}": {
      "delete": {
        "operationId": "UserProfileController_removeEmail",
        "parameters": [
          {
            "in": "path",
            "name": "email",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "status": "deleted"
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "bad-request",
                      "message": "Invalid request"
                    }
                  }
                }
              }
            },
            "description": "Bad request"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "unauthorized",
                      "message": "Missing or invalid credentials"
                    }
                  }
                }
              }
            },
            "description": "Unauthorized"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions"
                    }
                  }
                }
              }
            },
            "description": "Forbidden"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "internal",
                      "message": "Unexpected error"
                    }
                  }
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "tags": [
          "UserProfile"
        ]
      }
    },
    "/user/test-cleanup": {
      "post": {
        "operationId": "UserDeletionController_testCleanup",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Test data cleaned up successfully"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "error": {
                      "code": "forbidden",
                      "message": "Insufficient permissions",
                      "missing_scopes": [
                        "account:delete"
                      ]
                    }
                  }
                }
              }
            },
            "description": "Forbidden - not a test environment or test user"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Clean up test user data (test environments only)",
        "tags": [
          "user"
        ],
        "x-required-scopes": [
          "account:delete"
        ]
      }
    }
  },
  "servers": [],
  "tags": [
    {
      "name": "Health"
    },
    {
      "name": "Auth"
    },
    {
      "name": "Orgs"
    },
    {
      "name": "Projects"
    },
    {
      "name": "Settings"
    },
    {
      "name": "Ingestion"
    },
    {
      "name": "Documents"
    },
    {
      "name": "Chunks"
    },
    {
      "name": "Search"
    },
    {
      "name": "Chat"
    },
    {
      "name": "Graph"
    },
    {
      "name": "Chat UI"
    },
    {
      "name": "Extraction Jobs"
    },
    {
      "name": "Integrations"
    },
    {
      "name": "MCP"
    },
    {
      "name": "MCP Server (JSON-RPC 2.0)"
    },
    {
      "name": "monitoring"
    },
    {
      "name": "Notifications"
    },
    {
      "name": "Product Versions"
    },
    {
      "name": "Tags"
    },
    {
      "name": "user"
    },
    {
      "name": "UserProfile"
    }
  ],
  "x-tagGroups": [
    {
      "name": "Health & Auth",
      "tags": [
        "Health",
        "Auth"
      ]
    },
    {
      "name": "Organizations & Projects",
      "tags": [
        "Orgs",
        "Projects"
      ]
    },
    {
      "name": "Configuration",
      "tags": [
        "Settings"
      ]
    },
    {
      "name": "Content & Ingestion",
      "tags": [
        "Ingestion",
        "Documents",
        "Chunks"
      ]
    },
    {
      "name": "Search",
      "tags": [
        "Search"
      ]
    },
    {
      "name": "Chat",
      "tags": [
        "Chat"
      ]
    },
    {
      "name": "Knowledge Graph",
      "tags": [
        "Graph"
      ]
    }
  ]
}