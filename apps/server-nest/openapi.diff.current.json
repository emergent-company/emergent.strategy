{
  "baseline": {
    "components": {
      "schemas": {
        "AcceptInviteDto": {
          "properties": {},
          "type": "object"
        },
        "AddAlternativeEmailDto": {
          "properties": {},
          "type": "object"
        },
        "AlternativeEmailDto": {
          "properties": {
            "createdAt": {
              "description": "ISO timestamp created",
              "type": "string"
            },
            "email": {
              "description": "Email address (lowercased canonical form)",
              "type": "string"
            },
            "verified": {
              "description": "Verification status",
              "type": "boolean"
            }
          },
          "required": [
            "email",
            "verified",
            "createdAt"
          ],
          "type": "object"
        },
        "ChatRequestDto": {
          "properties": {},
          "type": "object"
        },
        "ChatStreamDoneEvent": {
          "properties": {},
          "type": "object"
        },
        "ChatStreamErrorEvent": {
          "properties": {},
          "type": "object"
        },
        "ChatStreamMetaEvent": {
          "properties": {},
          "type": "object"
        },
        "ChatStreamTokenEvent": {
          "properties": {},
          "type": "object"
        },
        "ChunkDto": {
          "properties": {
            "documentId": {
              "example": "doc_1",
              "type": "string"
            },
            "documentTitle": {
              "description": "Best-effort document title derived from filename or source URL",
              "example": "User Guide.pdf",
              "type": "string"
            },
            "hasEmbedding": {
              "description": "Whether an embedding vector exists for this chunk",
              "example": true,
              "type": "boolean"
            },
            "id": {
              "example": "chunk_1",
              "type": "string"
            },
            "index": {
              "description": "Zero-based index of chunk inside the document",
              "example": 0,
              "type": "number"
            },
            "size": {
              "description": "Size in characters",
              "example": 512,
              "type": "number"
            },
            "text": {
              "description": "Plaintext content of the chunk (may be truncated client-side)",
              "example": "This is the chunk text...",
              "type": "string"
            }
          },
          "required": [
            "id",
            "documentId",
            "documentTitle",
            "index",
            "size",
            "hasEmbedding",
            "text"
          ],
          "type": "object"
        },
        "CitationDto": {
          "properties": {},
          "type": "object"
        },
        "CreateGraphObjectDto": {
          "properties": {},
          "type": "object"
        },
        "CreateGraphRelationshipDto": {
          "properties": {},
          "type": "object"
        },
        "CreateInviteDto": {
          "properties": {},
          "type": "object"
        },
        "CreateOrgDto": {
          "properties": {},
          "type": "object"
        },
        "CreateProjectDto": {
          "properties": {
            "name": {
              "description": "Project name (unique per organization, case-insensitive)",
              "example": "My Project",
              "type": "string"
            },
            "orgId": {
              "description": "Organization UUID (must belong to caller; no implicit default org)",
              "type": "string"
            }
          },
          "required": [
            "name",
            "orgId"
          ],
          "type": "object"
        },
        "DocumentDto": {
          "properties": {
            "chunks": {
              "description": "Number of chunks associated with this document",
              "example": 12,
              "type": "number"
            },
            "createdAt": {
              "example": "2025-01-01T00:00:00.000Z",
              "type": "string"
            },
            "id": {
              "example": "doc_1",
              "type": "string"
            },
            "mimeType": {
              "example": "text/markdown",
              "nullable": true,
              "type": "object"
            },
            "name": {
              "example": "Spec.md",
              "type": "string"
            },
            "orgId": {
              "example": "11111111-2222-3333-4444-555555555555",
              "nullable": true,
              "type": "string"
            },
            "projectId": {
              "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
              "nullable": true,
              "type": "string"
            },
            "sourceUrl": {
              "example": "https://example.com/file.pdf",
              "nullable": true,
              "type": "object"
            },
            "updatedAt": {
              "example": "2025-01-01T00:05:00.000Z",
              "type": "string"
            }
          },
          "required": [
            "id",
            "name",
            "createdAt",
            "updatedAt",
            "chunks"
          ],
          "type": "object"
        },
        "GetChatStreamCitationsFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamDoneFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamErrorFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamMetaFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamSummaryFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamTokenFrame": {
          "properties": {},
          "type": "object"
        },
        "GraphSearchCitationDto": {
          "properties": {
            "confidence": {
              "example": 0.82,
              "type": "number"
            },
            "source_object_id": {
              "example": "b3d52c50-5101-4c6c-8d30-4a1f0f7645cb",
              "type": "string"
            },
            "span": {
              "example": "Decision depends on consistent flag rollout",
              "type": "string"
            }
          },
          "required": [
            "span",
            "source_object_id",
            "confidence"
          ],
          "type": "object"
        },
        "GraphSearchDebugDto": {
          "properties": {
            "edge_samples": {
              "example": [
                {
                  "depth": 1,
                  "edge_score": 0.63,
                  "hub_damping": 0.43,
                  "relation": "decides"
                }
              ],
              "items": {
                "type": "object"
              },
              "type": "array"
            },
            "feature_flags": {
              "example": {
                "citations": false,
                "paths": true,
                "rerank": true
              },
              "type": "object"
            },
            "gain_rejections": {
              "example": 5,
              "type": "number"
            },
            "marginal_gain_min": {
              "example": 0.02,
              "type": "number"
            },
            "normalization": {
              "example": {
                "lexical": {
                  "mean": 0.42,
                  "std": 0.11
                }
              },
              "type": "object"
            }
          },
          "required": [
            "normalization",
            "gain_rejections",
            "marginal_gain_min",
            "edge_samples",
            "feature_flags"
          ],
          "type": "object"
        },
        "GraphSearchDocumentFusionDto": {
          "properties": {
            "enabled": {
              "default": false,
              "type": "boolean"
            },
            "mode": {
              "default": "blend",
              "enum": [
                "blend",
                "rrf",
                "sequential"
              ],
              "type": "string"
            },
            "topK": {
              "default": 8,
              "maximum": 50,
              "minimum": 1,
              "type": "number"
            },
            "weight": {
              "default": 0.35,
              "maximum": 1,
              "minimum": 0,
              "type": "number"
            }
          },
          "type": "object"
        },
        "GraphSearchEmbeddingModelMetaDto": {
          "properties": {
            "coverage_pct": {
              "example": 91.4,
              "type": "number"
            },
            "model": {
              "example": "text-embedding-3-large",
              "type": "string"
            },
            "version": {
              "example": 2,
              "type": "number"
            }
          },
          "required": [
            "model",
            "version",
            "coverage_pct"
          ],
          "type": "object"
        },
        "GraphSearchExpansionMetaDto": {
          "properties": {
            "hub_degree": {
              "example": 1342,
              "type": "number"
            },
            "hub_sampled": {
              "example": true,
              "type": "boolean"
            },
            "neighbors": {
              "example": 42,
              "type": "number"
            }
          },
          "required": [
            "neighbors",
            "hub_sampled"
          ],
          "type": "object"
        },
        "GraphSearchFiltersDto": {
          "properties": {
            "excludeObjectTypes": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "labelsAny": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "objectTypes": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "updatedAfter": {
              "example": "2025-09-01T00:00:00Z",
              "type": "string"
            },
            "updatedBefore": {
              "example": "2025-09-20T00:00:00Z",
              "type": "string"
            }
          },
          "type": "object"
        },
        "GraphSearchItemDto": {
          "properties": {
            "canonical_id": {
              "example": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd",
              "type": "string"
            },
            "citations": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchCitationDto"
              },
              "type": "array"
            },
            "cursor": {
              "example": "eyJzY29yZSI6MC44NzEyMywiaWQiOiJkb2MtMSJ9",
              "type": "string"
            },
            "explanation": {
              "example": "High lexical match on ...",
              "type": "string"
            },
            "fields": {
              "example": {
                "status": "active",
                "title": "Adopt Feature Flagging",
                "type": "Decision"
              },
              "type": "object"
            },
            "object_id": {
              "example": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd",
              "type": "string"
            },
            "rank": {
              "example": 1,
              "type": "number"
            },
            "reasons": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchReasonDto"
              },
              "type": "array"
            },
            "role": {
              "enum": [
                "primary",
                "neighbor",
                "reference",
                "document_chunk"
              ],
              "type": "string"
            },
            "score": {
              "example": 0.87123,
              "type": "number"
            },
            "truncated_fields": {
              "example": [
                "description"
              ],
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          "required": [
            "object_id",
            "canonical_id",
            "score",
            "rank",
            "role",
            "fields",
            "reasons"
          ],
          "type": "object"
        },
        "GraphSearchMetaDto": {
          "properties": {
            "channels": {
              "example": [
                "lexical",
                "vector"
              ],
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "elapsed_ms": {
              "example": 92,
              "type": "number"
            },
            "embedding_model": {
              "$ref": "#/components/schemas/GraphSearchEmbeddingModelMetaDto"
            },
            "expansion": {
              "$ref": "#/components/schemas/GraphSearchExpansionMetaDto"
            },
            "fusion": {
              "example": "weighted_sum:v2",
              "type": "string"
            },
            "hasNext": {
              "example": true,
              "type": "boolean"
            },
            "hasPrev": {
              "example": false,
              "type": "boolean"
            },
            "lexical_considered": {
              "example": 100,
              "type": "number"
            },
            "neighbor_expanded": {
              "example": 47,
              "type": "number"
            },
            "nextCursor": {
              "example": null,
              "type": "object"
            },
            "normalization_version": {
              "example": "zscore_v1",
              "type": "string"
            },
            "prevCursor": {
              "example": null,
              "type": "object"
            },
            "request": {
              "example": {
                "channels": [
                  "lexical",
                  "vector"
                ],
                "limit": 40,
                "rerank": true
              },
              "type": "object"
            },
            "rerank": {
              "$ref": "#/components/schemas/GraphSearchRerankMetaDto"
            },
            "skipped_unembedded": {
              "example": 12,
              "type": "number"
            },
            "token_budget": {
              "example": 3500,
              "type": "number"
            },
            "token_estimate": {
              "example": 1450,
              "type": "number"
            },
            "truncation_notice": {
              "example": false,
              "type": "boolean"
            },
            "vector_considered": {
              "example": 100,
              "type": "number"
            },
            "warnings": {
              "example": [
                "embedding_version_backlog"
              ],
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          "required": [
            "channels",
            "fusion",
            "normalization_version",
            "lexical_considered",
            "vector_considered",
            "skipped_unembedded",
            "neighbor_expanded",
            "token_estimate",
            "token_budget",
            "truncation_notice",
            "embedding_model",
            "rerank",
            "expansion",
            "request",
            "elapsed_ms",
            "hasNext",
            "hasPrev"
          ],
          "type": "object"
        },
        "GraphSearchNeighborDto": {
          "properties": {
            "edgeTypes": {
              "example": [
                "decides",
                "attended_by"
              ],
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "globalLimit": {
              "default": 50,
              "minimum": 0,
              "type": "number"
            },
            "maxDepth": {
              "default": 1,
              "minimum": 0,
              "type": "number"
            },
            "perPrimaryLimit": {
              "default": 3,
              "minimum": 0,
              "type": "number"
            }
          },
          "type": "object"
        },
        "GraphSearchPaginationDto": {
          "properties": {
            "cursor": {
              "example": null,
              "type": "object"
            },
            "limit": {
              "default": 40,
              "maximum": 100,
              "minimum": 1,
              "type": "number"
            }
          },
          "type": "object"
        },
        "GraphSearchPathSummaryDto": {
          "properties": {
            "path_id": {
              "example": "e7b7ff6e-ef5f-4b55-9580-5d3b45d0a123",
              "type": "string"
            },
            "reasons": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchReasonDto"
              },
              "type": "array"
            },
            "summary": {
              "example": "Meeting X decided Decision Y",
              "type": "string"
            }
          },
          "required": [
            "path_id",
            "summary",
            "reasons"
          ],
          "type": "object"
        },
        "GraphSearchReasonDto": {
          "properties": {
            "channel": {
              "enum": [
                "lexical",
                "vector",
                "neighbor_boost",
                "doc"
              ],
              "type": "string"
            },
            "score": {
              "example": 0.42,
              "type": "number"
            }
          },
          "required": [
            "channel",
            "score"
          ],
          "type": "object"
        },
        "GraphSearchRequestDto": {
          "properties": {
            "channels": {
              "items": {
                "enum": [
                  "lexical",
                  "vector",
                  "neighbor_boost",
                  "doc"
                ],
                "type": "string"
              },
              "type": "array"
            },
            "documentFusion": {
              "$ref": "#/components/schemas/GraphSearchDocumentFusionDto"
            },
            "experimental": {
              "description": "Experimental feature flags container",
              "type": "object"
            },
            "filters": {
              "$ref": "#/components/schemas/GraphSearchFiltersDto"
            },
            "includeCitations": {
              "default": false,
              "type": "boolean"
            },
            "includeDebug": {
              "default": false,
              "type": "boolean"
            },
            "includePathSummaries": {
              "default": true,
              "type": "boolean"
            },
            "intentOverride": {
              "enum": [
                "explain",
                "locate_config",
                "debug_error",
                "roadmap"
              ],
              "example": "explain",
              "type": "string"
            },
            "limit": {
              "default": 40,
              "maximum": 100,
              "minimum": 1,
              "type": "number"
            },
            "maxTokenBudget": {
              "default": 3500,
              "maximum": 6000,
              "minimum": 800,
              "type": "number"
            },
            "neighbor": {
              "$ref": "#/components/schemas/GraphSearchNeighborDto"
            },
            "pagination": {
              "$ref": "#/components/schemas/GraphSearchPaginationDto"
            },
            "query": {
              "description": "Search query",
              "maxLength": 800,
              "type": "string"
            },
            "rerank": {
              "default": null,
              "type": "object"
            }
          },
          "required": [
            "query"
          ],
          "type": "object"
        },
        "GraphSearchRerankMetaDto": {
          "properties": {
            "applied": {
              "example": true,
              "type": "boolean"
            },
            "latency_ms": {
              "example": 42,
              "type": "number"
            },
            "model": {
              "example": "mini-cross-encoder-v1",
              "type": "string"
            },
            "pool": {
              "example": 60,
              "type": "number"
            },
            "timeout": {
              "example": false,
              "type": "boolean"
            }
          },
          "required": [
            "applied"
          ],
          "type": "object"
        },
        "GraphSearchResponseDto": {
          "properties": {
            "debug": {
              "$ref": "#/components/schemas/GraphSearchDebugDto"
            },
            "intent": {
              "enum": [
                "explain",
                "locate_config",
                "debug_error",
                "roadmap"
              ],
              "type": "string"
            },
            "items": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchItemDto"
              },
              "type": "array"
            },
            "meta": {
              "$ref": "#/components/schemas/GraphSearchMetaDto"
            },
            "path_summaries": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchPathSummaryDto"
              },
              "type": "array"
            },
            "query": {
              "example": "original query text",
              "type": "string"
            }
          },
          "required": [
            "query",
            "items",
            "meta"
          ],
          "type": "object"
        },
        "IngestionUploadDto": {
          "properties": {
            "filename": {
              "description": "Original filename (optional, will fallback to uploaded file name)",
              "example": "spec.md",
              "type": "string"
            },
            "mimeType": {
              "description": "Optional MIME type",
              "example": "text/markdown",
              "type": "string"
            },
            "orgId": {
              "description": "Optional organisation UUID to associate the document with",
              "example": "11111111-2222-3333-4444-555555555555",
              "type": "string"
            },
            "projectId": {
              "description": "Project UUID that this document belongs to (required)",
              "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
              "type": "string"
            }
          },
          "required": [
            "projectId"
          ],
          "type": "object"
        },
        "IngestionUrlDto": {
          "properties": {
            "orgId": {
              "description": "Optional organisation UUID to associate the document with",
              "example": "11111111-2222-3333-4444-555555555555",
              "type": "string"
            },
            "projectId": {
              "description": "Project UUID that this document belongs to (required)",
              "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
              "type": "string"
            },
            "url": {
              "description": "Remote URL to ingest",
              "example": "https://example.com/spec.md",
              "type": "string"
            }
          },
          "required": [
            "url",
            "projectId"
          ],
          "type": "object"
        },
        "ObjectHistoryResponseDto": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/VersionedObjectDto"
              },
              "type": "array"
            },
            "next_cursor": {
              "description": "Present when more pages available; pass as cursor query param",
              "type": "string"
            }
          },
          "required": [
            "items"
          ],
          "type": "object"
        },
        "OrgDto": {
          "properties": {
            "id": {
              "example": "org_1",
              "type": "string"
            },
            "name": {
              "example": "Example Org",
              "type": "string"
            }
          },
          "required": [
            "id",
            "name"
          ],
          "type": "object"
        },
        "PatchGraphObjectDto": {
          "properties": {},
          "type": "object"
        },
        "PatchGraphRelationshipDto": {
          "properties": {},
          "type": "object"
        },
        "ProjectDto": {
          "properties": {
            "id": {
              "example": "proj_1",
              "type": "string"
            },
            "name": {
              "example": "Demo Project",
              "type": "string"
            },
            "orgId": {
              "example": "org_1",
              "type": "string"
            }
          },
          "required": [
            "id",
            "name",
            "orgId"
          ],
          "type": "object"
        },
        "RelationshipHistoryResponseDto": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/VersionedRelationshipDto"
              },
              "type": "array"
            },
            "next_cursor": {
              "description": "Present when more pages available; pass as cursor query param",
              "type": "string"
            }
          },
          "required": [
            "items"
          ],
          "type": "object"
        },
        "SearchResponseDto": {
          "properties": {
            "mode": {
              "enum": [
                "hybrid",
                "lexical",
                "vector"
              ],
              "type": "string"
            },
            "results": {
              "items": {
                "$ref": "#/components/schemas/SearchResultDto"
              },
              "type": "array"
            },
            "warning": {
              "example": "Embeddings unavailable; fell back to lexical.",
              "type": "string"
            }
          },
          "required": [
            "mode",
            "results"
          ],
          "type": "object"
        },
        "SearchResultDto": {
          "properties": {
            "id": {
              "example": "mock-1",
              "type": "string"
            },
            "score": {
              "example": 0.98,
              "type": "number"
            },
            "snippet": {
              "example": "Result snippet for \"foo\" (#1, mode=hybrid)",
              "type": "string"
            },
            "source": {
              "example": "source.doc#L10",
              "type": "string"
            }
          },
          "required": [
            "id",
            "snippet",
            "score"
          ],
          "type": "object"
        },
        "TraverseGraphDto": {
          "properties": {},
          "type": "object"
        },
        "UpdateUserProfileDto": {
          "properties": {},
          "type": "object"
        },
        "UserProfileDto": {
          "properties": {
            "avatarObjectKey": {
              "description": "Object storage key for avatar (if stored internally)",
              "type": "object"
            },
            "displayName": {
              "description": "Display name fallback (explicit) or derived (first + last)",
              "type": "object"
            },
            "firstName": {
              "type": "object"
            },
            "lastName": {
              "type": "object"
            },
            "phoneE164": {
              "description": "E.164 formatted phone number, leading + and digits",
              "type": "object"
            },
            "subjectId": {
              "description": "Canonical internal user id (subject id, from identity provider)",
              "format": "uuid",
              "type": "string"
            }
          },
          "required": [
            "subjectId"
          ],
          "type": "object"
        },
        "VersionedObjectDto": {
          "properties": {
            "canonical_id": {
              "type": "string"
            },
            "created_at": {
              "type": "string"
            },
            "id": {
              "type": "string"
            },
            "key": {
              "nullable": true,
              "type": "object"
            },
            "labels": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "org_id": {
              "nullable": true,
              "type": "object"
            },
            "project_id": {
              "nullable": true,
              "type": "object"
            },
            "properties": {
              "type": "object"
            },
            "supersedes_id": {
              "nullable": true,
              "type": "object"
            },
            "type": {
              "type": "string"
            },
            "version": {
              "type": "number"
            }
          },
          "required": [
            "id",
            "org_id",
            "project_id",
            "canonical_id",
            "supersedes_id",
            "version",
            "type",
            "key",
            "properties",
            "labels",
            "created_at"
          ],
          "type": "object"
        },
        "VersionedRelationshipDto": {
          "properties": {
            "canonical_id": {
              "type": "string"
            },
            "created_at": {
              "type": "string"
            },
            "dst_id": {
              "type": "string"
            },
            "id": {
              "type": "string"
            },
            "properties": {
              "type": "object"
            },
            "src_id": {
              "type": "string"
            },
            "supersedes_id": {
              "nullable": true,
              "type": "object"
            },
            "type": {
              "type": "string"
            },
            "valid_from": {
              "nullable": true,
              "type": "object"
            },
            "valid_to": {
              "nullable": true,
              "type": "object"
            },
            "version": {
              "type": "number"
            },
            "weight": {
              "nullable": true,
              "type": "object"
            }
          },
          "required": [
            "id",
            "canonical_id",
            "supersedes_id",
            "version",
            "type",
            "src_id",
            "dst_id",
            "properties",
            "created_at",
            "weight",
            "valid_from",
            "valid_to"
          ],
          "type": "object"
        }
      },
      "securitySchemes": {
        "bearer": {
          "bearerFormat": "JWT",
          "scheme": "bearer",
          "type": "http"
        }
      }
    },
    "info": {
      "contact": {},
      "description": "Generated OpenAPI spec (code-first). All protected operations include x-required-scopes and 403 examples with missing_scopes.",
      "title": "Spec Server API",
      "version": "0.2.0"
    },
    "openapi": "3.0.0",
    "paths": {
      "/auth/me": {
        "get": {
          "operationId": "AuthController_me",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "email": "demo@example.com",
                      "sub": "mock-user-id"
                    }
                  }
                }
              },
              "description": "Return current authenticated user (mock)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Unauthorized"
                      }
                    }
                  }
                }
              },
              "description": "Missing or invalid bearer token"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "org:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Insufficient scope"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Auth"
          ],
          "x-required-scopes": [
            "org:read"
          ]
        }
      },
      "/chat/conversations": {
        "get": {
          "operationId": "ChatController_listConversations",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": [
                      {
                        "id": "11111111-1111-4111-8111-111111111111",
                        "is_private": false,
                        "title": "2025-01-01 — Hello world"
                      }
                    ]
                  }
                }
              },
              "description": "List chat conversations"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "chat:use"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        },
        "post": {
          "operationId": "ChatController_createConversation",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "conversationId": "11111111-1111-4111-8111-111111111111",
                      "id": "11111111-1111-4111-8111-111111111111",
                      "title": "2025-01-01 — New Conversation"
                    }
                  }
                }
              },
              "description": "Create a new conversation (201)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "message required"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        }
      },
      "/chat/stream": {
        "post": {
          "operationId": "ChatController_streamPost",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatRequestDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "text/event-stream": {
                  "examples": {
                    "done": {
                      "value": "data: {\"type\":\"done\"}\n\n"
                    },
                    "error": {
                      "value": "data: {\"type\":\"error\",\"error\":\"model key missing\"}\n\n"
                    },
                    "meta": {
                      "value": "data: {\"type\":\"meta\",\"conversationId\":\"11111111-1111-4111-8111-111111111111\",\"citations\":[]}\n\n"
                    },
                    "token": {
                      "value": "data: {\"type\":\"token\",\"token\":\"Hello\"}\n\n"
                    }
                  },
                  "schema": {
                    "description": "Union of possible chat stream events (serialized per line as SSE frame).",
                    "oneOf": [
                      {
                        "$ref": "#/components/schemas/ChatStreamMetaEvent"
                      },
                      {
                        "$ref": "#/components/schemas/ChatStreamTokenEvent"
                      },
                      {
                        "$ref": "#/components/schemas/ChatStreamErrorEvent"
                      },
                      {
                        "$ref": "#/components/schemas/ChatStreamDoneEvent"
                      }
                    ]
                  }
                }
              },
              "description": "Chat streaming endpoint (SSE). Each line is an SSE data frame beginning with \"data: \", followed by one of the JSON event shapes."
            },
            "400": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "message required"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                },
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "chat:use"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        }
      },
      "/chat/{id}": {
        "delete": {
          "operationId": "ChatController_delete",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "id": "c1",
                      "ok": true
                    }
                  }
                }
              },
              "description": "Delete conversation"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Conversation not found"
                      }
                    }
                  }
                }
              },
              "description": "Conversation not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:admin"
          ]
        },
        "get": {
          "operationId": "ChatController_getConversation",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Get a conversation with messages"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "chat:use"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Conversation not found"
                      }
                    }
                  }
                }
              },
              "description": "Conversation not found"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        },
        "patch": {
          "operationId": "ChatController_rename",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "id": "c1",
                      "ok": true,
                      "title": "New Title"
                    }
                  }
                }
              },
              "description": "Rename conversation"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "title required"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Conversation not found"
                      }
                    }
                  }
                }
              },
              "description": "Conversation not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:admin"
          ]
        }
      },
      "/chat/{id}/stream": {
        "get": {
          "operationId": "ChatController_streamGet",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "text/event-stream": {
                  "examples": {
                    "citations": {
                      "value": "data: {\"citations\":[{\"documentId\":\"11111111-1111-4111-8111-111111111111\"}]}\n\n"
                    },
                    "done": {
                      "value": "data: {\"done\":true,\"message\":\"[DONE]\"}\n\n"
                    },
                    "error": {
                      "value": "data: {\"error\":{\"code\":\"upstream-failed\",\"message\":\"Simulated upstream model failure\"},\"done\":true}\n\n"
                    },
                    "meta": {
                      "value": "data: {\"meta\":{\"chat_model_enabled\":true,\"google_key\":true}}\n\n"
                    },
                    "summary": {
                      "value": "data: {\"summary\":true,\"token_count\":5,\"citations_count\":2}\n\n"
                    },
                    "token": {
                      "value": "data: {\"message\":\"token-0\",\"index\":0,\"streaming\":true}\n\n"
                    }
                  },
                  "schema": {
                    "oneOf": [
                      {
                        "$ref": "#/components/schemas/GetChatStreamMetaFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamTokenFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamCitationsFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamSummaryFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamDoneFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamErrorFrame"
                      }
                    ]
                  }
                }
              },
              "description": "Chat streaming endpoint (SSE). Emits a sequence of JSON frames each prefixed by \"data: \"."
            },
            "400": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "x-project-id header required"
                      }
                    }
                  }
                }
              },
              "description": "Missing project header"
            },
            "404": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Conversation not found"
                      }
                    }
                  }
                }
              },
              "description": "Conversation not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        }
      },
      "/chunks": {
        "get": {
          "operationId": "ChunksController_list",
          "parameters": [
            {
              "description": "Filter by document UUID",
              "in": "query",
              "name": "documentId",
              "required": false,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/ChunkDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": "List chunks"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid filter"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chunks"
          ],
          "x-required-scopes": [
            "documents:read"
          ]
        }
      },
      "/documents": {
        "get": {
          "operationId": "DocumentsController_list",
          "parameters": [
            {
              "in": "query",
              "name": "limit",
              "required": false,
              "schema": {
                "default": 100,
                "maximum": 500,
                "minimum": 1,
                "type": "number"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/DocumentDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": "List ingested documents",
              "headers": {
                "x-next-cursor": {
                  "description": "Base64 cursor for next page",
                  "schema": {
                    "type": "string"
                  }
                }
              }
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid filter"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Documents"
          ],
          "x-required-scopes": [
            "documents:read"
          ]
        },
        "post": {
          "operationId": "DocumentsController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "content": {
                      "type": "string"
                    },
                    "filename": {
                      "type": "string"
                    },
                    "projectId": {
                      "format": "uuid",
                      "type": "string"
                    }
                  }
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/DocumentDto"
                  }
                }
              },
              "description": "Created document"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:write"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Documents"
          ],
          "x-required-scopes": [
            "documents:write"
          ]
        }
      },
      "/documents/{id}": {
        "delete": {
          "operationId": "DocumentsController_delete",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Documents"
          ],
          "x-required-scopes": [
            "documents:delete"
          ]
        },
        "get": {
          "operationId": "DocumentsController_get",
          "parameters": [
            {
              "description": "Document UUID",
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/DocumentDto"
                  }
                }
              },
              "description": "Get a document"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid id"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Documents"
          ],
          "x-required-scopes": [
            "documents:read"
          ]
        }
      },
      "/graph/objects": {
        "post": {
          "operationId": "GraphObjectsController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateGraphObjectDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "description": "Created"
            },
            "400": {
              "description": "Validation error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Create a graph object (initial version)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/objects/search": {
        "get": {
          "operationId": "GraphObjectsController_searchObjects",
          "parameters": [
            {
              "in": "query",
              "name": "type",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "key",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "label",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Search graph objects (basic filters)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/objects/{id}": {
        "delete": {
          "operationId": "GraphObjectsController_deleteObject",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Soft delete (tombstone) an object (creates new version with deleted_at)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        },
        "get": {
          "operationId": "GraphObjectsController_get",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            },
            "404": {
              "description": "Not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Get latest version of a graph object",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        },
        "patch": {
          "operationId": "GraphObjectsController_patch",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PatchGraphObjectDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": "Version created"
            },
            "400": {
              "description": "No effective change"
            },
            "404": {
              "description": "Not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Patch (create new version) of a graph object",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/objects/{id}/edges": {
        "get": {
          "operationId": "GraphObjectsController_edges",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "direction",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "List relationships adjacent to an object",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/objects/{id}/history": {
        "get": {
          "operationId": "GraphObjectsController_history",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ObjectHistoryResponseDto"
                  }
                }
              },
              "description": ""
            },
            "404": {
              "description": "Not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "List version history for a graph object",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/objects/{id}/restore": {
        "post": {
          "operationId": "GraphObjectsController_restoreObject",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Restored (new version created)"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Restore a soft-deleted object (creates new version clearing deleted_at)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/relationships": {
        "post": {
          "operationId": "GraphObjectsController_createRel",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateGraphRelationshipDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Create a relationship (initial version) or new version if properties changed",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/relationships/search": {
        "get": {
          "operationId": "GraphObjectsController_searchRels",
          "parameters": [
            {
              "in": "query",
              "name": "type",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "src_id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "dst_id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Search relationships (basic filters)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/relationships/{id}": {
        "delete": {
          "operationId": "GraphObjectsController_deleteRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Soft delete a relationship (tombstone version)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        },
        "get": {
          "operationId": "GraphObjectsController_getRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Get relationship by id",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        },
        "patch": {
          "operationId": "GraphObjectsController_patchRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PatchGraphRelationshipDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Patch (create new version) of a relationship (only head version allowed)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/relationships/{id}/history": {
        "get": {
          "operationId": "GraphObjectsController_historyRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RelationshipHistoryResponseDto"
                  }
                }
              },
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "List version history for a relationship",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/relationships/{id}/restore": {
        "post": {
          "operationId": "GraphObjectsController_restoreRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Restored (new version created)"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Restore a soft-deleted relationship",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/search": {
        "post": {
          "operationId": "GraphSearchController_search",
          "parameters": [
            {
              "in": "query",
              "name": "debug",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GraphSearchRequestDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/GraphSearchResponseDto"
                  }
                }
              },
              "description": "Graph hybrid search results (prototype)"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "graph:search:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Missing required scope (e.g., debug scope)"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:search:read"
          ]
        }
      },
      "/graph/traverse": {
        "post": {
          "operationId": "GraphObjectsController_traverse",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TraverseGraphDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Traverse the graph from one or more root object ids (bounded BFS)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/health": {
        "get": {
          "operationId": "HealthController_get",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "db": "up",
                      "model": "gemini-pro",
                      "ok": true
                    }
                  }
                }
              },
              "description": "Health probe"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Health"
          ]
        }
      },
      "/ingest/upload": {
        "post": {
          "operationId": "IngestionController_upload",
          "parameters": [],
          "requestBody": {
            "content": {
              "multipart/form-data": {
                "schema": {
                  "$ref": "#/components/schemas/IngestionUploadDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "alreadyExists": false,
                      "chunks": 12,
                      "documentId": "11111111-2222-3333-4444-555555555555"
                    }
                  }
                }
              },
              "description": "Upload a file for ingestion"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "validation-failed",
                        "details": {
                          "filename": [
                            "must be a string"
                          ]
                        },
                        "message": "Validation failed"
                      }
                    }
                  }
                }
              },
              "description": "Invalid upload payload"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:write"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Ingestion"
          ],
          "x-required-scopes": [
            "documents:write"
          ]
        }
      },
      "/ingest/url": {
        "post": {
          "operationId": "IngestionController_ingestUrl",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IngestionUrlDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "alreadyExists": false,
                      "chunks": 8,
                      "documentId": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"
                    }
                  }
                }
              },
              "description": "Ingest a remote URL"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "validation-failed",
                        "details": {
                          "url": [
                            "must be an URL address"
                          ]
                        },
                        "message": "Validation failed"
                      }
                    }
                  }
                }
              },
              "description": "Invalid URL payload"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:write"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Ingestion"
          ],
          "x-required-scopes": [
            "documents:write"
          ]
        }
      },
      "/invites": {
        "post": {
          "operationId": "InvitesController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateInviteDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "x-required-scopes": [
            "org:invite:create",
            "project:invite:create"
          ]
        }
      },
      "/invites/accept": {
        "post": {
          "operationId": "InvitesController_accept",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AcceptInviteDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "x-required-scopes": [
            "org:read"
          ]
        }
      },
      "/orgs": {
        "get": {
          "operationId": "OrgsController_list",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/OrgDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": "List organizations"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid filter"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Orgs"
          ]
        },
        "post": {
          "operationId": "OrgsController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateOrgDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/OrgDto"
                  }
                }
              },
              "description": "Organization created (users may have at most 10 orgs)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "validation-failed",
                        "details": {
                          "name": [
                            "must be a string"
                          ]
                        },
                        "message": "Validation failed"
                      }
                    }
                  }
                }
              },
              "description": "Invalid body"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "409": {
              "content": {
                "application/json": {
                  "schema": {
                    "oneOf": [
                      {
                        "example": {
                          "error": {
                            "code": "conflict",
                            "message": "Organization limit reached (10)"
                          }
                        }
                      },
                      {
                        "example": {
                          "error": {
                            "code": "conflict",
                            "details": {
                              "name": [
                                "already exists"
                              ]
                            },
                            "message": "Organization name already exists"
                          }
                        }
                      }
                    ]
                  }
                }
              },
              "description": "Organization limit reached or duplicate name"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Orgs"
          ]
        }
      },
      "/orgs/{id}": {
        "delete": {
          "operationId": "OrgsController_delete",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Organization deleted (projects, documents, chunks, conversations cascade)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Org not found"
                      }
                    }
                  }
                }
              },
              "description": "Org not found"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Orgs"
          ]
        },
        "get": {
          "operationId": "OrgsController_getOne",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/OrgDto"
                  }
                }
              },
              "description": "Get an organization"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Org not found"
                      }
                    }
                  }
                }
              },
              "description": "Org not found"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Orgs"
          ]
        }
      },
      "/projects": {
        "get": {
          "operationId": "ProjectsController_list",
          "parameters": [
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "description": "Filter projects by organization id (must be explicit elsewhere when creating projects)",
              "in": "query",
              "name": "orgId",
              "required": false,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/ProjectDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": "List projects (must create at least one before ingesting documents)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid filter"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "project:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Projects"
          ],
          "x-required-scopes": [
            "project:read"
          ]
        },
        "post": {
          "operationId": "ProjectsController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateProjectDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ProjectDto"
                  }
                }
              },
              "description": "Project created"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "duplicate",
                        "message": "Project with this name exists in org"
                      }
                    }
                  }
                }
              },
              "description": "Validation / duplicate / org errors"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "org:project:create"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Projects"
          ],
          "x-required-scopes": [
            "org:project:create"
          ]
        }
      },
      "/projects/{id}": {
        "delete": {
          "operationId": "ProjectsController_delete",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "status": "deleted"
                    }
                  }
                }
              },
              "description": "Deleted project"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid id"
                      }
                    }
                  }
                }
              },
              "description": "Invalid id"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "org:project:delete"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Projects"
          ],
          "x-required-scopes": [
            "org:project:delete"
          ]
        }
      },
      "/search": {
        "get": {
          "operationId": "SearchController_search",
          "parameters": [
            {
              "description": "Query string",
              "in": "query",
              "name": "q",
              "required": true,
              "schema": {
                "example": "vector index design",
                "type": "string"
              }
            },
            {
              "description": "Result limit (1..50)",
              "in": "query",
              "name": "limit",
              "required": false,
              "schema": {
                "default": 10,
                "maximum": 50,
                "minimum": 1,
                "type": "number"
              }
            },
            {
              "in": "query",
              "name": "mode",
              "required": false,
              "schema": {
                "default": "hybrid",
                "enum": [
                  "hybrid",
                  "lexical",
                  "vector"
                ],
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/SearchResponseDto"
                  }
                }
              },
              "description": "Hybrid / lexical / vector search over chunks"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "validation-failed",
                        "details": {
                          "q": [
                            "must be longer than or equal to 1 characters"
                          ]
                        },
                        "message": "Validation failed"
                      }
                    }
                  }
                }
              },
              "description": "Validation failed"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Search"
          ],
          "x-required-scopes": [
            "documents:read"
          ]
        }
      },
      "/settings": {
        "get": {
          "operationId": "SettingsController_list",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": [
                      {
                        "key": "theme",
                        "value": "dark"
                      }
                    ]
                  }
                }
              },
              "description": "List settings (placeholder)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Settings"
          ]
        }
      },
      "/settings/{key}": {
        "get": {
          "operationId": "SettingsController_getOne",
          "parameters": [
            {
              "in": "path",
              "name": "key",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "key": "theme",
                      "value": "dark"
                    }
                  }
                }
              },
              "description": "Get a single setting (placeholder)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Setting not found"
                      }
                    }
                  }
                }
              },
              "description": "Setting not found"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Settings"
          ]
        }
      },
      "/user/profile": {
        "get": {
          "operationId": "UserProfileController_getSelf",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/UserProfileDto"
                  }
                }
              },
              "description": ""
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        },
        "put": {
          "operationId": "UserProfileController_updateSelf",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateUserProfileDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/UserProfileDto"
                  }
                }
              },
              "description": ""
            },
            "400": {
              "description": "Validation error"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        }
      },
      "/user/profile/emails": {
        "get": {
          "operationId": "UserProfileController_listEmails",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/AlternativeEmailDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": ""
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        },
        "post": {
          "operationId": "UserProfileController_addEmail",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddAlternativeEmailDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/AlternativeEmailDto"
                  }
                }
              },
              "description": ""
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        }
      },
      "/user/profile/emails/{email}": {
        "delete": {
          "operationId": "UserProfileController_removeEmail",
          "parameters": [
            {
              "in": "path",
              "name": "email",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "status": "deleted"
                    }
                  }
                }
              },
              "description": ""
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        }
      }
    },
    "servers": [],
    "tags": [],
    "x-tagGroups": [
      {
        "name": "Health & Auth",
        "tags": [
          "Health",
          "Auth"
        ]
      },
      {
        "name": "Organizations & Projects",
        "tags": [
          "Orgs",
          "Projects"
        ]
      },
      {
        "name": "Configuration",
        "tags": [
          "Settings"
        ]
      },
      {
        "name": "Content & Ingestion",
        "tags": [
          "Ingestion",
          "Documents",
          "Chunks"
        ]
      },
      {
        "name": "Search",
        "tags": [
          "Search"
        ]
      },
      {
        "name": "Chat",
        "tags": [
          "Chat"
        ]
      },
      {
        "name": "Knowledge Graph",
        "tags": [
          "Graph"
        ]
      }
    ]
  },
  "current": {
    "components": {
      "schemas": {
        "AcceptInviteDto": {
          "properties": {},
          "type": "object"
        },
        "AddAlternativeEmailDto": {
          "properties": {},
          "type": "object"
        },
        "AlternativeEmailDto": {
          "properties": {
            "createdAt": {
              "description": "ISO timestamp created",
              "type": "string"
            },
            "email": {
              "description": "Email address (lowercased canonical form)",
              "type": "string"
            },
            "verified": {
              "description": "Verification status",
              "type": "boolean"
            }
          },
          "required": [
            "email",
            "verified",
            "createdAt"
          ],
          "type": "object"
        },
        "ChatRequestDto": {
          "properties": {},
          "type": "object"
        },
        "ChatStreamDoneEvent": {
          "properties": {},
          "type": "object"
        },
        "ChatStreamErrorEvent": {
          "properties": {},
          "type": "object"
        },
        "ChatStreamMetaEvent": {
          "properties": {},
          "type": "object"
        },
        "ChatStreamTokenEvent": {
          "properties": {},
          "type": "object"
        },
        "ChunkDto": {
          "properties": {
            "documentId": {
              "example": "doc_1",
              "type": "string"
            },
            "documentTitle": {
              "description": "Best-effort document title derived from filename or source URL",
              "example": "User Guide.pdf",
              "type": "string"
            },
            "hasEmbedding": {
              "description": "Whether an embedding vector exists for this chunk",
              "example": true,
              "type": "boolean"
            },
            "id": {
              "example": "chunk_1",
              "type": "string"
            },
            "index": {
              "description": "Zero-based index of chunk inside the document",
              "example": 0,
              "type": "number"
            },
            "size": {
              "description": "Size in characters",
              "example": 512,
              "type": "number"
            },
            "text": {
              "description": "Plaintext content of the chunk (may be truncated client-side)",
              "example": "This is the chunk text...",
              "type": "string"
            }
          },
          "required": [
            "id",
            "documentId",
            "documentTitle",
            "index",
            "size",
            "hasEmbedding",
            "text"
          ],
          "type": "object"
        },
        "CitationDto": {
          "properties": {},
          "type": "object"
        },
        "CreateGraphObjectDto": {
          "properties": {},
          "type": "object"
        },
        "CreateGraphRelationshipDto": {
          "properties": {},
          "type": "object"
        },
        "CreateInviteDto": {
          "properties": {},
          "type": "object"
        },
        "CreateOrgDto": {
          "properties": {},
          "type": "object"
        },
        "CreateProjectDto": {
          "properties": {
            "name": {
              "description": "Project name (unique per organization, case-insensitive)",
              "example": "My Project",
              "type": "string"
            },
            "orgId": {
              "description": "Organization UUID (must belong to caller; no implicit default org)",
              "type": "string"
            }
          },
          "required": [
            "name",
            "orgId"
          ],
          "type": "object"
        },
        "DocumentDto": {
          "properties": {
            "chunks": {
              "description": "Number of chunks associated with this document",
              "example": 12,
              "type": "number"
            },
            "createdAt": {
              "example": "2025-01-01T00:00:00.000Z",
              "type": "string"
            },
            "id": {
              "example": "doc_1",
              "type": "string"
            },
            "mimeType": {
              "example": "text/markdown",
              "nullable": true,
              "type": "object"
            },
            "name": {
              "example": "Spec.md",
              "type": "string"
            },
            "orgId": {
              "example": "11111111-2222-3333-4444-555555555555",
              "nullable": true,
              "type": "string"
            },
            "projectId": {
              "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
              "nullable": true,
              "type": "string"
            },
            "sourceUrl": {
              "example": "https://example.com/file.pdf",
              "nullable": true,
              "type": "object"
            },
            "updatedAt": {
              "example": "2025-01-01T00:05:00.000Z",
              "type": "string"
            }
          },
          "required": [
            "id",
            "name",
            "createdAt",
            "updatedAt",
            "chunks"
          ],
          "type": "object"
        },
        "GetChatStreamCitationsFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamDoneFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamErrorFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamMetaFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamSummaryFrame": {
          "properties": {},
          "type": "object"
        },
        "GetChatStreamTokenFrame": {
          "properties": {},
          "type": "object"
        },
        "GraphSearchCitationDto": {
          "properties": {
            "confidence": {
              "example": 0.82,
              "type": "number"
            },
            "source_object_id": {
              "example": "b3d52c50-5101-4c6c-8d30-4a1f0f7645cb",
              "type": "string"
            },
            "span": {
              "example": "Decision depends on consistent flag rollout",
              "type": "string"
            }
          },
          "required": [
            "span",
            "source_object_id",
            "confidence"
          ],
          "type": "object"
        },
        "GraphSearchDebugDto": {
          "properties": {
            "edge_samples": {
              "example": [
                {
                  "depth": 1,
                  "edge_score": 0.63,
                  "hub_damping": 0.43,
                  "relation": "decides"
                }
              ],
              "items": {
                "type": "object"
              },
              "type": "array"
            },
            "feature_flags": {
              "example": {
                "citations": false,
                "paths": true,
                "rerank": true
              },
              "type": "object"
            },
            "gain_rejections": {
              "example": 5,
              "type": "number"
            },
            "marginal_gain_min": {
              "example": 0.02,
              "type": "number"
            },
            "normalization": {
              "example": {
                "lexical": {
                  "mean": 0.42,
                  "std": 0.11
                }
              },
              "type": "object"
            }
          },
          "required": [
            "normalization",
            "gain_rejections",
            "marginal_gain_min",
            "edge_samples",
            "feature_flags"
          ],
          "type": "object"
        },
        "GraphSearchDocumentFusionDto": {
          "properties": {
            "enabled": {
              "default": false,
              "type": "boolean"
            },
            "mode": {
              "default": "blend",
              "enum": [
                "blend",
                "rrf",
                "sequential"
              ],
              "type": "string"
            },
            "topK": {
              "default": 8,
              "maximum": 50,
              "minimum": 1,
              "type": "number"
            },
            "weight": {
              "default": 0.35,
              "maximum": 1,
              "minimum": 0,
              "type": "number"
            }
          },
          "type": "object"
        },
        "GraphSearchEmbeddingModelMetaDto": {
          "properties": {
            "coverage_pct": {
              "example": 91.4,
              "type": "number"
            },
            "model": {
              "example": "text-embedding-3-large",
              "type": "string"
            },
            "version": {
              "example": 2,
              "type": "number"
            }
          },
          "required": [
            "model",
            "version",
            "coverage_pct"
          ],
          "type": "object"
        },
        "GraphSearchExpansionMetaDto": {
          "properties": {
            "hub_degree": {
              "example": 1342,
              "type": "number"
            },
            "hub_sampled": {
              "example": true,
              "type": "boolean"
            },
            "neighbors": {
              "example": 42,
              "type": "number"
            }
          },
          "required": [
            "neighbors",
            "hub_sampled"
          ],
          "type": "object"
        },
        "GraphSearchFiltersDto": {
          "properties": {
            "excludeObjectTypes": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "labelsAny": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "objectTypes": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "updatedAfter": {
              "example": "2025-09-01T00:00:00Z",
              "type": "string"
            },
            "updatedBefore": {
              "example": "2025-09-20T00:00:00Z",
              "type": "string"
            }
          },
          "type": "object"
        },
        "GraphSearchItemDto": {
          "properties": {
            "canonical_id": {
              "example": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd",
              "type": "string"
            },
            "citations": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchCitationDto"
              },
              "type": "array"
            },
            "cursor": {
              "example": "eyJzY29yZSI6MC44NzEyMywiaWQiOiJkb2MtMSJ9",
              "type": "string"
            },
            "explanation": {
              "example": "High lexical match on ...",
              "type": "string"
            },
            "fields": {
              "example": {
                "status": "active",
                "title": "Adopt Feature Flagging",
                "type": "Decision"
              },
              "type": "object"
            },
            "object_id": {
              "example": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd",
              "type": "string"
            },
            "rank": {
              "example": 1,
              "type": "number"
            },
            "reasons": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchReasonDto"
              },
              "type": "array"
            },
            "role": {
              "enum": [
                "primary",
                "neighbor",
                "reference",
                "document_chunk"
              ],
              "type": "string"
            },
            "score": {
              "example": 0.87123,
              "type": "number"
            },
            "truncated_fields": {
              "example": [
                "description"
              ],
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          "required": [
            "object_id",
            "canonical_id",
            "score",
            "rank",
            "role",
            "fields",
            "reasons"
          ],
          "type": "object"
        },
        "GraphSearchMetaDto": {
          "properties": {
            "channels": {
              "example": [
                "lexical",
                "vector"
              ],
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "elapsed_ms": {
              "example": 92,
              "type": "number"
            },
            "embedding_model": {
              "$ref": "#/components/schemas/GraphSearchEmbeddingModelMetaDto"
            },
            "expansion": {
              "$ref": "#/components/schemas/GraphSearchExpansionMetaDto"
            },
            "fusion": {
              "example": "weighted_sum:v2",
              "type": "string"
            },
            "hasNext": {
              "example": true,
              "type": "boolean"
            },
            "hasPrev": {
              "example": false,
              "type": "boolean"
            },
            "lexical_considered": {
              "example": 100,
              "type": "number"
            },
            "neighbor_expanded": {
              "example": 47,
              "type": "number"
            },
            "nextCursor": {
              "example": null,
              "type": "object"
            },
            "normalization_version": {
              "example": "zscore_v1",
              "type": "string"
            },
            "prevCursor": {
              "example": null,
              "type": "object"
            },
            "request": {
              "$ref": "#/components/schemas/GraphSearchRequestMetaDto"
            },
            "rerank": {
              "$ref": "#/components/schemas/GraphSearchRerankMetaDto"
            },
            "skipped_unembedded": {
              "example": 12,
              "type": "number"
            },
            "token_budget": {
              "example": 3500,
              "type": "number"
            },
            "token_estimate": {
              "example": 1450,
              "type": "number"
            },
            "total_estimate": {
              "description": "Total size of fused candidate pool prior to pagination (may be less than lexical_considered+vector_considered due to overlaps).",
              "example": 8,
              "type": "number"
            },
            "truncation_notice": {
              "example": false,
              "type": "boolean"
            },
            "vector_considered": {
              "example": 100,
              "type": "number"
            },
            "warnings": {
              "example": [
                "embedding_version_backlog"
              ],
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          "required": [
            "channels",
            "fusion",
            "normalization_version",
            "lexical_considered",
            "vector_considered",
            "skipped_unembedded",
            "neighbor_expanded",
            "token_estimate",
            "token_budget",
            "truncation_notice",
            "embedding_model",
            "rerank",
            "expansion",
            "request",
            "elapsed_ms",
            "total_estimate",
            "hasNext",
            "hasPrev"
          ],
          "type": "object"
        },
        "GraphSearchNeighborDto": {
          "properties": {
            "edgeTypes": {
              "example": [
                "decides",
                "attended_by"
              ],
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "globalLimit": {
              "default": 50,
              "minimum": 0,
              "type": "number"
            },
            "maxDepth": {
              "default": 1,
              "minimum": 0,
              "type": "number"
            },
            "perPrimaryLimit": {
              "default": 3,
              "minimum": 0,
              "type": "number"
            }
          },
          "type": "object"
        },
        "GraphSearchPaginationDto": {
          "properties": {
            "cursor": {
              "example": null,
              "type": "object"
            },
            "limit": {
              "default": 40,
              "maximum": 100,
              "minimum": 1,
              "type": "number"
            }
          },
          "type": "object"
        },
        "GraphSearchPathSummaryDto": {
          "properties": {
            "path_id": {
              "example": "e7b7ff6e-ef5f-4b55-9580-5d3b45d0a123",
              "type": "string"
            },
            "reasons": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchReasonDto"
              },
              "type": "array"
            },
            "summary": {
              "example": "Meeting X decided Decision Y",
              "type": "string"
            }
          },
          "required": [
            "path_id",
            "summary",
            "reasons"
          ],
          "type": "object"
        },
        "GraphSearchReasonDto": {
          "properties": {
            "channel": {
              "enum": [
                "lexical",
                "vector",
                "neighbor_boost",
                "doc"
              ],
              "type": "string"
            },
            "score": {
              "example": 0.42,
              "type": "number"
            }
          },
          "required": [
            "channel",
            "score"
          ],
          "type": "object"
        },
        "GraphSearchRequestDto": {
          "properties": {
            "channels": {
              "items": {
                "enum": [
                  "lexical",
                  "vector",
                  "neighbor_boost",
                  "doc"
                ],
                "type": "string"
              },
              "type": "array"
            },
            "documentFusion": {
              "$ref": "#/components/schemas/GraphSearchDocumentFusionDto"
            },
            "experimental": {
              "description": "Experimental feature flags container",
              "type": "object"
            },
            "filters": {
              "$ref": "#/components/schemas/GraphSearchFiltersDto"
            },
            "includeCitations": {
              "default": false,
              "type": "boolean"
            },
            "includeDebug": {
              "default": false,
              "type": "boolean"
            },
            "includePathSummaries": {
              "default": true,
              "type": "boolean"
            },
            "intentOverride": {
              "enum": [
                "explain",
                "locate_config",
                "debug_error",
                "roadmap"
              ],
              "example": "explain",
              "type": "string"
            },
            "limit": {
              "default": 40,
              "maximum": 100,
              "minimum": 1,
              "type": "number"
            },
            "maxTokenBudget": {
              "default": 3500,
              "maximum": 6000,
              "minimum": 800,
              "type": "number"
            },
            "neighbor": {
              "$ref": "#/components/schemas/GraphSearchNeighborDto"
            },
            "pagination": {
              "$ref": "#/components/schemas/GraphSearchPaginationDto"
            },
            "query": {
              "description": "Search query",
              "maxLength": 800,
              "type": "string"
            },
            "rerank": {
              "default": null,
              "type": "object"
            }
          },
          "required": [
            "query"
          ],
          "type": "object"
        },
        "GraphSearchRequestMetaDto": {
          "properties": {
            "channels": {
              "example": [
                "lexical",
                "vector"
              ],
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "limit": {
              "description": "Effective page size after server cap",
              "example": 40,
              "type": "number"
            },
            "requested_limit": {
              "description": "Original client requested limit before clamping",
              "example": 100,
              "type": "number"
            },
            "rerank": {
              "example": false,
              "type": "object"
            }
          },
          "required": [
            "limit"
          ],
          "type": "object"
        },
        "GraphSearchRerankMetaDto": {
          "properties": {
            "applied": {
              "example": true,
              "type": "boolean"
            },
            "latency_ms": {
              "example": 42,
              "type": "number"
            },
            "model": {
              "example": "mini-cross-encoder-v1",
              "type": "string"
            },
            "pool": {
              "example": 60,
              "type": "number"
            },
            "timeout": {
              "example": false,
              "type": "boolean"
            }
          },
          "required": [
            "applied"
          ],
          "type": "object"
        },
        "GraphSearchResponseDto": {
          "properties": {
            "debug": {
              "$ref": "#/components/schemas/GraphSearchDebugDto"
            },
            "intent": {
              "enum": [
                "explain",
                "locate_config",
                "debug_error",
                "roadmap"
              ],
              "type": "string"
            },
            "items": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchItemDto"
              },
              "type": "array"
            },
            "meta": {
              "$ref": "#/components/schemas/GraphSearchMetaDto"
            },
            "path_summaries": {
              "items": {
                "$ref": "#/components/schemas/GraphSearchPathSummaryDto"
              },
              "type": "array"
            },
            "query": {
              "example": "original query text",
              "type": "string"
            }
          },
          "required": [
            "query",
            "items",
            "meta"
          ],
          "type": "object"
        },
        "IngestionUploadDto": {
          "properties": {
            "filename": {
              "description": "Original filename (optional, will fallback to uploaded file name)",
              "example": "spec.md",
              "type": "string"
            },
            "mimeType": {
              "description": "Optional MIME type",
              "example": "text/markdown",
              "type": "string"
            },
            "orgId": {
              "description": "Optional organisation UUID to associate the document with",
              "example": "11111111-2222-3333-4444-555555555555",
              "type": "string"
            },
            "projectId": {
              "description": "Project UUID that this document belongs to (required)",
              "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
              "type": "string"
            }
          },
          "required": [
            "projectId"
          ],
          "type": "object"
        },
        "IngestionUrlDto": {
          "properties": {
            "orgId": {
              "description": "Optional organisation UUID to associate the document with",
              "example": "11111111-2222-3333-4444-555555555555",
              "type": "string"
            },
            "projectId": {
              "description": "Project UUID that this document belongs to (required)",
              "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
              "type": "string"
            },
            "url": {
              "description": "Remote URL to ingest",
              "example": "https://example.com/spec.md",
              "type": "string"
            }
          },
          "required": [
            "url",
            "projectId"
          ],
          "type": "object"
        },
        "ObjectHistoryResponseDto": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/VersionedObjectDto"
              },
              "type": "array"
            },
            "next_cursor": {
              "description": "Present when more pages available; pass as cursor query param",
              "type": "string"
            }
          },
          "required": [
            "items"
          ],
          "type": "object"
        },
        "OrgDto": {
          "properties": {
            "id": {
              "example": "org_1",
              "type": "string"
            },
            "name": {
              "example": "Example Org",
              "type": "string"
            }
          },
          "required": [
            "id",
            "name"
          ],
          "type": "object"
        },
        "PatchGraphObjectDto": {
          "properties": {},
          "type": "object"
        },
        "PatchGraphRelationshipDto": {
          "properties": {},
          "type": "object"
        },
        "ProjectDto": {
          "properties": {
            "id": {
              "example": "proj_1",
              "type": "string"
            },
            "name": {
              "example": "Demo Project",
              "type": "string"
            },
            "orgId": {
              "example": "org_1",
              "type": "string"
            }
          },
          "required": [
            "id",
            "name",
            "orgId"
          ],
          "type": "object"
        },
        "RelationshipHistoryResponseDto": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/VersionedRelationshipDto"
              },
              "type": "array"
            },
            "next_cursor": {
              "description": "Present when more pages available; pass as cursor query param",
              "type": "string"
            }
          },
          "required": [
            "items"
          ],
          "type": "object"
        },
        "SearchResponseDto": {
          "properties": {
            "mode": {
              "enum": [
                "hybrid",
                "lexical",
                "vector"
              ],
              "type": "string"
            },
            "results": {
              "items": {
                "$ref": "#/components/schemas/SearchResultDto"
              },
              "type": "array"
            },
            "warning": {
              "example": "Embeddings unavailable; fell back to lexical.",
              "type": "string"
            }
          },
          "required": [
            "mode",
            "results"
          ],
          "type": "object"
        },
        "SearchResultDto": {
          "properties": {
            "id": {
              "example": "mock-1",
              "type": "string"
            },
            "score": {
              "example": 0.98,
              "type": "number"
            },
            "snippet": {
              "example": "Result snippet for \"foo\" (#1, mode=hybrid)",
              "type": "string"
            },
            "source": {
              "example": "source.doc#L10",
              "type": "string"
            }
          },
          "required": [
            "id",
            "snippet",
            "score"
          ],
          "type": "object"
        },
        "TraverseGraphDto": {
          "properties": {},
          "type": "object"
        },
        "UpdateUserProfileDto": {
          "properties": {},
          "type": "object"
        },
        "UserProfileDto": {
          "properties": {
            "avatarObjectKey": {
              "description": "Object storage key for avatar (if stored internally)",
              "type": "object"
            },
            "displayName": {
              "description": "Display name fallback (explicit) or derived (first + last)",
              "type": "object"
            },
            "firstName": {
              "type": "object"
            },
            "lastName": {
              "type": "object"
            },
            "phoneE164": {
              "description": "E.164 formatted phone number, leading + and digits",
              "type": "object"
            },
            "subjectId": {
              "description": "Canonical internal user id (subject id, from identity provider)",
              "format": "uuid",
              "type": "string"
            }
          },
          "required": [
            "subjectId"
          ],
          "type": "object"
        },
        "VersionedObjectDto": {
          "properties": {
            "canonical_id": {
              "type": "string"
            },
            "created_at": {
              "type": "string"
            },
            "id": {
              "type": "string"
            },
            "key": {
              "nullable": true,
              "type": "object"
            },
            "labels": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "org_id": {
              "nullable": true,
              "type": "object"
            },
            "project_id": {
              "nullable": true,
              "type": "object"
            },
            "properties": {
              "type": "object"
            },
            "supersedes_id": {
              "nullable": true,
              "type": "object"
            },
            "type": {
              "type": "string"
            },
            "version": {
              "type": "number"
            }
          },
          "required": [
            "id",
            "org_id",
            "project_id",
            "canonical_id",
            "supersedes_id",
            "version",
            "type",
            "key",
            "properties",
            "labels",
            "created_at"
          ],
          "type": "object"
        },
        "VersionedRelationshipDto": {
          "properties": {
            "canonical_id": {
              "type": "string"
            },
            "created_at": {
              "type": "string"
            },
            "dst_id": {
              "type": "string"
            },
            "id": {
              "type": "string"
            },
            "properties": {
              "type": "object"
            },
            "src_id": {
              "type": "string"
            },
            "supersedes_id": {
              "nullable": true,
              "type": "object"
            },
            "type": {
              "type": "string"
            },
            "valid_from": {
              "nullable": true,
              "type": "object"
            },
            "valid_to": {
              "nullable": true,
              "type": "object"
            },
            "version": {
              "type": "number"
            },
            "weight": {
              "nullable": true,
              "type": "object"
            }
          },
          "required": [
            "id",
            "canonical_id",
            "supersedes_id",
            "version",
            "type",
            "src_id",
            "dst_id",
            "properties",
            "created_at",
            "weight",
            "valid_from",
            "valid_to"
          ],
          "type": "object"
        }
      },
      "securitySchemes": {
        "bearer": {
          "bearerFormat": "JWT",
          "scheme": "bearer",
          "type": "http"
        }
      }
    },
    "info": {
      "contact": {},
      "description": "Generated OpenAPI spec (code-first). All protected operations include x-required-scopes and 403 examples with missing_scopes.",
      "title": "Spec Server API",
      "version": "0.2.0"
    },
    "openapi": "3.0.0",
    "paths": {
      "/auth/me": {
        "get": {
          "operationId": "AuthController_me",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "email": "demo@example.com",
                      "sub": "mock-user-id"
                    }
                  }
                }
              },
              "description": "Return current authenticated user (mock)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Unauthorized"
                      }
                    }
                  }
                }
              },
              "description": "Missing or invalid bearer token"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "org:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Insufficient scope"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Auth"
          ],
          "x-required-scopes": [
            "org:read"
          ]
        }
      },
      "/chat/conversations": {
        "get": {
          "operationId": "ChatController_listConversations",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": [
                      {
                        "id": "11111111-1111-4111-8111-111111111111",
                        "is_private": false,
                        "title": "2025-01-01 — Hello world"
                      }
                    ]
                  }
                }
              },
              "description": "List chat conversations"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "chat:use"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        },
        "post": {
          "operationId": "ChatController_createConversation",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "conversationId": "11111111-1111-4111-8111-111111111111",
                      "id": "11111111-1111-4111-8111-111111111111",
                      "title": "2025-01-01 — New Conversation"
                    }
                  }
                }
              },
              "description": "Create a new conversation (201)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "message required"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        }
      },
      "/chat/stream": {
        "post": {
          "operationId": "ChatController_streamPost",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatRequestDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "text/event-stream": {
                  "examples": {
                    "done": {
                      "value": "data: {\"type\":\"done\"}\n\n"
                    },
                    "error": {
                      "value": "data: {\"type\":\"error\",\"error\":\"model key missing\"}\n\n"
                    },
                    "meta": {
                      "value": "data: {\"type\":\"meta\",\"conversationId\":\"11111111-1111-4111-8111-111111111111\",\"citations\":[]}\n\n"
                    },
                    "token": {
                      "value": "data: {\"type\":\"token\",\"token\":\"Hello\"}\n\n"
                    }
                  },
                  "schema": {
                    "description": "Union of possible chat stream events (serialized per line as SSE frame).",
                    "oneOf": [
                      {
                        "$ref": "#/components/schemas/ChatStreamMetaEvent"
                      },
                      {
                        "$ref": "#/components/schemas/ChatStreamTokenEvent"
                      },
                      {
                        "$ref": "#/components/schemas/ChatStreamErrorEvent"
                      },
                      {
                        "$ref": "#/components/schemas/ChatStreamDoneEvent"
                      }
                    ]
                  }
                }
              },
              "description": "Chat streaming endpoint (SSE). Each line is an SSE data frame beginning with \"data: \", followed by one of the JSON event shapes."
            },
            "400": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "message required"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                },
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "chat:use"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        }
      },
      "/chat/{id}": {
        "delete": {
          "operationId": "ChatController_delete",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "id": "c1",
                      "ok": true
                    }
                  }
                }
              },
              "description": "Delete conversation"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Conversation not found"
                      }
                    }
                  }
                }
              },
              "description": "Conversation not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:admin"
          ]
        },
        "get": {
          "operationId": "ChatController_getConversation",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Get a conversation with messages"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "chat:use"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Conversation not found"
                      }
                    }
                  }
                }
              },
              "description": "Conversation not found"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        },
        "patch": {
          "operationId": "ChatController_rename",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "id": "c1",
                      "ok": true,
                      "title": "New Title"
                    }
                  }
                }
              },
              "description": "Rename conversation"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "title required"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Conversation not found"
                      }
                    }
                  }
                }
              },
              "description": "Conversation not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:admin"
          ]
        }
      },
      "/chat/{id}/stream": {
        "get": {
          "operationId": "ChatController_streamGet",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "text/event-stream": {
                  "examples": {
                    "citations": {
                      "value": "data: {\"citations\":[{\"documentId\":\"11111111-1111-4111-8111-111111111111\"}]}\n\n"
                    },
                    "done": {
                      "value": "data: {\"done\":true,\"message\":\"[DONE]\"}\n\n"
                    },
                    "error": {
                      "value": "data: {\"error\":{\"code\":\"upstream-failed\",\"message\":\"Simulated upstream model failure\"},\"done\":true}\n\n"
                    },
                    "meta": {
                      "value": "data: {\"meta\":{\"chat_model_enabled\":true,\"google_key\":true}}\n\n"
                    },
                    "summary": {
                      "value": "data: {\"summary\":true,\"token_count\":5,\"citations_count\":2}\n\n"
                    },
                    "token": {
                      "value": "data: {\"message\":\"token-0\",\"index\":0,\"streaming\":true}\n\n"
                    }
                  },
                  "schema": {
                    "oneOf": [
                      {
                        "$ref": "#/components/schemas/GetChatStreamMetaFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamTokenFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamCitationsFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamSummaryFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamDoneFrame"
                      },
                      {
                        "$ref": "#/components/schemas/GetChatStreamErrorFrame"
                      }
                    ]
                  }
                }
              },
              "description": "Chat streaming endpoint (SSE). Emits a sequence of JSON frames each prefixed by \"data: \"."
            },
            "400": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "x-project-id header required"
                      }
                    }
                  }
                }
              },
              "description": "Missing project header"
            },
            "404": {
              "content": {
                "text/event-stream": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Conversation not found"
                      }
                    }
                  }
                }
              },
              "description": "Conversation not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chat"
          ],
          "x-required-scopes": [
            "chat:use"
          ]
        }
      },
      "/chunks": {
        "get": {
          "operationId": "ChunksController_list",
          "parameters": [
            {
              "description": "Filter by document UUID",
              "in": "query",
              "name": "documentId",
              "required": false,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/ChunkDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": "List chunks"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid filter"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Chunks"
          ],
          "x-required-scopes": [
            "documents:read"
          ]
        }
      },
      "/documents": {
        "get": {
          "operationId": "DocumentsController_list",
          "parameters": [
            {
              "in": "query",
              "name": "limit",
              "required": false,
              "schema": {
                "default": 100,
                "maximum": 500,
                "minimum": 1,
                "type": "number"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/DocumentDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": "List ingested documents",
              "headers": {
                "x-next-cursor": {
                  "description": "Base64 cursor for next page",
                  "schema": {
                    "type": "string"
                  }
                }
              }
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid filter"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Documents"
          ],
          "x-required-scopes": [
            "documents:read"
          ]
        },
        "post": {
          "operationId": "DocumentsController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "content": {
                      "type": "string"
                    },
                    "filename": {
                      "type": "string"
                    },
                    "projectId": {
                      "format": "uuid",
                      "type": "string"
                    }
                  }
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/DocumentDto"
                  }
                }
              },
              "description": "Created document"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:write"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Documents"
          ],
          "x-required-scopes": [
            "documents:write"
          ]
        }
      },
      "/documents/{id}": {
        "delete": {
          "operationId": "DocumentsController_delete",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Documents"
          ],
          "x-required-scopes": [
            "documents:delete"
          ]
        },
        "get": {
          "operationId": "DocumentsController_get",
          "parameters": [
            {
              "description": "Document UUID",
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/DocumentDto"
                  }
                }
              },
              "description": "Get a document"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid id"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Documents"
          ],
          "x-required-scopes": [
            "documents:read"
          ]
        }
      },
      "/graph/objects": {
        "post": {
          "operationId": "GraphObjectsController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateGraphObjectDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "description": "Created"
            },
            "400": {
              "description": "Validation error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Create a graph object (initial version)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/objects/search": {
        "get": {
          "operationId": "GraphObjectsController_searchObjects",
          "parameters": [
            {
              "in": "query",
              "name": "type",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "key",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "label",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Search graph objects (basic filters)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/objects/{id}": {
        "delete": {
          "operationId": "GraphObjectsController_deleteObject",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Soft delete (tombstone) an object (creates new version with deleted_at)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        },
        "get": {
          "operationId": "GraphObjectsController_get",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            },
            "404": {
              "description": "Not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Get latest version of a graph object",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        },
        "patch": {
          "operationId": "GraphObjectsController_patch",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PatchGraphObjectDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": "Version created"
            },
            "400": {
              "description": "No effective change"
            },
            "404": {
              "description": "Not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Patch (create new version) of a graph object",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/objects/{id}/edges": {
        "get": {
          "operationId": "GraphObjectsController_edges",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "direction",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "List relationships adjacent to an object",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/objects/{id}/history": {
        "get": {
          "operationId": "GraphObjectsController_history",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ObjectHistoryResponseDto"
                  }
                }
              },
              "description": ""
            },
            "404": {
              "description": "Not found"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "List version history for a graph object",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/objects/{id}/restore": {
        "post": {
          "operationId": "GraphObjectsController_restoreObject",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Restored (new version created)"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Restore a soft-deleted object (creates new version clearing deleted_at)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/relationships": {
        "post": {
          "operationId": "GraphObjectsController_createRel",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateGraphRelationshipDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Create a relationship (initial version) or new version if properties changed",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/relationships/search": {
        "get": {
          "operationId": "GraphObjectsController_searchRels",
          "parameters": [
            {
              "in": "query",
              "name": "type",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "src_id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "dst_id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Search relationships (basic filters)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/relationships/{id}": {
        "delete": {
          "operationId": "GraphObjectsController_deleteRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Soft delete a relationship (tombstone version)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        },
        "get": {
          "operationId": "GraphObjectsController_getRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Get relationship by id",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        },
        "patch": {
          "operationId": "GraphObjectsController_patchRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PatchGraphRelationshipDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Patch (create new version) of a relationship (only head version allowed)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/relationships/{id}/history": {
        "get": {
          "operationId": "GraphObjectsController_historyRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "in": "query",
              "name": "cursor",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RelationshipHistoryResponseDto"
                  }
                }
              },
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "List version history for a relationship",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/graph/relationships/{id}/restore": {
        "post": {
          "operationId": "GraphObjectsController_restoreRel",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "201": {
              "description": "Restored (new version created)"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Restore a soft-deleted relationship",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:write"
          ]
        }
      },
      "/graph/search": {
        "post": {
          "operationId": "GraphSearchController_search",
          "parameters": [
            {
              "in": "query",
              "name": "debug",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GraphSearchRequestDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/GraphSearchResponseDto"
                  }
                }
              },
              "description": "Graph hybrid search results (prototype)"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "graph:search:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Missing required scope (e.g., debug scope)"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:search:read"
          ]
        }
      },
      "/graph/traverse": {
        "post": {
          "operationId": "GraphObjectsController_traverse",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TraverseGraphDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "summary": "Traverse the graph from one or more root object ids (bounded BFS)",
          "tags": [
            "Graph"
          ],
          "x-required-scopes": [
            "graph:read"
          ]
        }
      },
      "/health": {
        "get": {
          "operationId": "HealthController_get",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "db": "up",
                      "model": "gemini-pro",
                      "ok": true
                    }
                  }
                }
              },
              "description": "Health probe"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Health"
          ]
        }
      },
      "/ingest/upload": {
        "post": {
          "operationId": "IngestionController_upload",
          "parameters": [],
          "requestBody": {
            "content": {
              "multipart/form-data": {
                "schema": {
                  "$ref": "#/components/schemas/IngestionUploadDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "alreadyExists": false,
                      "chunks": 12,
                      "documentId": "11111111-2222-3333-4444-555555555555"
                    }
                  }
                }
              },
              "description": "Upload a file for ingestion"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "validation-failed",
                        "details": {
                          "filename": [
                            "must be a string"
                          ]
                        },
                        "message": "Validation failed"
                      }
                    }
                  }
                }
              },
              "description": "Invalid upload payload"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:write"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Ingestion"
          ],
          "x-required-scopes": [
            "documents:write"
          ]
        }
      },
      "/ingest/url": {
        "post": {
          "operationId": "IngestionController_ingestUrl",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IngestionUrlDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "alreadyExists": false,
                      "chunks": 8,
                      "documentId": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"
                    }
                  }
                }
              },
              "description": "Ingest a remote URL"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "validation-failed",
                        "details": {
                          "url": [
                            "must be an URL address"
                          ]
                        },
                        "message": "Validation failed"
                      }
                    }
                  }
                }
              },
              "description": "Invalid URL payload"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:write"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Ingestion"
          ],
          "x-required-scopes": [
            "documents:write"
          ]
        }
      },
      "/invites": {
        "post": {
          "operationId": "InvitesController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateInviteDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "x-required-scopes": [
            "org:invite:create",
            "project:invite:create"
          ]
        }
      },
      "/invites/accept": {
        "post": {
          "operationId": "InvitesController_accept",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AcceptInviteDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "description": ""
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "x-required-scopes": [
            "org:read"
          ]
        }
      },
      "/orgs": {
        "get": {
          "operationId": "OrgsController_list",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/OrgDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": "List organizations"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid filter"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Orgs"
          ]
        },
        "post": {
          "operationId": "OrgsController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateOrgDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/OrgDto"
                  }
                }
              },
              "description": "Organization created (users may have at most 10 orgs)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "validation-failed",
                        "details": {
                          "name": [
                            "must be a string"
                          ]
                        },
                        "message": "Validation failed"
                      }
                    }
                  }
                }
              },
              "description": "Invalid body"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "409": {
              "content": {
                "application/json": {
                  "schema": {
                    "oneOf": [
                      {
                        "example": {
                          "error": {
                            "code": "conflict",
                            "message": "Organization limit reached (10)"
                          }
                        }
                      },
                      {
                        "example": {
                          "error": {
                            "code": "conflict",
                            "details": {
                              "name": [
                                "already exists"
                              ]
                            },
                            "message": "Organization name already exists"
                          }
                        }
                      }
                    ]
                  }
                }
              },
              "description": "Organization limit reached or duplicate name"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Orgs"
          ]
        }
      },
      "/orgs/{id}": {
        "delete": {
          "operationId": "OrgsController_delete",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Organization deleted (projects, documents, chunks, conversations cascade)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Org not found"
                      }
                    }
                  }
                }
              },
              "description": "Org not found"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Orgs"
          ]
        },
        "get": {
          "operationId": "OrgsController_getOne",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/OrgDto"
                  }
                }
              },
              "description": "Get an organization"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Org not found"
                      }
                    }
                  }
                }
              },
              "description": "Org not found"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Orgs"
          ]
        }
      },
      "/projects": {
        "get": {
          "operationId": "ProjectsController_list",
          "parameters": [
            {
              "in": "query",
              "name": "limit",
              "required": true,
              "schema": {
                "type": "string"
              }
            },
            {
              "description": "Filter projects by organization id (must be explicit elsewhere when creating projects)",
              "in": "query",
              "name": "orgId",
              "required": false,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/ProjectDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": "List projects (must create at least one before ingesting documents)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid filter"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "project:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Projects"
          ],
          "x-required-scopes": [
            "project:read"
          ]
        },
        "post": {
          "operationId": "ProjectsController_create",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateProjectDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "201": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ProjectDto"
                  }
                }
              },
              "description": "Project created"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "duplicate",
                        "message": "Project with this name exists in org"
                      }
                    }
                  }
                }
              },
              "description": "Validation / duplicate / org errors"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "org:project:create"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Projects"
          ],
          "x-required-scopes": [
            "org:project:create"
          ]
        }
      },
      "/projects/{id}": {
        "delete": {
          "operationId": "ProjectsController_delete",
          "parameters": [
            {
              "in": "path",
              "name": "id",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "status": "deleted"
                    }
                  }
                }
              },
              "description": "Deleted project"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid id"
                      }
                    }
                  }
                }
              },
              "description": "Invalid id"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "org:project:delete"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Projects"
          ],
          "x-required-scopes": [
            "org:project:delete"
          ]
        }
      },
      "/search": {
        "get": {
          "operationId": "SearchController_search",
          "parameters": [
            {
              "description": "Query string",
              "in": "query",
              "name": "q",
              "required": true,
              "schema": {
                "example": "vector index design",
                "type": "string"
              }
            },
            {
              "description": "Result limit (1..50)",
              "in": "query",
              "name": "limit",
              "required": false,
              "schema": {
                "default": 10,
                "maximum": 50,
                "minimum": 1,
                "type": "number"
              }
            },
            {
              "in": "query",
              "name": "mode",
              "required": false,
              "schema": {
                "default": "hybrid",
                "enum": [
                  "hybrid",
                  "lexical",
                  "vector"
                ],
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/SearchResponseDto"
                  }
                }
              },
              "description": "Hybrid / lexical / vector search over chunks"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "validation-failed",
                        "details": {
                          "q": [
                            "must be longer than or equal to 1 characters"
                          ]
                        },
                        "message": "Validation failed"
                      }
                    }
                  }
                }
              },
              "description": "Validation failed"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions",
                        "missing_scopes": [
                          "documents:read"
                        ]
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "security": [
            {
              "bearer": []
            }
          ],
          "tags": [
            "Search"
          ],
          "x-required-scopes": [
            "documents:read"
          ]
        }
      },
      "/settings": {
        "get": {
          "operationId": "SettingsController_list",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": [
                      {
                        "key": "theme",
                        "value": "dark"
                      }
                    ]
                  }
                }
              },
              "description": "List settings (placeholder)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Settings"
          ]
        }
      },
      "/settings/{key}": {
        "get": {
          "operationId": "SettingsController_getOne",
          "parameters": [
            {
              "in": "path",
              "name": "key",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "key": "theme",
                      "value": "dark"
                    }
                  }
                }
              },
              "description": "Get a single setting (placeholder)"
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "404": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "not-found",
                        "message": "Setting not found"
                      }
                    }
                  }
                }
              },
              "description": "Setting not found"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "Settings"
          ]
        }
      },
      "/user/profile": {
        "get": {
          "operationId": "UserProfileController_getSelf",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/UserProfileDto"
                  }
                }
              },
              "description": ""
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        },
        "put": {
          "operationId": "UserProfileController_updateSelf",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateUserProfileDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/UserProfileDto"
                  }
                }
              },
              "description": ""
            },
            "400": {
              "description": "Validation error"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        }
      },
      "/user/profile/emails": {
        "get": {
          "operationId": "UserProfileController_listEmails",
          "parameters": [],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "items": {
                      "$ref": "#/components/schemas/AlternativeEmailDto"
                    },
                    "type": "array"
                  }
                }
              },
              "description": ""
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        },
        "post": {
          "operationId": "UserProfileController_addEmail",
          "parameters": [],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddAlternativeEmailDto"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/AlternativeEmailDto"
                  }
                }
              },
              "description": ""
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        }
      },
      "/user/profile/emails/{email}": {
        "delete": {
          "operationId": "UserProfileController_removeEmail",
          "parameters": [
            {
              "in": "path",
              "name": "email",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "status": "deleted"
                    }
                  }
                }
              },
              "description": ""
            },
            "400": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "bad-request",
                        "message": "Invalid request"
                      }
                    }
                  }
                }
              },
              "description": "Bad request"
            },
            "401": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "unauthorized",
                        "message": "Missing or invalid credentials"
                      }
                    }
                  }
                }
              },
              "description": "Unauthorized"
            },
            "403": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "forbidden",
                        "message": "Insufficient permissions"
                      }
                    }
                  }
                }
              },
              "description": "Forbidden"
            },
            "500": {
              "content": {
                "application/json": {
                  "schema": {
                    "example": {
                      "error": {
                        "code": "internal",
                        "message": "Unexpected error"
                      }
                    }
                  }
                }
              },
              "description": "Internal server error"
            }
          },
          "tags": [
            "UserProfile"
          ]
        }
      }
    },
    "servers": [],
    "tags": [],
    "x-tagGroups": [
      {
        "name": "Health & Auth",
        "tags": [
          "Health",
          "Auth"
        ]
      },
      {
        "name": "Organizations & Projects",
        "tags": [
          "Orgs",
          "Projects"
        ]
      },
      {
        "name": "Configuration",
        "tags": [
          "Settings"
        ]
      },
      {
        "name": "Content & Ingestion",
        "tags": [
          "Ingestion",
          "Documents",
          "Chunks"
        ]
      },
      {
        "name": "Search",
        "tags": [
          "Search"
        ]
      },
      {
        "name": "Chat",
        "tags": [
          "Chat"
        ]
      },
      {
        "name": "Knowledge Graph",
        "tags": [
          "Graph"
        ]
      }
    ]
  }
}