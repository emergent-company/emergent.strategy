{
    "openapi": "3.0.0",
    "paths": {
        "/health": {
            "get": {
                "operationId": "get",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Health probe",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "ok": true,
                                        "model": "text-embedding-004",
                                        "db": "up",
                                        "embeddings": "enabled",
                                        "rls_policies_ok": true,
                                        "rls_policy_count": 8,
                                        "rls_policy_hash": "policies:123:1a2b"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Health"
                ]
            }
        },
        "/auth/me": {
            "get": {
                "operationId": "me",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Return current authenticated user (mock)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "sub": "mock-user-id",
                                        "email": "demo@example.com"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Missing or invalid bearer token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Unauthorized"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Insufficient scope",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Forbidden"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Auth"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/settings": {
            "get": {
                "operationId": "list",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "List settings (placeholder)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": [
                                        {
                                            "key": "theme",
                                            "value": "dark"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Settings"
                ]
            }
        },
        "/settings/{key}": {
            "get": {
                "operationId": "getOne",
                "parameters": [
                    {
                        "name": "key",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Get a single setting (placeholder)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "key": "theme",
                                        "value": "dark"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Setting not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "not-found",
                                            "message": "Setting not found"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Settings"
                ]
            }
        },
        "/orgs": {
            "get": {
                "operationId": "list",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "List organizations",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/OrgDto"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid filter"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Orgs"
                ]
            },
            "post": {
                "operationId": "create",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateOrgDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Organization created (users may have at most 10 orgs)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OrgDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid body",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "validation-failed",
                                            "message": "Validation failed",
                                            "details": {
                                                "name": [
                                                    "must be a string"
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Organization limit reached or duplicate name",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "example": {
                                                "error": {
                                                    "code": "conflict",
                                                    "message": "Organization limit reached (10)"
                                                }
                                            }
                                        },
                                        {
                                            "example": {
                                                "error": {
                                                    "code": "conflict",
                                                    "message": "Organization name already exists",
                                                    "details": {
                                                        "name": [
                                                            "already exists"
                                                        ]
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Orgs"
                ]
            }
        },
        "/orgs/{id}": {
            "get": {
                "operationId": "getOne",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Get an organization",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/OrgDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Org not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "not-found",
                                            "message": "Org not found"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Orgs"
                ]
            },
            "delete": {
                "operationId": "delete",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Organization deleted (projects, documents, chunks, conversations cascade)"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Org not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "not-found",
                                            "message": "Org not found"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Orgs"
                ]
            }
        },
        "/projects": {
            "get": {
                "operationId": "list",
                "parameters": [
                    {
                        "name": "limit",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "orgId",
                        "required": false,
                        "in": "query",
                        "description": "Filter projects by organization id (must be explicit elsewhere when creating projects)",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List projects (must create at least one before ingesting documents)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/ProjectDto"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid filter"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Projects"
                ]
            },
            "post": {
                "operationId": "create",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateProjectDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Project created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ProjectDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation / duplicate / org errors",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "duplicate",
                                            "message": "Project with this name exists in org"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Projects"
                ]
            }
        },
        "/projects/{id}": {
            "delete": {
                "operationId": "delete",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Deleted project",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "status": "deleted"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid id",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid id"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Projects"
                ]
            }
        },
        "/search": {
            "get": {
                "operationId": "search",
                "parameters": [
                    {
                        "name": "q",
                        "required": true,
                        "in": "query",
                        "description": "Query string",
                        "schema": {
                            "example": "vector index design",
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": false,
                        "in": "query",
                        "description": "Result limit (1..50)",
                        "schema": {
                            "minimum": 1,
                            "maximum": 50,
                            "default": 10,
                            "type": "number"
                        }
                    },
                    {
                        "name": "mode",
                        "required": false,
                        "in": "query",
                        "schema": {
                            "default": "hybrid",
                            "enum": [
                                "hybrid",
                                "lexical",
                                "vector"
                            ],
                            "type": "string"
                        }
                    },
                    {
                        "name": "lexicalWeight",
                        "required": false,
                        "in": "query",
                        "description": "Lexical weight for hybrid search (0-1). Only used when mode=hybrid. Weights are normalized to sum to 1.",
                        "schema": {
                            "minimum": 0,
                            "maximum": 1,
                            "default": 0.5,
                            "example": 0.7,
                            "type": "number"
                        }
                    },
                    {
                        "name": "vectorWeight",
                        "required": false,
                        "in": "query",
                        "description": "Vector weight for hybrid search (0-1). Only used when mode=hybrid. Weights are normalized to sum to 1.",
                        "schema": {
                            "minimum": 0,
                            "maximum": 1,
                            "default": 0.5,
                            "example": 0.3,
                            "type": "number"
                        }
                    },
                    {
                        "name": "includePaths",
                        "required": false,
                        "in": "query",
                        "description": "Include path summaries showing how results relate to other objects in the knowledge graph",
                        "schema": {
                            "default": false,
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Hybrid / lexical / vector search over chunks",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SearchResponseDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation failed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "validation-failed",
                                            "message": "Validation failed",
                                            "details": {
                                                "q": [
                                                    "must be longer than or equal to 1 characters"
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Search"
                ]
            }
        },
        "/documents": {
            "get": {
                "operationId": "list",
                "parameters": [
                    {
                        "name": "limit",
                        "required": false,
                        "in": "query",
                        "schema": {
                            "type": "number",
                            "minimum": 1,
                            "maximum": 500,
                            "default": 100
                        }
                    },
                    {
                        "name": "cursor",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List ingested documents",
                        "headers": {
                            "x-next-cursor": {
                                "description": "Base64 cursor for next page",
                                "schema": {
                                    "type": "string"
                                }
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/DocumentDto"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid filter"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Documents"
                ]
            },
            "post": {
                "operationId": "create",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "filename": {
                                        "type": "string"
                                    },
                                    "projectId": {
                                        "type": "string",
                                        "format": "uuid"
                                    },
                                    "content": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Created document",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DocumentDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Documents"
                ]
            }
        },
        "/documents/{id}": {
            "get": {
                "operationId": "get",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "description": "Document UUID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Get a document",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DocumentDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid id"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Documents"
                ]
            },
            "delete": {
                "operationId": "delete",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Documents"
                ]
            }
        },
        "/chunks": {
            "get": {
                "operationId": "list",
                "parameters": [
                    {
                        "name": "documentId",
                        "required": false,
                        "in": "query",
                        "description": "Filter by document UUID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List chunks",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/ChunkDto"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid filter"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Chunks"
                ]
            }
        },
        "/ingest/upload": {
            "post": {
                "operationId": "upload",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/IngestionUploadDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Upload a file for ingestion",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "documentId": "11111111-2222-3333-4444-555555555555",
                                        "chunks": 12,
                                        "alreadyExists": false
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid upload payload",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "validation-failed",
                                            "message": "Validation failed",
                                            "details": {
                                                "filename": [
                                                    "must be a string"
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Ingestion"
                ]
            }
        },
        "/ingest/url": {
            "post": {
                "operationId": "ingestUrl",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/IngestionUrlDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Ingest a remote URL",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "documentId": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
                                        "chunks": 8,
                                        "alreadyExists": false
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid URL payload",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "validation-failed",
                                            "message": "Validation failed",
                                            "details": {
                                                "url": [
                                                    "must be an URL address"
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Ingestion"
                ]
            }
        },
        "/admin/extraction-jobs": {
            "post": {
                "operationId": "createJob",
                "summary": "Create extraction job",
                "description": "Creates a new extraction job with pending status. Phase 2 will enqueue to worker queue.",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateExtractionJobDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Job created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ExtractionJobDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request data"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "tags": [
                    "Extraction Jobs"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/admin/extraction-jobs/projects/{projectId}": {
            "get": {
                "operationId": "listJobs",
                "summary": "List extraction jobs",
                "description": "List extraction jobs for a project with optional filters and pagination",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "description": "Project ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "org_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "status",
                        "required": false,
                        "in": "query",
                        "description": "Filter by status",
                        "schema": {
                            "enum": [
                                "pending",
                                "running",
                                "completed",
                                "requires_review",
                                "failed",
                                "cancelled"
                            ],
                            "type": "string"
                        }
                    },
                    {
                        "name": "source_type",
                        "required": false,
                        "in": "query",
                        "description": "Filter by source type",
                        "schema": {
                            "enum": [
                                "document",
                                "api",
                                "manual",
                                "bulk_import"
                            ],
                            "type": "string"
                        }
                    },
                    {
                        "name": "source_id",
                        "required": false,
                        "in": "query",
                        "description": "Filter by source ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "page",
                        "required": false,
                        "in": "query",
                        "description": "Page number (1-indexed)",
                        "schema": {
                            "minimum": 1,
                            "default": 1,
                            "type": "number"
                        }
                    },
                    {
                        "name": "limit",
                        "required": false,
                        "in": "query",
                        "description": "Items per page",
                        "schema": {
                            "minimum": 1,
                            "default": 20,
                            "type": "number"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Jobs retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ExtractionJobListDto"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "tags": [
                    "Extraction Jobs"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/admin/extraction-jobs/{jobId}": {
            "get": {
                "operationId": "getJob",
                "summary": "Get extraction job",
                "description": "Get detailed information about a specific extraction job",
                "parameters": [
                    {
                        "name": "jobId",
                        "required": true,
                        "in": "path",
                        "description": "Job ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "project_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "org_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Job retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ExtractionJobDto"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Job not found"
                    }
                },
                "tags": [
                    "Extraction Jobs"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            },
            "patch": {
                "operationId": "updateJob",
                "summary": "Update extraction job",
                "description": "Update job status, progress, results, or errors",
                "parameters": [
                    {
                        "name": "jobId",
                        "required": true,
                        "in": "path",
                        "description": "Job ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "project_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "org_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateExtractionJobDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Job updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ExtractionJobDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid update data"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Job not found"
                    }
                },
                "tags": [
                    "Extraction Jobs"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            },
            "delete": {
                "operationId": "deleteJob",
                "summary": "Delete extraction job",
                "description": "Delete a completed, failed, or cancelled extraction job",
                "parameters": [
                    {
                        "name": "jobId",
                        "required": true,
                        "in": "path",
                        "description": "Job ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "project_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "org_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Job deleted successfully"
                    },
                    "400": {
                        "description": "Cannot delete running/pending job"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Job not found"
                    }
                },
                "tags": [
                    "Extraction Jobs"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/admin/extraction-jobs/{jobId}/cancel": {
            "post": {
                "operationId": "cancelJob",
                "summary": "Cancel extraction job",
                "description": "Cancel a pending or running extraction job",
                "parameters": [
                    {
                        "name": "jobId",
                        "required": true,
                        "in": "path",
                        "description": "Job ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "project_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "org_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Job cancelled successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ExtractionJobDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Job cannot be cancelled (already completed/failed)"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Job not found"
                    }
                },
                "tags": [
                    "Extraction Jobs"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/admin/extraction-jobs/projects/{projectId}/statistics": {
            "get": {
                "operationId": "getStatistics",
                "summary": "Get job statistics",
                "description": "Get aggregated statistics for extraction jobs in a project",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "description": "Project ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "org_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Statistics retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "total": {
                                            "type": "number",
                                            "example": 150
                                        },
                                        "by_status": {
                                            "type": "object",
                                            "example": {
                                                "pending": 5,
                                                "running": 2,
                                                "completed": 120,
                                                "failed": 20,
                                                "cancelled": 3
                                            }
                                        },
                                        "by_source_type": {
                                            "type": "object",
                                            "example": {
                                                "document": 100,
                                                "api": 30,
                                                "manual": 20
                                            }
                                        },
                                        "avg_duration_ms": {
                                            "type": "number",
                                            "nullable": true,
                                            "example": 45000
                                        },
                                        "total_objects_created": {
                                            "type": "number",
                                            "example": 5230
                                        },
                                        "total_types_discovered": {
                                            "type": "number",
                                            "example": 15
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "tags": [
                    "Extraction Jobs"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/admin/extraction-jobs/_debug/available-models": {
            "get": {
                "operationId": "listAvailableModels",
                "summary": "List available Gemini models",
                "description": "Query Google Gemini API to list all available models with their capabilities",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Models retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "current_model": {
                                            "type": "string",
                                            "example": "gemini-1.5-flash-latest"
                                        },
                                        "available_models": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "name": {
                                                        "type": "string",
                                                        "example": "models/gemini-2.0-flash-exp"
                                                    },
                                                    "displayName": {
                                                        "type": "string",
                                                        "example": "Gemini 2.0 Flash"
                                                    },
                                                    "description": {
                                                        "type": "string"
                                                    },
                                                    "supportedGenerationMethods": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "inputTokenLimit": {
                                                        "type": "number"
                                                    },
                                                    "outputTokenLimit": {
                                                        "type": "number"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to fetch models from API"
                    }
                },
                "tags": [
                    "Extraction Jobs"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/graph/objects": {
            "post": {
                "operationId": "create",
                "summary": "Create a graph object (initial version)",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateGraphObjectDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created"
                    },
                    "400": {
                        "description": "Validation error"
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/objects/search": {
            "get": {
                "operationId": "searchObjects",
                "summary": "Search graph objects (basic filters)",
                "description": "Supports pagination via created_at cursor. Optional order param (asc|desc) controls chronological direction (default asc). Desc returns newest first; cursor always set to last item created_at in current page.",
                "parameters": [
                    {
                        "name": "type",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "key",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "label",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cursor",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "order",
                        "required": false,
                        "in": "query",
                        "description": "Chronological direction (asc=oldestnewest, desc=newestoldest). Default asc.",
                        "schema": {
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/objects/fts": {
            "get": {
                "operationId": "ftsSearch",
                "summary": "Full-text search graph objects",
                "description": "Websearch syntax over inline-populated tsvector (type, key, properties JSON). Returns newest heads ranked by ts_rank. Supports optional type, label, branch_id filters. Limit max 100.",
                "parameters": [
                    {
                        "name": "q",
                        "required": true,
                        "in": "query",
                        "description": "Search query (websearch syntax)",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "label",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "branch_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/objects/{id}": {
            "get": {
                "operationId": "get",
                "summary": "Get latest version of a graph object",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    },
                    "404": {
                        "description": "Not found"
                    }
                },
                "tags": [
                    "Graph"
                ]
            },
            "patch": {
                "operationId": "patch",
                "summary": "Patch (create new version) of a graph object",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchGraphObjectDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Version created"
                    },
                    "400": {
                        "description": "No effective change"
                    },
                    "404": {
                        "description": "Not found"
                    }
                },
                "tags": [
                    "Graph"
                ]
            },
            "delete": {
                "operationId": "deleteObject",
                "summary": "Soft delete (tombstone) an object (creates new version with deleted_at)",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/objects/{id}/restore": {
            "post": {
                "operationId": "restoreObject",
                "summary": "Restore a soft-deleted object (creates new version clearing deleted_at)",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Restored (new version created)"
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/objects/{id}/history": {
            "get": {
                "operationId": "history",
                "summary": "List version history for a graph object",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cursor",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ObjectHistoryResponseDto"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not found"
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/relationships": {
            "post": {
                "operationId": "createRel",
                "summary": "Create a relationship (initial version) or new version if properties changed",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateGraphRelationshipDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/relationships/{id}": {
            "get": {
                "operationId": "getRel",
                "summary": "Get relationship by id",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            },
            "patch": {
                "operationId": "patchRel",
                "summary": "Patch (create new version) of a relationship (only head version allowed)",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PatchGraphRelationshipDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            },
            "delete": {
                "operationId": "deleteRel",
                "summary": "Soft delete a relationship (tombstone version)",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/relationships/search": {
            "get": {
                "operationId": "searchRels",
                "summary": "Search relationships (basic filters)",
                "description": "Supports pagination via created_at cursor. Optional order param (asc|desc) for chronological direction (default asc).",
                "parameters": [
                    {
                        "name": "type",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "src_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "dst_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cursor",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "order",
                        "required": false,
                        "in": "query",
                        "description": "Chronological direction (asc=oldestnewest, desc=newestoldest). Default asc.",
                        "schema": {
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/relationships/{id}/restore": {
            "post": {
                "operationId": "restoreRel",
                "summary": "Restore a soft-deleted relationship",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Restored (new version created)"
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/relationships/{id}/history": {
            "get": {
                "operationId": "historyRel",
                "summary": "List version history for a relationship",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "cursor",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/RelationshipHistoryResponseDto"
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/objects/{id}/edges": {
            "get": {
                "operationId": "edges",
                "summary": "List relationships adjacent to an object",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "direction",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/traverse": {
            "post": {
                "operationId": "traverse",
                "summary": "Traverse the graph from one or more root object ids (bounded BFS)",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/TraverseGraphDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/expand": {
            "post": {
                "operationId": "expand",
                "summary": "Expand graph (single-pass bounded traversal with projection & edge property option)",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/GraphExpandDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/objects/vector-search": {
            "post": {
                "operationId": "vectorSearch",
                "summary": "Vector similarity search",
                "description": "Returns nearest neighbors (cosine distance) for provided query vector over embedding_vec. Threshold: use maxDistance (preferred) or legacy minScore (acts as maximum distance). When both are supplied, maxDistance takes precedence.",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/VectorSearchDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/objects/{id}/similar": {
            "get": {
                "operationId": "similar",
                "summary": "Find objects similar to given object id using stored embedding_vec",
                "description": "Supports same filters as POST /graph/objects/vector-search (type, orgId, projectId, branchId, keyPrefix, labelsAll, labelsAny, maxDistance|minScore, limit). maxDistance preferred; if both provided, maxDistance overrides minScore.",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": false,
                        "in": "query",
                        "description": "Limit number of neighbors (1-100); default 10",
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "minScore",
                        "required": false,
                        "in": "query",
                        "description": "Maximum cosine distance (lower is more similar). 0  d  2. Rows with distance > threshold filtered out.",
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "maxDistance",
                        "required": false,
                        "in": "query",
                        "description": "Alias for minScore (preferred name). 0  d  2. If both provided, maxDistance wins.",
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "type",
                        "required": false,
                        "in": "query",
                        "description": "Filter by object type",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "orgId",
                        "required": false,
                        "in": "query",
                        "description": "Filter by org id (UUID)",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "projectId",
                        "required": false,
                        "in": "query",
                        "description": "Filter by project id (UUID)",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "branchId",
                        "required": false,
                        "in": "query",
                        "description": "Filter by branch id (UUID)",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "keyPrefix",
                        "required": false,
                        "in": "query",
                        "description": "Filter by key prefix (ILIKE)",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "labelsAll",
                        "required": false,
                        "in": "query",
                        "description": "Require all labels to be present on object",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    },
                    {
                        "name": "labelsAny",
                        "required": false,
                        "in": "query",
                        "description": "Require any of the labels to overlap",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/embedding-policies": {
            "post": {
                "operationId": "createEmbeddingPolicy",
                "summary": "Create an embedding policy for a project and object type",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateEmbeddingPolicyDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Policy created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/EmbeddingPolicyResponseDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error or duplicate policy"
                    }
                },
                "tags": [
                    "Graph"
                ]
            },
            "get": {
                "operationId": "listEmbeddingPolicies",
                "summary": "List all embedding policies for a project",
                "parameters": [
                    {
                        "name": "project_id",
                        "required": true,
                        "in": "query",
                        "description": "Filter policies by project ID",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "object_type",
                        "required": false,
                        "in": "query",
                        "description": "Filter policies by object type",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of policies",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/EmbeddingPolicyResponseDto"
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/embedding-policies/{id}": {
            "get": {
                "operationId": "getEmbeddingPolicy",
                "summary": "Get a specific embedding policy by ID",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "project_id",
                        "required": true,
                        "in": "query",
                        "description": "Project ID for authorization",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Policy details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/EmbeddingPolicyResponseDto"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Policy not found"
                    }
                },
                "tags": [
                    "Graph"
                ]
            },
            "patch": {
                "operationId": "updateEmbeddingPolicy",
                "summary": "Update an embedding policy",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "project_id",
                        "required": true,
                        "in": "query",
                        "description": "Project ID for authorization",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateEmbeddingPolicyDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Policy updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/EmbeddingPolicyResponseDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "404": {
                        "description": "Policy not found"
                    }
                },
                "tags": [
                    "Graph"
                ]
            },
            "delete": {
                "operationId": "deleteEmbeddingPolicy",
                "summary": "Delete an embedding policy",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "project_id",
                        "required": true,
                        "in": "query",
                        "description": "Project ID for authorization",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Policy deleted"
                    },
                    "404": {
                        "description": "Policy not found"
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/branches/{targetBranchId}/merge": {
            "post": {
                "operationId": "mergeDryRun",
                "summary": "Branch merge (dry-run or execute)",
                "description": "Enumerate divergent canonical graph objects between source and target branches. Default is dry-run (no mutations). If `execute=true` and there are no conflicts: Added objects are cloned into target; Fast-forward objects are patched by adding only new properties (superset heuristic). Conflicts block apply. Classification statuses: added, unchanged, fast_forward, conflict.",
                "parameters": [
                    {
                        "name": "targetBranchId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/BranchMergeRequestDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Merge summary including classification counts, per-object statuses, and optional applied/applied_objects when executed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BranchMergeSummaryDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Missing sourceBranchId or validation error"
                    },
                    "404": {
                        "description": "Branch not found"
                    }
                },
                "tags": [
                    "Graph"
                ]
            }
        },
        "/graph/branches": {
            "post": {
                "operationId": "create",
                "parameters": [],
                "responses": {
                    "201": {
                        "description": ""
                    }
                }
            },
            "get": {
                "operationId": "list",
                "parameters": [
                    {
                        "name": "project_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/product-versions": {
            "post": {
                "operationId": "create",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateProductVersionDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Create product version snapshot",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "id": "11111111-1111-4111-8111-111111111111",
                                        "name": "v1.0.0",
                                        "member_count": 42
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Name exists",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "product_version_name_exists",
                                            "message": "Name already exists"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Product Versions"
                ]
            },
            "get": {
                "operationId": "list",
                "parameters": [
                    {
                        "name": "cursor",
                        "required": false,
                        "in": "query",
                        "description": "Pagination cursor (created_at timestamp of last item from previous page)",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": false,
                        "in": "query",
                        "description": "Number of items per page (1-100, default 20)",
                        "schema": {
                            "type": "number"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List product version snapshots for a project",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "items": [
                                            {
                                                "id": "...",
                                                "name": "v1.0.0",
                                                "description": null,
                                                "created_at": "2025-01-01T00:00:00Z",
                                                "member_count": 42,
                                                "base_product_version_id": null
                                            }
                                        ],
                                        "next_cursor": "2025-01-01T00:00:00Z"
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Product Versions"
                ]
            }
        },
        "/product-versions/{id}": {
            "get": {
                "operationId": "get",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Get product version snapshot"
                    }
                },
                "tags": [
                    "Product Versions"
                ]
            }
        },
        "/product-versions/{id}/diff/{otherId}": {
            "get": {
                "operationId": "diff",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "otherId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Diff two product version snapshots",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "items": [
                                            {
                                                "canonical_id": "...",
                                                "change_type": "modified",
                                                "version_a_object_id": "...",
                                                "version_b_object_id": "..."
                                            }
                                        ],
                                        "meta": {
                                            "added": 5,
                                            "removed": 2,
                                            "modified": 10,
                                            "unchanged": 100
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Product Versions"
                ]
            }
        },
        "/tags": {
            "post": {
                "operationId": "create",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateTagDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Create tag",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "id": "11111111-1111-4111-8111-111111111111",
                                        "name": "stable",
                                        "product_version_id": "22222222-2222-4222-8222-222222222222",
                                        "description": "Stable release",
                                        "created_at": "2025-09-30T00:00:00Z"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Tag name exists or product version not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "tag_name_exists",
                                            "message": "Tag name already exists"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Tags"
                ]
            },
            "get": {
                "operationId": "list",
                "parameters": [
                    {
                        "name": "cursor",
                        "required": false,
                        "in": "query",
                        "description": "Pagination cursor (created_at timestamp)",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "limit",
                        "required": false,
                        "in": "query",
                        "description": "Number of items per page (1-100, default 20)",
                        "schema": {
                            "type": "number"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List tags for a project",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "items": [
                                            {
                                                "id": "...",
                                                "name": "stable",
                                                "product_version_id": "...",
                                                "description": null,
                                                "created_at": "2025-09-30T00:00:00Z"
                                            }
                                        ],
                                        "next_cursor": "2025-09-30T00:00:00Z"
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Tags"
                ]
            }
        },
        "/tags/{id}": {
            "get": {
                "operationId": "get",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Get tag by ID"
                    },
                    "404": {
                        "description": "Tag not found"
                    }
                },
                "tags": [
                    "Tags"
                ]
            },
            "put": {
                "operationId": "update",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateTagDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Update tag"
                    },
                    "404": {
                        "description": "Tag not found"
                    }
                },
                "tags": [
                    "Tags"
                ]
            },
            "delete": {
                "operationId": "delete",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Tag deleted"
                    },
                    "404": {
                        "description": "Tag not found"
                    }
                },
                "tags": [
                    "Tags"
                ]
            }
        },
        "/tags/by-name/{name}": {
            "get": {
                "operationId": "getByName",
                "parameters": [
                    {
                        "name": "name",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Get tag by name"
                    },
                    "404": {
                        "description": "Tag not found"
                    }
                },
                "tags": [
                    "Tags"
                ]
            }
        },
        "/type-registry/projects/{projectId}": {
            "get": {
                "operationId": "getProjectTypes",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/type-registry/projects/{projectId}/types/{typeName}": {
            "get": {
                "operationId": "getType",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "typeName",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            },
            "patch": {
                "operationId": "updateType",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "typeName",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateObjectTypeDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            },
            "delete": {
                "operationId": "deleteType",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "typeName",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": ""
                    }
                }
            }
        },
        "/type-registry/projects/{projectId}/types": {
            "post": {
                "operationId": "createType",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateObjectTypeDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": ""
                    }
                }
            }
        },
        "/type-registry/projects/{projectId}/validate": {
            "post": {
                "operationId": "validateData",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": ""
                    }
                }
            }
        },
        "/type-registry/projects/{projectId}/types/{typeName}/schema": {
            "get": {
                "operationId": "getTypeSchema",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "typeName",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/type-registry/projects/{projectId}/types/{typeName}/toggle": {
            "patch": {
                "operationId": "toggleType",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "typeName",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/type-registry/projects/{projectId}/stats": {
            "get": {
                "operationId": "getProjectStats",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/template-packs": {
            "post": {
                "operationId": "createTemplatePack",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateTemplatePackDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": ""
                    }
                }
            },
            "get": {
                "operationId": "listTemplatePacks",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/template-packs/{id}": {
            "get": {
                "operationId": "getTemplatePack",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/template-packs/projects/{projectId}/available": {
            "get": {
                "operationId": "getAvailableTemplates",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/template-packs/projects/{projectId}/installed": {
            "get": {
                "operationId": "getInstalledTemplatePacks",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            }
        },
        "/template-packs/projects/{projectId}/assign": {
            "post": {
                "operationId": "assignTemplatePack",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "org_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "tenant_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "user_id",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AssignTemplatePackDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": ""
                    }
                }
            }
        },
        "/template-packs/projects/{projectId}/assignments/{assignmentId}": {
            "patch": {
                "operationId": "updateTemplatePackAssignment",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "assignmentId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateTemplatePackAssignmentDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": ""
                    }
                }
            },
            "delete": {
                "operationId": "uninstallTemplatePack",
                "parameters": [
                    {
                        "name": "projectId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "assignmentId",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": ""
                    }
                }
            }
        },
        "/notifications": {
            "get": {
                "operationId": "getNotifications",
                "summary": "Get notifications for current user",
                "parameters": [
                    {
                        "name": "tab",
                        "required": false,
                        "in": "query",
                        "description": "Filter by tab",
                        "schema": {
                            "enum": [
                                "important",
                                "other",
                                "snoozed",
                                "cleared"
                            ],
                            "type": "string"
                        }
                    },
                    {
                        "name": "category",
                        "required": false,
                        "in": "query",
                        "description": "Filter by category (e.g., \"import\", \"extraction\")",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "unread_only",
                        "required": false,
                        "in": "query",
                        "description": "Show only unread notifications",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "search",
                        "required": false,
                        "in": "query",
                        "description": "Search in title and message",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of notifications"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            },
            "delete": {
                "operationId": "clearAll",
                "summary": "Clear all notifications in a tab",
                "parameters": [
                    {
                        "name": "tab",
                        "required": false,
                        "in": "query",
                        "description": "Tab to clear",
                        "schema": {
                            "enum": [
                                "important",
                                "other"
                            ],
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "All notifications cleared"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/notifications/counts": {
            "get": {
                "operationId": "getUnreadCounts",
                "summary": "Get unread notification counts",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Notification counts by tab"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/notifications/stats": {
            "get": {
                "operationId": "getStats",
                "summary": "Get notification statistics (unread, dismissed, total)",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Notification statistics"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/notifications/{id}/read": {
            "post": {
                "operationId": "markRead",
                "summary": "Mark notification as read",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "description": "Notification ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification marked as read"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/notifications/{id}/unread": {
            "post": {
                "operationId": "markUnread",
                "summary": "Mark notification as unread",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "description": "Notification ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification marked as unread"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/notifications/{id}/dismiss": {
            "post": {
                "operationId": "dismiss",
                "summary": "Dismiss notification",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "description": "Notification ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification dismissed"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/notifications/{id}": {
            "delete": {
                "operationId": "clear",
                "summary": "Clear notification (move to cleared tab)",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "description": "Notification ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification cleared"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/notifications/{id}/unclear": {
            "post": {
                "operationId": "unclear",
                "summary": "Restore notification from cleared tab",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "description": "Notification ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification restored"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/notifications/{id}/snooze": {
            "post": {
                "operationId": "snooze",
                "summary": "Snooze notification until a specific time",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "description": "Notification ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SnoozeNotificationDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Notification snoozed"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/notifications/{id}/unsnooze": {
            "post": {
                "operationId": "unsnooze",
                "summary": "Unsnooze notification",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "description": "Notification ID",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification unsnoozed"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Notifications"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        },
        "/chat/conversations": {
            "get": {
                "operationId": "listConversations",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "List chat conversations",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": [
                                        {
                                            "id": "11111111-1111-4111-8111-111111111111",
                                            "title": "2025-01-01  Hello world",
                                            "is_private": false
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Chat"
                ]
            },
            "post": {
                "operationId": "createConversation",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "Create a new conversation (201)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "conversationId": "11111111-1111-4111-8111-111111111111",
                                        "id": "11111111-1111-4111-8111-111111111111",
                                        "title": "2025-01-01  New Conversation"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "message required"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Chat"
                ]
            }
        },
        "/chat/{id}": {
            "get": {
                "operationId": "getConversation",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Get a conversation with messages"
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Forbidden"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Conversation not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "not-found",
                                            "message": "Conversation not found"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Chat"
                ]
            },
            "patch": {
                "operationId": "rename",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Rename conversation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "ok": true,
                                        "id": "c1",
                                        "title": "New Title"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "title required"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Conversation not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "not-found",
                                            "message": "Conversation not found"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Chat"
                ]
            },
            "delete": {
                "operationId": "delete",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Delete conversation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "ok": true,
                                        "id": "c1"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Conversation not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "not-found",
                                            "message": "Conversation not found"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Chat"
                ]
            }
        },
        "/chat/{id}/stream": {
            "get": {
                "operationId": "streamGet",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chat streaming endpoint (SSE). Emits a sequence of JSON frames each prefixed by \"data: \".",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/GetChatStreamMetaFrame"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GetChatStreamTokenFrame"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GetChatStreamCitationsFrame"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GetChatStreamSummaryFrame"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GetChatStreamDoneFrame"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GetChatStreamErrorFrame"
                                        }
                                    ]
                                },
                                "examples": {
                                    "meta": {
                                        "value": "data: {\"meta\":{\"chat_model_enabled\":true,\"google_key\":true}}\n\n"
                                    },
                                    "token": {
                                        "value": "data: {\"message\":\"token-0\",\"index\":0,\"streaming\":true}\n\n"
                                    },
                                    "citations": {
                                        "value": "data: {\"citations\":[{\"documentId\":\"11111111-1111-4111-8111-111111111111\"}]}\n\n"
                                    },
                                    "summary": {
                                        "value": "data: {\"summary\":true,\"token_count\":5,\"citations_count\":2}\n\n"
                                    },
                                    "done": {
                                        "value": "data: {\"done\":true,\"message\":\"[DONE]\"}\n\n"
                                    },
                                    "error": {
                                        "value": "data: {\"error\":{\"code\":\"upstream-failed\",\"message\":\"Simulated upstream model failure\"},\"done\":true}\n\n"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Missing project header",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "x-project-id header required"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Conversation not found",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "not-found",
                                            "message": "Conversation not found"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Chat"
                ]
            }
        },
        "/chat/stream": {
            "post": {
                "operationId": "streamPost",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChatRequestDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Chat streaming endpoint (SSE). Each line is an SSE data frame beginning with \"data: \", followed by one of the JSON event shapes.",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/ChatStreamMetaEvent"
                                        },
                                        {
                                            "$ref": "#/components/schemas/ChatStreamTokenEvent"
                                        },
                                        {
                                            "$ref": "#/components/schemas/ChatStreamErrorEvent"
                                        },
                                        {
                                            "$ref": "#/components/schemas/ChatStreamDoneEvent"
                                        }
                                    ],
                                    "description": "Union of possible chat stream events (serialized per line as SSE frame)."
                                },
                                "examples": {
                                    "meta": {
                                        "value": "data: {\"type\":\"meta\",\"conversationId\":\"11111111-1111-4111-8111-111111111111\",\"citations\":[]}\n\n"
                                    },
                                    "token": {
                                        "value": "data: {\"type\":\"token\",\"token\":\"Hello\"}\n\n"
                                    },
                                    "error": {
                                        "value": "data: {\"type\":\"error\",\"error\":\"model key missing\"}\n\n"
                                    },
                                    "done": {
                                        "value": "data: {\"type\":\"done\"}\n\n"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "message required"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Chat"
                ]
            }
        },
        "/invites": {
            "post": {
                "operationId": "create",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateInviteDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": ""
                    }
                }
            }
        },
        "/invites/accept": {
            "post": {
                "operationId": "accept",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AcceptInviteDto"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": ""
                    }
                }
            }
        },
        "/user/profile": {
            "get": {
                "operationId": "getSelf",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserProfileDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "UserProfile"
                ]
            },
            "put": {
                "operationId": "updateSelf",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateUserProfileDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserProfileDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "UserProfile"
                ]
            }
        },
        "/user/profile/emails": {
            "get": {
                "operationId": "listEmails",
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/AlternativeEmailDto"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "UserProfile"
                ]
            },
            "post": {
                "operationId": "addEmail",
                "parameters": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AddAlternativeEmailDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AlternativeEmailDto"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "UserProfile"
                ]
            }
        },
        "/user/profile/emails/{email}": {
            "delete": {
                "operationId": "removeEmail",
                "parameters": [
                    {
                        "name": "email",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "status": "deleted"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "bad-request",
                                            "message": "Invalid request"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "unauthorized",
                                            "message": "Missing or invalid credentials"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "forbidden",
                                            "message": "Insufficient permissions"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "internal",
                                            "message": "Unexpected error"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "UserProfile"
                ]
            }
        },
        "/graph/search": {
            "post": {
                "operationId": "search",
                "parameters": [
                    {
                        "name": "debug",
                        "required": true,
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/GraphSearchRequestDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Graph hybrid search results (prototype)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GraphSearchResponseDto"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Missing required scope (e.g., debug scope)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "example": {
                                        "error": {
                                            "code": "insufficient_scope",
                                            "message": "Debug scope required",
                                            "details": {
                                                "missing": [
                                                    "graph:search:debug"
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tags": [
                    "Graph"
                ],
                "security": [
                    {
                        "bearer": []
                    }
                ]
            }
        }
    },
    "info": {
        "title": "Spec Server API",
        "description": "Generated OpenAPI spec (NestJS). NOTE: Each Document MUST belong to a Project and each Project belongs to an Organization. Users with no accessible Projects must create one before using ingestion or search features.",
        "version": "0.2.0",
        "contact": {}
    },
    "tags": [],
    "servers": [],
    "components": {
        "securitySchemes": {
            "bearer": {
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "type": "http"
            }
        },
        "schemas": {
            "OrgDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "example": "org_1"
                    },
                    "name": {
                        "type": "string",
                        "example": "Example Org"
                    }
                },
                "required": [
                    "id",
                    "name"
                ]
            },
            "CreateOrgDto": {
                "type": "object",
                "properties": {}
            },
            "ProjectDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "example": "proj_1"
                    },
                    "name": {
                        "type": "string",
                        "example": "Demo Project"
                    },
                    "orgId": {
                        "type": "string",
                        "example": "org_1"
                    }
                },
                "required": [
                    "id",
                    "name",
                    "orgId"
                ]
            },
            "CreateProjectDto": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "My Project",
                        "description": "Project name (unique per organization, case-insensitive)"
                    },
                    "orgId": {
                        "type": "string",
                        "description": "Organization UUID (must belong to caller; no implicit default org)"
                    }
                },
                "required": [
                    "name",
                    "orgId"
                ]
            },
            "SearchResultDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "example": "mock-1"
                    },
                    "snippet": {
                        "type": "string",
                        "example": "Result snippet for \"foo\" (#1, mode=hybrid)"
                    },
                    "score": {
                        "type": "number",
                        "example": 0.98
                    },
                    "source": {
                        "type": "string",
                        "example": "source.doc#L10"
                    },
                    "pathSummary": {
                        "type": "string",
                        "example": "Related: links to Requirement \"REQ-1\" via 'implements'; linked from Meeting \"M3\" via 'discussed_in'",
                        "description": "Human-readable summary of how this result relates to other objects in the knowledge graph"
                    }
                },
                "required": [
                    "id",
                    "snippet",
                    "score"
                ]
            },
            "SearchResponseDto": {
                "type": "object",
                "properties": {
                    "mode": {
                        "type": "string",
                        "enum": [
                            "hybrid",
                            "lexical",
                            "vector"
                        ]
                    },
                    "results": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/SearchResultDto"
                        }
                    },
                    "warning": {
                        "type": "string",
                        "example": "Embeddings unavailable; fell back to lexical."
                    },
                    "query_time_ms": {
                        "type": "number",
                        "description": "Query execution time in milliseconds",
                        "example": 142.5
                    },
                    "result_count": {
                        "type": "number",
                        "description": "Total number of results found before pagination/limits",
                        "example": 50
                    }
                },
                "required": [
                    "mode",
                    "results"
                ]
            },
            "DocumentDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "example": "doc_1"
                    },
                    "orgId": {
                        "type": "string",
                        "example": "11111111-2222-3333-4444-555555555555",
                        "nullable": true
                    },
                    "projectId": {
                        "type": "string",
                        "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee",
                        "nullable": true
                    },
                    "name": {
                        "type": "string",
                        "example": "Spec.md"
                    },
                    "sourceUrl": {
                        "type": "object",
                        "nullable": true,
                        "example": "https://example.com/file.pdf"
                    },
                    "mimeType": {
                        "type": "object",
                        "nullable": true,
                        "example": "text/markdown"
                    },
                    "createdAt": {
                        "type": "string",
                        "example": "2025-01-01T00:00:00.000Z"
                    },
                    "updatedAt": {
                        "type": "string",
                        "example": "2025-01-01T00:05:00.000Z"
                    },
                    "chunks": {
                        "type": "number",
                        "example": 12,
                        "description": "Number of chunks associated with this document"
                    }
                },
                "required": [
                    "id",
                    "name",
                    "createdAt",
                    "updatedAt",
                    "chunks"
                ]
            },
            "ChunkDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "example": "chunk_1"
                    },
                    "documentId": {
                        "type": "string",
                        "example": "doc_1"
                    },
                    "documentTitle": {
                        "type": "string",
                        "example": "User Guide.pdf",
                        "description": "Best-effort document title derived from filename or source URL"
                    },
                    "index": {
                        "type": "number",
                        "example": 0,
                        "description": "Zero-based index of chunk inside the document"
                    },
                    "size": {
                        "type": "number",
                        "example": 512,
                        "description": "Size in characters"
                    },
                    "hasEmbedding": {
                        "type": "boolean",
                        "example": true,
                        "description": "Whether an embedding vector exists for this chunk"
                    },
                    "text": {
                        "type": "string",
                        "example": "This is the chunk text...",
                        "description": "Plaintext content of the chunk (may be truncated client-side)"
                    }
                },
                "required": [
                    "id",
                    "documentId",
                    "documentTitle",
                    "index",
                    "size",
                    "hasEmbedding",
                    "text"
                ]
            },
            "IngestionUploadDto": {
                "type": "object",
                "properties": {
                    "filename": {
                        "type": "string",
                        "description": "Original filename (optional, will fallback to uploaded file name)",
                        "example": "spec.md"
                    },
                    "mimeType": {
                        "type": "string",
                        "description": "Optional MIME type",
                        "example": "text/markdown"
                    },
                    "orgId": {
                        "type": "string",
                        "description": "Optional organisation UUID to associate the document with",
                        "example": "11111111-2222-3333-4444-555555555555"
                    },
                    "projectId": {
                        "type": "string",
                        "description": "Project UUID that this document belongs to (required)",
                        "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"
                    }
                },
                "required": [
                    "projectId"
                ]
            },
            "IngestionUrlDto": {
                "type": "object",
                "properties": {
                    "url": {
                        "type": "string",
                        "description": "Remote URL to ingest",
                        "example": "https://example.com/spec.md"
                    },
                    "orgId": {
                        "type": "string",
                        "description": "Optional organisation UUID to associate the document with",
                        "example": "11111111-2222-3333-4444-555555555555"
                    },
                    "projectId": {
                        "type": "string",
                        "description": "Project UUID that this document belongs to (required)",
                        "example": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"
                    }
                },
                "required": [
                    "url",
                    "projectId"
                ]
            },
            "CreateExtractionJobDto": {
                "type": "object",
                "properties": {
                    "org_id": {
                        "type": "string",
                        "description": "Organization ID",
                        "example": "550e8400-e29b-41d4-a716-446655440000"
                    },
                    "project_id": {
                        "type": "string",
                        "description": "Project ID",
                        "example": "550e8400-e29b-41d4-a716-446655440001"
                    },
                    "source_type": {
                        "type": "string",
                        "description": "Source type for extraction",
                        "enum": [
                            "document",
                            "api",
                            "manual",
                            "bulk_import"
                        ],
                        "example": "document"
                    },
                    "source_id": {
                        "type": "string",
                        "description": "Source object ID (e.g., document ID)",
                        "example": "550e8400-e29b-41d4-a716-446655440002"
                    },
                    "source_metadata": {
                        "type": "object",
                        "description": "Additional source metadata",
                        "example": {
                            "filename": "requirements.pdf",
                            "filesize": 1024000
                        }
                    },
                    "extraction_config": {
                        "type": "object",
                        "description": "Extraction configuration",
                        "example": {
                            "target_types": [
                                "Requirement",
                                "Feature"
                            ],
                            "auto_create_types": true,
                            "confidence_threshold": 0.7
                        }
                    },
                    "subject_id": {
                        "type": "string",
                        "description": "User subject ID (canonical internal user ID)",
                        "example": "550e8400-e29b-41d4-a716-446655440003"
                    }
                },
                "required": [
                    "org_id",
                    "project_id",
                    "source_type",
                    "extraction_config"
                ]
            },
            "ExtractionJobDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "Job ID"
                    },
                    "org_id": {
                        "type": "string",
                        "description": "Organization ID"
                    },
                    "project_id": {
                        "type": "string",
                        "description": "Project ID"
                    },
                    "source_type": {
                        "type": "string",
                        "description": "Source type",
                        "enum": [
                            "document",
                            "api",
                            "manual",
                            "bulk_import"
                        ]
                    },
                    "source_id": {
                        "type": "string",
                        "description": "Source ID"
                    },
                    "source_metadata": {
                        "type": "object",
                        "description": "Source metadata"
                    },
                    "extraction_config": {
                        "type": "object",
                        "description": "Extraction configuration"
                    },
                    "status": {
                        "type": "string",
                        "description": "Job status",
                        "enum": [
                            "pending",
                            "running",
                            "completed",
                            "requires_review",
                            "failed",
                            "cancelled"
                        ]
                    },
                    "total_items": {
                        "type": "number",
                        "description": "Total items to process"
                    },
                    "processed_items": {
                        "type": "number",
                        "description": "Processed items count"
                    },
                    "successful_items": {
                        "type": "number",
                        "description": "Successful items count"
                    },
                    "failed_items": {
                        "type": "number",
                        "description": "Failed items count"
                    },
                    "discovered_types": {
                        "description": "Discovered type names",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "created_objects": {
                        "description": "Created object IDs",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "error_message": {
                        "type": "string",
                        "description": "Error message"
                    },
                    "error_details": {
                        "type": "object",
                        "description": "Error details"
                    },
                    "debug_info": {
                        "type": "object",
                        "description": "Debug information (LLM requests/responses, intermediate results)",
                        "example": {
                            "llm_calls": [
                                {
                                    "type": "Requirement",
                                    "prompt": "Extract requirements...",
                                    "response": "LLM response data",
                                    "duration_ms": 1234
                                }
                            ]
                        }
                    },
                    "started_at": {
                        "format": "date-time",
                        "type": "string",
                        "description": "Job start timestamp"
                    },
                    "completed_at": {
                        "format": "date-time",
                        "type": "string",
                        "description": "Job completion timestamp"
                    },
                    "created_at": {
                        "format": "date-time",
                        "type": "string",
                        "description": "Job creation timestamp"
                    },
                    "subject_id": {
                        "type": "string",
                        "description": "User subject ID (canonical internal user ID)"
                    },
                    "updated_at": {
                        "format": "date-time",
                        "type": "string",
                        "description": "Last update timestamp"
                    }
                },
                "required": [
                    "id",
                    "org_id",
                    "project_id",
                    "source_type",
                    "source_metadata",
                    "extraction_config",
                    "status",
                    "total_items",
                    "processed_items",
                    "successful_items",
                    "failed_items",
                    "discovered_types",
                    "created_objects",
                    "created_at",
                    "updated_at"
                ]
            },
            "ExtractionJobListDto": {
                "type": "object",
                "properties": {
                    "jobs": {
                        "description": "List of extraction jobs",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ExtractionJobDto"
                        }
                    },
                    "total": {
                        "type": "number",
                        "description": "Total count of jobs"
                    },
                    "page": {
                        "type": "number",
                        "description": "Current page number"
                    },
                    "limit": {
                        "type": "number",
                        "description": "Items per page"
                    },
                    "total_pages": {
                        "type": "number",
                        "description": "Total pages"
                    }
                },
                "required": [
                    "jobs",
                    "total",
                    "page",
                    "limit",
                    "total_pages"
                ]
            },
            "UpdateExtractionJobDto": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string",
                        "description": "Job status",
                        "enum": [
                            "pending",
                            "running",
                            "completed",
                            "requires_review",
                            "failed",
                            "cancelled"
                        ],
                        "example": "running"
                    },
                    "total_items": {
                        "type": "number",
                        "description": "Total items to process",
                        "example": 100,
                        "minimum": 0
                    },
                    "processed_items": {
                        "type": "number",
                        "description": "Number of processed items",
                        "example": 50,
                        "minimum": 0
                    },
                    "successful_items": {
                        "type": "number",
                        "description": "Number of successful items",
                        "example": 45,
                        "minimum": 0
                    },
                    "failed_items": {
                        "type": "number",
                        "description": "Number of failed items",
                        "example": 5,
                        "minimum": 0
                    },
                    "discovered_types": {
                        "description": "Discovered type names",
                        "example": [
                            "Requirement",
                            "Feature"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "created_objects": {
                        "description": "Created object IDs",
                        "example": [
                            "550e8400-e29b-41d4-a716-446655440010"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "error_message": {
                        "type": "string",
                        "description": "Error message (if failed)",
                        "example": "Failed to parse document"
                    },
                    "error_details": {
                        "type": "object",
                        "description": "Detailed error information",
                        "example": {
                            "stack": "...",
                            "context": "..."
                        }
                    },
                    "debug_info": {
                        "type": "object",
                        "description": "Debug information (LLM requests/responses, intermediate results)",
                        "example": {
                            "llm_requests": [],
                            "llm_responses": [],
                            "processing_steps": []
                        }
                    }
                }
            },
            "CreateGraphObjectDto": {
                "type": "object",
                "properties": {}
            },
            "PatchGraphObjectDto": {
                "type": "object",
                "properties": {}
            },
            "VersionedObjectDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "org_id": {
                        "type": "object",
                        "nullable": true
                    },
                    "project_id": {
                        "type": "object",
                        "nullable": true
                    },
                    "canonical_id": {
                        "type": "string"
                    },
                    "supersedes_id": {
                        "type": "object",
                        "nullable": true
                    },
                    "version": {
                        "type": "number"
                    },
                    "type": {
                        "type": "string"
                    },
                    "key": {
                        "type": "object",
                        "nullable": true
                    },
                    "properties": {
                        "type": "object"
                    },
                    "labels": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "created_at": {
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "org_id",
                    "project_id",
                    "canonical_id",
                    "supersedes_id",
                    "version",
                    "type",
                    "key",
                    "properties",
                    "labels",
                    "created_at"
                ]
            },
            "ObjectHistoryResponseDto": {
                "type": "object",
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/VersionedObjectDto"
                        }
                    },
                    "next_cursor": {
                        "type": "string",
                        "description": "Present when more pages available; pass as cursor query param"
                    }
                },
                "required": [
                    "items"
                ]
            },
            "CreateGraphRelationshipDto": {
                "type": "object",
                "properties": {}
            },
            "PatchGraphRelationshipDto": {
                "type": "object",
                "properties": {}
            },
            "VersionedRelationshipDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "canonical_id": {
                        "type": "string"
                    },
                    "supersedes_id": {
                        "type": "object",
                        "nullable": true
                    },
                    "version": {
                        "type": "number"
                    },
                    "type": {
                        "type": "string"
                    },
                    "src_id": {
                        "type": "string"
                    },
                    "dst_id": {
                        "type": "string"
                    },
                    "properties": {
                        "type": "object"
                    },
                    "created_at": {
                        "type": "string"
                    },
                    "weight": {
                        "type": "object",
                        "nullable": true
                    },
                    "valid_from": {
                        "type": "object",
                        "nullable": true
                    },
                    "valid_to": {
                        "type": "object",
                        "nullable": true
                    }
                },
                "required": [
                    "id",
                    "canonical_id",
                    "supersedes_id",
                    "version",
                    "type",
                    "src_id",
                    "dst_id",
                    "properties",
                    "created_at",
                    "weight",
                    "valid_from",
                    "valid_to"
                ]
            },
            "RelationshipHistoryResponseDto": {
                "type": "object",
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/VersionedRelationshipDto"
                        }
                    },
                    "next_cursor": {
                        "type": "string",
                        "description": "Present when more pages available; pass as cursor query param"
                    }
                },
                "required": [
                    "items"
                ]
            },
            "EdgePhaseDto": {
                "type": "object",
                "properties": {
                    "relationshipTypes": {
                        "description": "Relationship types to follow in this phase. If omitted, all types are allowed.",
                        "example": [
                            "DEPENDS_ON",
                            "REQUIRES"
                        ],
                        "maxItems": 32,
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "direction": {
                        "type": "string",
                        "description": "Edge traversal direction: out (src->dst), in (dst<-src), or both",
                        "enum": [
                            "out",
                            "in",
                            "both"
                        ],
                        "example": "out"
                    },
                    "maxDepth": {
                        "type": "number",
                        "description": "Maximum depth (hops) to traverse in this phase, relative to phase start nodes",
                        "minimum": 1,
                        "maximum": 8,
                        "example": 2
                    },
                    "objectTypes": {
                        "description": "Filter discovered nodes by object types. Only matching types included.",
                        "example": [
                            "Implementation",
                            "TestCase"
                        ],
                        "maxItems": 64,
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "labels": {
                        "description": "Filter discovered nodes by labels. Nodes must have at least one matching label.",
                        "example": [
                            "verified",
                            "high-priority"
                        ],
                        "maxItems": 64,
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "direction",
                    "maxDepth"
                ]
            },
            "PredicateDto": {
                "type": "object",
                "properties": {
                    "operator": {
                        "type": "string",
                        "description": "Comparison operator to apply",
                        "enum": [
                            "equals",
                            "notEquals",
                            "greaterThan",
                            "lessThan",
                            "greaterThanOrEqual",
                            "lessThanOrEqual",
                            "contains",
                            "in",
                            "notIn",
                            "matches",
                            "exists",
                            "notExists"
                        ],
                        "example": "equals"
                    }
                },
                "required": [
                    "operator"
                ]
            },
            "TemporalFilterDto": {
                "type": "object",
                "properties": {
                    "asOf": {
                        "type": "string",
                        "description": "Timestamp for point-in-time query (ISO 8601 format). Only nodes/edges valid at this timestamp are included.",
                        "example": "2024-12-31T23:59:59Z",
                        "format": "date-time"
                    },
                    "field": {
                        "type": "string",
                        "description": "Which temporal field to use for filtering. Default: valid_from",
                        "enum": [
                            "valid_from",
                            "created_at",
                            "updated_at"
                        ],
                        "default": "valid_from",
                        "example": "valid_from"
                    }
                },
                "required": [
                    "asOf"
                ]
            },
            "TraverseGraphDto": {
                "type": "object",
                "properties": {
                    "edgePhases": {
                        "description": "Define multiple sequential traversal phases with different constraints per phase. When provided, legacy direction/max_depth/relationship_types are ignored.",
                        "maxItems": 8,
                        "example": [
                            {
                                "relationshipTypes": [
                                    "DEPENDS_ON"
                                ],
                                "direction": "out",
                                "maxDepth": 2
                            },
                            {
                                "relationshipTypes": [
                                    "IMPLEMENTED_BY"
                                ],
                                "direction": "in",
                                "maxDepth": 1,
                                "objectTypes": [
                                    "TestCase"
                                ]
                            }
                        ],
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/EdgePhaseDto"
                        }
                    },
                    "nodeFilter": {
                        "description": "Filter nodes by property values using JSON Pointer paths and comparison operators. Only nodes satisfying the predicate are included.",
                        "example": {
                            "path": "/status",
                            "operator": "equals",
                            "value": "active"
                        },
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/PredicateDto"
                            }
                        ]
                    },
                    "edgeFilter": {
                        "description": "Filter edges by property values. Only edges satisfying the predicate will be traversed.",
                        "example": {
                            "path": "/confidence",
                            "operator": "greaterThan",
                            "value": 0.7
                        },
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/PredicateDto"
                            }
                        ]
                    },
                    "returnPaths": {
                        "type": "boolean",
                        "description": "When true, include full paths from root nodes to each result node. Each path is an array of node IDs showing the traversal route.",
                        "example": true
                    },
                    "maxPathsPerNode": {
                        "type": "number",
                        "description": "Maximum paths to track per node (used with returnPaths). Limits memory usage when a node is reachable via many routes.",
                        "minimum": 1,
                        "maximum": 100,
                        "default": 10,
                        "example": 10
                    },
                    "temporalFilter": {
                        "description": "Filter nodes and edges based on temporal validity. Enables point-in-time queries to see historical graph state.",
                        "example": {
                            "asOf": "2024-12-31T23:59:59Z",
                            "field": "valid_from"
                        },
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/TemporalFilterDto"
                            }
                        ]
                    },
                    "fieldStrategy": {
                        "type": "string",
                        "description": "Field pruning strategy to control response payload size. compact removes paths/phaseIndex (~25% reduction), minimal keeps only essential fields (~45% reduction).",
                        "enum": [
                            "full",
                            "compact",
                            "minimal"
                        ],
                        "default": "full",
                        "example": "compact"
                    }
                }
            },
            "GraphExpandDto": {
                "type": "object",
                "properties": {}
            },
            "VectorSearchDto": {
                "type": "object",
                "properties": {
                    "vector": {
                        "description": "Query vector numbers",
                        "type": "array",
                        "items": {
                            "type": "number"
                        }
                    },
                    "limit": {
                        "type": "number",
                        "description": "Max results (default 10, max 100)",
                        "minimum": 1,
                        "maximum": 100
                    },
                    "minScore": {
                        "type": "number",
                        "description": "Optional max distance (cosine) filter (0  d  2; typical cosine range).",
                        "minimum": 0,
                        "maximum": 2
                    },
                    "maxDistance": {
                        "type": "number",
                        "description": "Alias for minScore (preferred). Same constraints (0  d  2). If both provided, maxDistance wins.",
                        "minimum": 0,
                        "maximum": 2
                    },
                    "type": {
                        "type": "string",
                        "description": "Filter by object type (exact match)"
                    },
                    "orgId": {
                        "type": "string",
                        "description": "Filter by org id",
                        "format": "uuid"
                    },
                    "projectId": {
                        "type": "string",
                        "description": "Filter by project id",
                        "format": "uuid"
                    },
                    "branchId": {
                        "type": "string",
                        "description": "Filter by branch id",
                        "format": "uuid"
                    },
                    "keyPrefix": {
                        "type": "string",
                        "description": "Optional key prefix match (ILIKE prefix%)"
                    },
                    "labelsAll": {
                        "description": "Require all labels (array contains)  matches rows whose labels array contains every listed label",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "labelsAny": {
                        "description": "Require any label (overlap)  matches rows whose labels array overlaps any listed label",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "vector"
                ]
            },
            "CreateEmbeddingPolicyDto": {
                "type": "object",
                "properties": {
                    "projectId": {
                        "type": "string",
                        "description": "Project ID this policy applies to",
                        "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "objectType": {
                        "type": "string",
                        "description": "Object type to apply policy to (e.g., \"Document\", \"Requirement\", \"TestCase\")",
                        "example": "Document"
                    },
                    "enabled": {
                        "type": "boolean",
                        "description": "Whether embedding is enabled for this object type",
                        "default": true,
                        "example": true
                    },
                    "maxPropertySize": {
                        "type": "number",
                        "description": "Maximum property size in bytes. Objects with properties larger than this will not be embedded.",
                        "example": 10000
                    },
                    "requiredLabels": {
                        "description": "Labels that must be present on the object for it to be embedded",
                        "example": [
                            "public",
                            "approved"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "excludedLabels": {
                        "description": "Labels that prevent embedding if present on the object",
                        "example": [
                            "sensitive",
                            "draft"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "relevantPaths": {
                        "description": "JSON Pointer paths to relevant properties. If specified, only these paths will be embedded (field masking).",
                        "example": [
                            "/properties/title",
                            "/properties/description"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "projectId",
                    "objectType"
                ]
            },
            "EmbeddingPolicyResponseDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "Policy ID",
                        "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "projectId": {
                        "type": "string",
                        "description": "Project ID",
                        "example": "123e4567-e89b-12d3-a456-426614174001"
                    },
                    "objectType": {
                        "type": "string",
                        "description": "Object type",
                        "example": "Document"
                    },
                    "enabled": {
                        "type": "boolean",
                        "description": "Whether embedding is enabled",
                        "example": true
                    },
                    "maxPropertySize": {
                        "type": "object",
                        "description": "Maximum property size in bytes",
                        "example": 10000,
                        "nullable": true
                    },
                    "requiredLabels": {
                        "description": "Required labels",
                        "example": [
                            "public"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "excludedLabels": {
                        "description": "Excluded labels",
                        "example": [
                            "sensitive"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "relevantPaths": {
                        "description": "Relevant property paths (JSON Pointers)",
                        "example": [
                            "/properties/title"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "createdAt": {
                        "format": "date-time",
                        "type": "string",
                        "description": "Creation timestamp",
                        "example": "2025-10-01T12:00:00Z"
                    },
                    "updatedAt": {
                        "format": "date-time",
                        "type": "string",
                        "description": "Last update timestamp",
                        "example": "2025-10-01T12:30:00Z"
                    }
                },
                "required": [
                    "id",
                    "projectId",
                    "objectType",
                    "enabled",
                    "maxPropertySize",
                    "requiredLabels",
                    "excludedLabels",
                    "relevantPaths",
                    "createdAt",
                    "updatedAt"
                ]
            },
            "UpdateEmbeddingPolicyDto": {
                "type": "object",
                "properties": {
                    "enabled": {
                        "type": "boolean",
                        "description": "Whether embedding is enabled for this object type",
                        "example": false
                    },
                    "maxPropertySize": {
                        "type": "number",
                        "description": "Maximum property size in bytes. Objects with properties larger than this will not be embedded.",
                        "example": 20000
                    },
                    "requiredLabels": {
                        "description": "Labels that must be present on the object for it to be embedded",
                        "example": [
                            "verified"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "excludedLabels": {
                        "description": "Labels that prevent embedding if present on the object",
                        "example": [
                            "archived"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "relevantPaths": {
                        "description": "JSON Pointer paths to relevant properties",
                        "example": [
                            "/properties/summary"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            "BranchMergeRequestDto": {
                "type": "object",
                "properties": {
                    "sourceBranchId": {
                        "type": "string",
                        "description": "Source branch to merge from"
                    },
                    "execute": {
                        "type": "boolean",
                        "description": "If true, attempt to apply the merge (will fail with 409 if any conflicts). When false or omitted, performs a dry-run only."
                    },
                    "limit": {
                        "type": "number",
                        "description": "Optional enumeration limit override (must be <= server max). Primarily for testing."
                    }
                },
                "required": [
                    "sourceBranchId"
                ]
            },
            "BranchMergeObjectSummaryDto": {
                "type": "object",
                "properties": {
                    "canonical_id": {
                        "type": "string",
                        "description": "Canonical object id"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "unchanged",
                            "added",
                            "fast_forward",
                            "conflict"
                        ]
                    },
                    "source_head_id": {
                        "type": "object",
                        "description": "Head version id on source branch",
                        "nullable": true
                    },
                    "target_head_id": {
                        "type": "object",
                        "description": "Head version id on target branch",
                        "nullable": true
                    },
                    "source_paths": {
                        "description": "Changed property paths on source since LCA",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "target_paths": {
                        "description": "Changed property paths on target since LCA (empty if no divergence)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "conflicts": {
                        "description": "List of conflicting property paths (subset intersection of source/target paths with differing final values)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "canonical_id",
                    "status",
                    "source_head_id",
                    "target_head_id",
                    "source_paths",
                    "target_paths"
                ]
            },
            "BranchMergeRelationshipSummaryDto": {
                "type": "object",
                "properties": {
                    "canonical_id": {
                        "type": "string",
                        "description": "Canonical relationship id"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "unchanged",
                            "added",
                            "fast_forward",
                            "conflict"
                        ]
                    },
                    "source_head_id": {
                        "type": "object",
                        "description": "Head version id on source branch",
                        "nullable": true
                    },
                    "target_head_id": {
                        "type": "object",
                        "description": "Head version id on target branch",
                        "nullable": true
                    },
                    "source_src_id": {
                        "type": "object",
                        "description": "Source node id (src) on source head",
                        "nullable": true
                    },
                    "source_dst_id": {
                        "type": "object",
                        "description": "Destination node id (dst) on source head",
                        "nullable": true
                    },
                    "target_src_id": {
                        "type": "object",
                        "description": "Source node id (src) on target head",
                        "nullable": true
                    },
                    "target_dst_id": {
                        "type": "object",
                        "description": "Destination node id (dst) on target head",
                        "nullable": true
                    },
                    "source_paths": {
                        "description": "Changed property paths on source since LCA",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "target_paths": {
                        "description": "Changed property paths on target since LCA (empty if no divergence)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "conflicts": {
                        "description": "List of conflicting property paths (subset intersection of source/target paths with differing final values)",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "canonical_id",
                    "status",
                    "source_head_id",
                    "target_head_id",
                    "source_src_id",
                    "source_dst_id",
                    "target_src_id",
                    "target_dst_id",
                    "source_paths",
                    "target_paths"
                ]
            },
            "BranchMergeSummaryDto": {
                "type": "object",
                "properties": {
                    "targetBranchId": {
                        "type": "string",
                        "description": "Target branch the merge would apply to"
                    },
                    "sourceBranchId": {
                        "type": "string",
                        "description": "Source branch provided in request"
                    },
                    "dryRun": {
                        "type": "boolean",
                        "description": "True if this response is only a dry-run (always true in MVP)"
                    },
                    "total_objects": {
                        "type": "number",
                        "description": "Total divergent canonical objects considered"
                    },
                    "unchanged_count": {
                        "type": "number",
                        "description": "Count of objects unchanged after merge (no action needed)"
                    },
                    "added_count": {
                        "type": "number",
                        "description": "Count of objects newly added by source branch"
                    },
                    "fast_forward_count": {
                        "type": "number",
                        "description": "Count of objects that can be applied without conflict (fast-forward or safe merge)"
                    },
                    "conflict_count": {
                        "type": "number",
                        "description": "Count of objects with conflicts requiring manual resolution"
                    },
                    "objects": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/BranchMergeObjectSummaryDto"
                        }
                    },
                    "truncated": {
                        "type": "boolean",
                        "description": "Set when enumeration truncated due to limit cap"
                    },
                    "hard_limit": {
                        "type": "number",
                        "description": "Server enforced hard limit (for client visibility)"
                    },
                    "applied": {
                        "type": "boolean",
                        "description": "True when merge changes were applied (execute=true & no conflicts)"
                    },
                    "applied_objects": {
                        "type": "number",
                        "description": "Number of objects mutated/created during apply (added + fast_forward)"
                    },
                    "relationships_total": {
                        "type": "number",
                        "description": "Total divergent canonical relationships considered"
                    },
                    "relationships_unchanged_count": {
                        "type": "number",
                        "description": "Count of relationships unchanged after merge (no action needed)"
                    },
                    "relationships_added_count": {
                        "type": "number",
                        "description": "Count of relationships newly added by source branch"
                    },
                    "relationships_fast_forward_count": {
                        "type": "number",
                        "description": "Count of relationships that can be applied without conflict (fast-forward or safe merge)"
                    },
                    "relationships_conflict_count": {
                        "type": "number",
                        "description": "Count of relationships with conflicts requiring manual resolution"
                    },
                    "relationships": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/BranchMergeRelationshipSummaryDto"
                        }
                    }
                },
                "required": [
                    "targetBranchId",
                    "sourceBranchId",
                    "dryRun",
                    "total_objects",
                    "unchanged_count",
                    "added_count",
                    "fast_forward_count",
                    "conflict_count",
                    "objects"
                ]
            },
            "CreateProductVersionDto": {
                "type": "object",
                "properties": {}
            },
            "CreateTagDto": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Tag name (unique within project)",
                        "example": "stable"
                    },
                    "product_version_id": {
                        "type": "string",
                        "description": "Product version ID to tag",
                        "example": "11111111-1111-4111-8111-111111111111"
                    },
                    "description": {
                        "type": "string",
                        "description": "Optional tag description",
                        "example": "Stable release for production"
                    }
                },
                "required": [
                    "name",
                    "product_version_id"
                ]
            },
            "UpdateTagDto": {
                "type": "object",
                "properties": {
                    "description": {
                        "type": "string",
                        "description": "Updated tag description",
                        "example": "Updated stable release"
                    }
                }
            },
            "CreateObjectTypeDto": {
                "type": "object",
                "properties": {}
            },
            "UpdateObjectTypeDto": {
                "type": "object",
                "properties": {}
            },
            "CreateTemplatePackDto": {
                "type": "object",
                "properties": {}
            },
            "AssignTemplatePackDto": {
                "type": "object",
                "properties": {}
            },
            "UpdateTemplatePackAssignmentDto": {
                "type": "object",
                "properties": {}
            },
            "SnoozeNotificationDto": {
                "type": "object",
                "properties": {
                    "until": {
                        "type": "string",
                        "description": "ISO 8601 datetime string for snooze until time"
                    }
                },
                "required": [
                    "until"
                ]
            },
            "ChatRequestDto": {
                "type": "object",
                "properties": {}
            },
            "CitationDto": {
                "type": "object",
                "properties": {}
            },
            "ChatStreamMetaEvent": {
                "type": "object",
                "properties": {}
            },
            "ChatStreamTokenEvent": {
                "type": "object",
                "properties": {}
            },
            "ChatStreamErrorEvent": {
                "type": "object",
                "properties": {}
            },
            "ChatStreamDoneEvent": {
                "type": "object",
                "properties": {}
            },
            "GetChatStreamMetaFrame": {
                "type": "object",
                "properties": {}
            },
            "GetChatStreamTokenFrame": {
                "type": "object",
                "properties": {}
            },
            "GetChatStreamCitationsFrame": {
                "type": "object",
                "properties": {}
            },
            "GetChatStreamSummaryFrame": {
                "type": "object",
                "properties": {}
            },
            "GetChatStreamDoneFrame": {
                "type": "object",
                "properties": {}
            },
            "GetChatStreamErrorFrame": {
                "type": "object",
                "properties": {}
            },
            "CreateInviteDto": {
                "type": "object",
                "properties": {}
            },
            "AcceptInviteDto": {
                "type": "object",
                "properties": {}
            },
            "UserProfileDto": {
                "type": "object",
                "properties": {
                    "subjectId": {
                        "type": "string",
                        "description": "Canonical internal user id (subject id, from identity provider)",
                        "format": "uuid"
                    },
                    "firstName": {
                        "type": "object"
                    },
                    "lastName": {
                        "type": "object"
                    },
                    "displayName": {
                        "type": "object",
                        "description": "Display name fallback (explicit) or derived (first + last)"
                    },
                    "phoneE164": {
                        "type": "object",
                        "description": "E.164 formatted phone number, leading + and digits"
                    },
                    "avatarObjectKey": {
                        "type": "object",
                        "description": "Object storage key for avatar (if stored internally)"
                    }
                },
                "required": [
                    "subjectId"
                ]
            },
            "UpdateUserProfileDto": {
                "type": "object",
                "properties": {}
            },
            "AlternativeEmailDto": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "description": "Email address (lowercased canonical form)"
                    },
                    "verified": {
                        "type": "boolean",
                        "description": "Verification status"
                    },
                    "createdAt": {
                        "type": "string",
                        "description": "ISO timestamp created"
                    }
                },
                "required": [
                    "email",
                    "verified",
                    "createdAt"
                ]
            },
            "AddAlternativeEmailDto": {
                "type": "object",
                "properties": {}
            },
            "GraphSearchFiltersDto": {
                "type": "object",
                "properties": {
                    "objectTypes": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "excludeObjectTypes": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "labelsAny": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "updatedAfter": {
                        "type": "string",
                        "example": "2025-09-01T00:00:00Z"
                    },
                    "updatedBefore": {
                        "type": "string",
                        "example": "2025-09-20T00:00:00Z"
                    }
                }
            },
            "GraphSearchNeighborDto": {
                "type": "object",
                "properties": {
                    "perPrimaryLimit": {
                        "type": "number",
                        "minimum": 0,
                        "default": 3
                    },
                    "globalLimit": {
                        "type": "number",
                        "minimum": 0,
                        "default": 50
                    },
                    "maxDepth": {
                        "type": "number",
                        "minimum": 0,
                        "default": 1
                    },
                    "edgeTypes": {
                        "example": [
                            "decides",
                            "attended_by"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            "GraphSearchDocumentFusionDto": {
                "type": "object",
                "properties": {
                    "enabled": {
                        "type": "boolean",
                        "default": false
                    },
                    "topK": {
                        "type": "number",
                        "default": 8,
                        "minimum": 1,
                        "maximum": 50
                    },
                    "mode": {
                        "type": "string",
                        "enum": [
                            "blend",
                            "rrf",
                            "sequential"
                        ],
                        "default": "blend"
                    },
                    "weight": {
                        "type": "number",
                        "default": 0.35,
                        "minimum": 0,
                        "maximum": 1
                    }
                }
            },
            "GraphSearchPaginationDto": {
                "type": "object",
                "properties": {
                    "cursor": {
                        "type": "object",
                        "example": null
                    },
                    "limit": {
                        "type": "number",
                        "minimum": 1,
                        "maximum": 100,
                        "default": 40
                    },
                    "direction": {
                        "type": "string",
                        "enum": [
                            "forward",
                            "backward"
                        ],
                        "default": "forward",
                        "description": "Pagination direction relative to cursor (forward = items after cursor, backward = items before cursor). Only meaningful when cursor is supplied."
                    }
                }
            },
            "GraphSearchRequestDto": {
                "type": "object",
                "properties": {
                    "query": {
                        "type": "string",
                        "description": "Search query",
                        "maxLength": 800
                    },
                    "limit": {
                        "type": "number",
                        "minimum": 1,
                        "maximum": 100,
                        "default": 40
                    },
                    "intentOverride": {
                        "type": "string",
                        "enum": [
                            "explain",
                            "locate_config",
                            "debug_error",
                            "roadmap"
                        ],
                        "example": "explain"
                    },
                    "channels": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "enum": [
                                "lexical",
                                "vector",
                                "neighbor_boost",
                                "doc"
                            ]
                        }
                    },
                    "rerank": {
                        "type": "object",
                        "default": null
                    },
                    "maxTokenBudget": {
                        "type": "number",
                        "minimum": 800,
                        "maximum": 6000,
                        "default": 3500
                    },
                    "includeCitations": {
                        "type": "boolean",
                        "default": false
                    },
                    "includePathSummaries": {
                        "type": "boolean",
                        "default": true
                    },
                    "includeDebug": {
                        "type": "boolean",
                        "default": false
                    },
                    "filters": {
                        "$ref": "#/components/schemas/GraphSearchFiltersDto"
                    },
                    "neighbor": {
                        "$ref": "#/components/schemas/GraphSearchNeighborDto"
                    },
                    "documentFusion": {
                        "$ref": "#/components/schemas/GraphSearchDocumentFusionDto"
                    },
                    "pagination": {
                        "$ref": "#/components/schemas/GraphSearchPaginationDto"
                    },
                    "experimental": {
                        "type": "object",
                        "description": "Experimental feature flags container"
                    }
                },
                "required": [
                    "query"
                ]
            },
            "GraphSearchReasonDto": {
                "type": "object",
                "properties": {
                    "channel": {
                        "type": "string",
                        "enum": [
                            "lexical",
                            "vector",
                            "neighbor_boost",
                            "doc"
                        ]
                    },
                    "score": {
                        "type": "number",
                        "example": 0.42
                    }
                },
                "required": [
                    "channel",
                    "score"
                ]
            },
            "GraphSearchCitationDto": {
                "type": "object",
                "properties": {
                    "span": {
                        "type": "string",
                        "example": "Decision depends on consistent flag rollout"
                    },
                    "source_object_id": {
                        "type": "string",
                        "example": "b3d52c50-5101-4c6c-8d30-4a1f0f7645cb"
                    },
                    "confidence": {
                        "type": "number",
                        "example": 0.82
                    }
                },
                "required": [
                    "span",
                    "source_object_id",
                    "confidence"
                ]
            },
            "GraphSearchItemDto": {
                "type": "object",
                "properties": {
                    "object_id": {
                        "type": "string",
                        "example": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd"
                    },
                    "canonical_id": {
                        "type": "string",
                        "example": "af6b1db2-e7f9-4d2f-b3f4-5d8c0c61c9cd"
                    },
                    "score": {
                        "type": "number",
                        "example": 0.87123
                    },
                    "rank": {
                        "type": "number",
                        "example": 1
                    },
                    "role": {
                        "type": "string",
                        "enum": [
                            "primary",
                            "neighbor",
                            "reference",
                            "document_chunk"
                        ]
                    },
                    "fields": {
                        "type": "object",
                        "example": {
                            "title": "Adopt Feature Flagging",
                            "type": "Decision",
                            "status": "active"
                        }
                    },
                    "truncated_fields": {
                        "example": [
                            "description"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "reasons": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/GraphSearchReasonDto"
                        }
                    },
                    "citations": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/GraphSearchCitationDto"
                        }
                    },
                    "explanation": {
                        "type": "string",
                        "example": "High lexical match on ..."
                    },
                    "cursor": {
                        "type": "string",
                        "example": "eyJzY29yZSI6MC44NzEyMywiaWQiOiJkb2MtMSJ9"
                    }
                },
                "required": [
                    "object_id",
                    "canonical_id",
                    "score",
                    "rank",
                    "role",
                    "fields",
                    "reasons"
                ]
            },
            "GraphSearchPathSummaryDto": {
                "type": "object",
                "properties": {
                    "path_id": {
                        "type": "string",
                        "example": "e7b7ff6e-ef5f-4b55-9580-5d3b45d0a123"
                    },
                    "summary": {
                        "type": "string",
                        "example": "Meeting X decided Decision Y"
                    },
                    "reasons": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/GraphSearchReasonDto"
                        }
                    }
                },
                "required": [
                    "path_id",
                    "summary",
                    "reasons"
                ]
            },
            "GraphSearchEmbeddingModelMetaDto": {
                "type": "object",
                "properties": {
                    "model": {
                        "type": "string",
                        "example": "text-embedding-3-large"
                    },
                    "version": {
                        "type": "number",
                        "example": 2
                    },
                    "coverage_pct": {
                        "type": "number",
                        "example": 91.4
                    }
                },
                "required": [
                    "model",
                    "version",
                    "coverage_pct"
                ]
            },
            "GraphSearchRerankMetaDto": {
                "type": "object",
                "properties": {
                    "applied": {
                        "type": "boolean",
                        "example": true
                    },
                    "model": {
                        "type": "string",
                        "example": "mini-cross-encoder-v1"
                    },
                    "latency_ms": {
                        "type": "number",
                        "example": 42
                    },
                    "pool": {
                        "type": "number",
                        "example": 60
                    },
                    "timeout": {
                        "type": "boolean",
                        "example": false
                    }
                },
                "required": [
                    "applied"
                ]
            },
            "GraphSearchExpansionMetaDto": {
                "type": "object",
                "properties": {
                    "neighbors": {
                        "type": "number",
                        "example": 42
                    },
                    "hub_sampled": {
                        "type": "boolean",
                        "example": true
                    },
                    "hub_degree": {
                        "type": "number",
                        "example": 1342
                    }
                },
                "required": [
                    "neighbors",
                    "hub_sampled"
                ]
            },
            "GraphSearchRequestMetaDto": {
                "type": "object",
                "properties": {
                    "limit": {
                        "type": "number",
                        "example": 40,
                        "description": "Effective page size after server cap"
                    },
                    "requested_limit": {
                        "type": "number",
                        "example": 100,
                        "description": "Original client requested limit before clamping"
                    },
                    "channels": {
                        "example": [
                            "lexical",
                            "vector"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "rerank": {
                        "type": "object",
                        "example": false
                    },
                    "direction": {
                        "type": "string",
                        "example": "forward",
                        "enum": [
                            "forward",
                            "backward"
                        ],
                        "description": "Pagination direction used for this page."
                    }
                },
                "required": [
                    "limit"
                ]
            },
            "GraphSearchMetaDto": {
                "type": "object",
                "properties": {
                    "channels": {
                        "example": [
                            "lexical",
                            "vector"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "fusion": {
                        "type": "string",
                        "example": "weighted_sum:v2"
                    },
                    "normalization_version": {
                        "type": "string",
                        "example": "zscore_v1"
                    },
                    "lexical_considered": {
                        "type": "number",
                        "example": 100
                    },
                    "vector_considered": {
                        "type": "number",
                        "example": 100
                    },
                    "skipped_unembedded": {
                        "type": "number",
                        "example": 12
                    },
                    "neighbor_expanded": {
                        "type": "number",
                        "example": 47
                    },
                    "token_estimate": {
                        "type": "number",
                        "example": 1450
                    },
                    "token_budget": {
                        "type": "number",
                        "example": 3500
                    },
                    "truncation_notice": {
                        "type": "boolean",
                        "example": false
                    },
                    "warnings": {
                        "example": [
                            "embedding_version_backlog"
                        ],
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "embedding_model": {
                        "$ref": "#/components/schemas/GraphSearchEmbeddingModelMetaDto"
                    },
                    "rerank": {
                        "$ref": "#/components/schemas/GraphSearchRerankMetaDto"
                    },
                    "expansion": {
                        "$ref": "#/components/schemas/GraphSearchExpansionMetaDto"
                    },
                    "request": {
                        "$ref": "#/components/schemas/GraphSearchRequestMetaDto"
                    },
                    "elapsed_ms": {
                        "type": "number",
                        "example": 92
                    },
                    "total_estimate": {
                        "type": "number",
                        "example": 8,
                        "description": "Total size of fused candidate pool prior to pagination (may be less than lexical_considered+vector_considered due to overlaps)."
                    },
                    "nextCursor": {
                        "type": "object",
                        "example": null
                    },
                    "prevCursor": {
                        "type": "object",
                        "example": null
                    },
                    "hasNext": {
                        "type": "boolean",
                        "example": true
                    },
                    "hasPrev": {
                        "type": "boolean",
                        "example": false
                    },
                    "approx_position_start": {
                        "type": "number",
                        "example": 41,
                        "description": "Approximate 1-based index of first item in this page relative to fused pool snapshot. 0 if page empty."
                    },
                    "approx_position_end": {
                        "type": "number",
                        "example": 80,
                        "description": "Approximate 1-based index of last item in this page relative to fused pool snapshot. 0 if page empty."
                    }
                },
                "required": [
                    "channels",
                    "fusion",
                    "normalization_version",
                    "lexical_considered",
                    "vector_considered",
                    "skipped_unembedded",
                    "neighbor_expanded",
                    "token_estimate",
                    "token_budget",
                    "truncation_notice",
                    "embedding_model",
                    "rerank",
                    "expansion",
                    "request",
                    "elapsed_ms",
                    "total_estimate",
                    "hasNext",
                    "hasPrev"
                ]
            },
            "GraphSearchDebugDto": {
                "type": "object",
                "properties": {
                    "normalization": {
                        "type": "object",
                        "example": {
                            "lexical": {
                                "mean": 0.42,
                                "std": 0.11
                            }
                        }
                    },
                    "gain_rejections": {
                        "type": "number",
                        "example": 5
                    },
                    "marginal_gain_min": {
                        "type": "number",
                        "example": 0.02
                    },
                    "edge_samples": {
                        "example": [
                            {
                                "relation": "decides",
                                "edge_score": 0.63,
                                "depth": 1,
                                "hub_damping": 0.43
                            }
                        ],
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "feature_flags": {
                        "type": "object",
                        "example": {
                            "paths": true,
                            "rerank": true,
                            "citations": false
                        }
                    }
                },
                "required": [
                    "normalization",
                    "gain_rejections",
                    "marginal_gain_min",
                    "edge_samples",
                    "feature_flags"
                ]
            },
            "GraphSearchResponseDto": {
                "type": "object",
                "properties": {
                    "query": {
                        "type": "string",
                        "example": "original query text"
                    },
                    "intent": {
                        "type": "string",
                        "enum": [
                            "explain",
                            "locate_config",
                            "debug_error",
                            "roadmap"
                        ]
                    },
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/GraphSearchItemDto"
                        }
                    },
                    "path_summaries": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/GraphSearchPathSummaryDto"
                        }
                    },
                    "meta": {
                        "$ref": "#/components/schemas/GraphSearchMetaDto"
                    },
                    "debug": {
                        "$ref": "#/components/schemas/GraphSearchDebugDto"
                    }
                },
                "required": [
                    "query",
                    "items",
                    "meta"
                ]
            }
        }
    },
    "x-tagGroups": [
        {
            "name": "Health & Auth",
            "tags": [
                "Health",
                "Auth"
            ]
        },
        {
            "name": "Organizations & Projects",
            "tags": [
                "Orgs",
                "Projects"
            ]
        },
        {
            "name": "Configuration",
            "tags": [
                "Settings"
            ]
        },
        {
            "name": "Content & Ingestion",
            "tags": [
                "Ingestion",
                "Documents",
                "Chunks"
            ]
        },
        {
            "name": "Search",
            "tags": [
                "Search"
            ]
        },
        {
            "name": "Chat",
            "tags": [
                "Chat"
            ]
        }
    ]
}
