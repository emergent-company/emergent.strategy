# Coolify Environment Variables Example
# Copy this file and configure in Coolify's environment settings

# ==========================================
# Infisical Secret Management (Optional but Recommended)
# ==========================================
# When enabled, secrets are fetched from Infisical at runtime
# This eliminates the need to manually configure secrets in Coolify
# INFISICAL_TOKEN=st.your-service-token-here
# INFISICAL_PROJECT_ID=your-project-id-here
# INFISICAL_ENVIRONMENT=prod
# INFISICAL_API_URL=https://app.infisical.com

# ==========================================
# PostgreSQL Database
# ==========================================
POSTGRES_USER=spec
POSTGRES_PASSWORD=your-secure-password-here
POSTGRES_DB=spec

# ==========================================
# Zitadel Identity Provider
# ==========================================
# Master key (MUST be exactly 32 characters)
ZITADEL_MASTERKEY=MasterkeyNeedsToHave32Characters

# External domain (how users access Zitadel)
ZITADEL_EXTERNALDOMAIN=auth.yourdomain.com
ZITADEL_EXTERNALSECURE=true
ZITADEL_TLS_ENABLED=false

# Zitadel database password
ZITADEL_DB_PASSWORD=zitadel-secure-password

# Organization name (optional, default: Spec Inc)
ZITADEL_ORG_NAME=Your Organization

# Login URL (should match Zitadel external domain)
ZITADEL_LOGIN_URL=https://auth.yourdomain.com

# ==========================================
# Application - Zitadel Configuration
# ==========================================
# ⚠️ These are obtained AFTER running bootstrap script
# Run: ./scripts/bootstrap-zitadel-fully-automated.sh provision
# Then copy the values printed by the script

# Zitadel issuer URL
ZITADEL_ISSUER=https://auth.yourdomain.com

# OAuth app client ID (created by bootstrap script)
ZITADEL_FRONTEND_CLIENT_ID=your-client-id-from-bootstrap

# Service account IDs (created by bootstrap script)
ZITADEL_SERVICE_CLIENT_ID=your-service-account-id
ZITADEL_MAIN_ORG_ID=your-org-id-from-bootstrap
ZITADEL_PROJECT_ID=your-project-id-from-bootstrap

# ⚠️ IMPORTANT: Service Account JSON
# Option 1 (Recommended): Store full JSON in environment variable
# Copy the entire JSON output from bootstrap script:
# ZITADEL_CLIENT_JWT={"userId":"...","keyId":"...","key":"...","type":"serviceaccount"}
#
# Option 2 (Legacy): Mount file (requires manual file management)
# Create file on host: /home/spec-server/zitadel-service-account.json
# Then uncomment volume mount in docker-compose.yml

# ==========================================
# Application - Server
# ==========================================
CORS_ORIGIN=https://yourdomain.com

# ==========================================
# Application - Admin Frontend (Build-time)
# ==========================================
VITE_API_URL=https://api.yourdomain.com
VITE_API_BASE=https://yourdomain.com
VITE_ZITADEL_ISSUER=https://auth.yourdomain.com
VITE_ZITADEL_CLIENT_ID=your-client-id-from-bootstrap
VITE_APP_ENV=production

# ==========================================
# Google AI
# ==========================================
GOOGLE_API_KEY=your-google-api-key
EMBEDDING_DIMENSION=1536

# ==========================================
# Security
# ==========================================
INTEGRATION_ENCRYPTION_KEY=your-32-char-encryption-key-here

# ==========================================
# Features
# ==========================================
DB_AUTOINIT=true
ORGS_DEMO_SEED=false
CHAT_ENABLE_MCP=1

# ==========================================
# Deployment Instructions
# ==========================================
# 1. Start services with docker-compose up -d
# 2. Wait for Zitadel to be ready: docker-compose exec zitadel /app/zitadel ready
# 3. Run bootstrap script: ./scripts/bootstrap-zitadel-fully-automated.sh provision
# 4. Copy values from bootstrap output to this file
# 5. Restart services: docker-compose restart server admin
#
# See DEPLOYMENT_GUIDE.md for detailed instructions

