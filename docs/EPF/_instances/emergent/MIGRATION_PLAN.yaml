# EPF Migration Plan
# Generated: 2026-01-26T20:00:53Z
# Instance: emergent
#
# This plan was auto-generated by generate-migration-plan.sh
# Review and execute migrations according to priority
#
# NOTE: Artifact versions are compared against SCHEMA versions, not framework version.
# Schemas have independent versioning - they only bump when the schema itself changes.
# An artifact at v1.13.0 with a schema at v1.13.0 is CURRENT, even if EPF is v2.9.0.

meta:
  instance: "emergent"
  generated_at: "2026-01-26T20:00:53Z"
  instance_epf_version: "unknown"
  epf_framework_version: "2.11.0"
  generator_version: "1.1.0"
  versioning_note: "Artifacts compared against schema versions, not framework version"

summary:
  total_artifacts: 29
  needs_migration: 0
  needs_enrichment: 0
  current: 27
  
  overall_status: "CURRENT"
  
  estimated_total_effort: "none"

# Migration recommended order:
# 1. HIGH priority (major version behind) - breaking changes
# 2. MEDIUM priority (stale) - significant enrichment available
# 3. LOW priority (behind) - minor enrichment
execution_order:
  high_priority:
  medium_priority:
    - "READY/05_roadmap_recipe.yaml"
    - "READY/03_insight_opportunity.yaml"
    - "READY/04_strategy_formula.yaml"
    - "READY/02_strategy_foundations.yaml"
    - "READY/01_insight_analyses.yaml"
    - "READY/00_north_star.yaml"
    - "FIRE/value_models/product.epf-runtime.value_model.yaml"
    - "FIRE/value_models/strategy.value_model.yaml"
    - "FIRE/value_models/product.emergent-core.value_model.yaml"
    - "FIRE/value_models/org_ops.value_model.yaml"
    - "FIRE/value_models/commercial.value_model.yaml"
    - "FIRE/value_models/product.emergent-tools.value_model.yaml"
    - "FIRE/feature_definitions/fd-006_integration_framework.yaml"
    - "FIRE/feature_definitions/fd-012_cli_local_workflow_testing.yaml"
    - "FIRE/feature_definitions/fd-004_model_context_protocol_server.yaml"
    - "FIRE/feature_definitions/fd-009_admin_tools_configuration.yaml"
    - "FIRE/feature_definitions/fd-008_ai_chat_interface.yaml"
    - "FIRE/feature_definitions/fd-003_ai_native_chat.yaml"
    - "FIRE/feature_definitions/fd-002_document_ingestion_pipeline.yaml"
    - "FIRE/feature_definitions/fd-010_workflow_initiation_api.yaml"
    - "FIRE/feature_definitions/fd-001_knowledge_graph_engine.yaml"
    - "FIRE/feature_definitions/fd-011_epf_schema_validation_service.yaml"
    - "FIRE/feature_definitions/fd-007_authentication_multi_tenancy.yaml"
    - "FIRE/feature_definitions/fd-005_template_packs_system.yaml"
    - "product_portfolio.yaml"
    - "AIM/living_reality_assessment.yaml"
  low_priority:

# Detailed artifact analysis
artifacts:
    - file: "READY/05_roadmap_recipe.yaml"
      name: "05_roadmap_recipe.yaml"
      type: "roadmap"
      schema: "roadmap_recipe_schema.json"
      current_version: "unknown"
      schema_version: "1.13.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "READY/03_insight_opportunity.yaml"
      name: "03_insight_opportunity.yaml"
      type: "insight_opportunity"
      schema: "insight_opportunity_schema.json"
      current_version: "unknown"
      schema_version: "1.13.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "READY/04_strategy_formula.yaml"
      name: "04_strategy_formula.yaml"
      type: "strategy_formula"
      schema: "strategy_formula_schema.json"
      current_version: "unknown"
      schema_version: "1.13.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "READY/02_strategy_foundations.yaml"
      name: "02_strategy_foundations.yaml"
      type: "strategy_foundations"
      schema: "strategy_foundations_schema.json"
      current_version: "unknown"
      schema_version: "1.13.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "READY/01_insight_analyses.yaml"
      name: "01_insight_analyses.yaml"
      type: "insight_analyses"
      schema: "insight_analyses_schema.json"
      current_version: "unknown"
      schema_version: "1.13.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "READY/00_north_star.yaml"
      name: "00_north_star.yaml"
      type: "north_star"
      schema: "north_star_schema.json"
      current_version: "unknown"
      schema_version: "1.13.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/value_models/product.epf-runtime.value_model.yaml"
      name: "product.epf-runtime.value_model.yaml"
      type: "value_model"
      schema: "value_model_schema.json"
      current_version: "unknown"
      schema_version: "2.5.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/value_models/strategy.value_model.yaml"
      name: "strategy.value_model.yaml"
      type: "value_model"
      schema: "value_model_schema.json"
      current_version: "unknown"
      schema_version: "2.5.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/value_models/product.emergent-core.value_model.yaml"
      name: "product.emergent-core.value_model.yaml"
      type: "value_model"
      schema: "value_model_schema.json"
      current_version: "unknown"
      schema_version: "2.5.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/value_models/org_ops.value_model.yaml"
      name: "org_ops.value_model.yaml"
      type: "value_model"
      schema: "value_model_schema.json"
      current_version: "unknown"
      schema_version: "2.5.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/value_models/commercial.value_model.yaml"
      name: "commercial.value_model.yaml"
      type: "value_model"
      schema: "value_model_schema.json"
      current_version: "unknown"
      schema_version: "2.5.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/value_models/product.emergent-tools.value_model.yaml"
      name: "product.emergent-tools.value_model.yaml"
      type: "value_model"
      schema: "value_model_schema.json"
      current_version: "unknown"
      schema_version: "2.5.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/mappings.yaml"
      name: "mappings.yaml"
      type: "unknown"
      schema: ""
      current_version: "1.13.0"
      schema_version: "unknown"
      status: "same"
      action: "none"
      priority: "none"
      estimated_effort: "0"
    - file: "FIRE/feature_definitions/fd-006_integration_framework.yaml"
      name: "fd-006_integration_framework.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-012_cli_local_workflow_testing.yaml"
      name: "fd-012_cli_local_workflow_testing.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-004_model_context_protocol_server.yaml"
      name: "fd-004_model_context_protocol_server.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-009_admin_tools_configuration.yaml"
      name: "fd-009_admin_tools_configuration.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-008_ai_chat_interface.yaml"
      name: "fd-008_ai_chat_interface.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-003_ai_native_chat.yaml"
      name: "fd-003_ai_native_chat.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-002_document_ingestion_pipeline.yaml"
      name: "fd-002_document_ingestion_pipeline.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-010_workflow_initiation_api.yaml"
      name: "fd-010_workflow_initiation_api.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-001_knowledge_graph_engine.yaml"
      name: "fd-001_knowledge_graph_engine.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-011_epf_schema_validation_service.yaml"
      name: "fd-011_epf_schema_validation_service.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-007_authentication_multi_tenancy.yaml"
      name: "fd-007_authentication_multi_tenancy.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "FIRE/feature_definitions/fd-005_template_packs_system.yaml"
      name: "fd-005_template_packs_system.yaml"
      type: "feature_definition"
      schema: "feature_definition_schema.json"
      current_version: "unknown"
      schema_version: "2.1.0"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "product_portfolio.yaml"
      name: "product_portfolio.yaml"
      type: "unknown"
      schema: ""
      current_version: "unknown"
      schema_version: "unknown"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"
    - file: "AIM/living_reality_assessment.yaml"
      name: "living_reality_assessment.yaml"
      type: "unknown"
      schema: ""
      current_version: "unknown"
      schema_version: "unknown"
      status: "unknown"
      action: "assess"
      priority: "medium"
      estimated_effort: "unknown"

# AI Agent Instructions
# Use these instructions when executing migrations
ai_instructions:
  assess_phase:
    - "Read this MIGRATION_PLAN.yaml completely"
    - "Check migrations/registry.yaml for version-specific changes"
    - "For each artifact with action='migrate', read the migration_guide"
    
  execute_phase:
    description: "Process artifacts one-by-one with validation at each step. FAIL FAST - fix errors before proceeding."
    order: "Process in execution_order (high → medium → low priority)"
    per_artifact_workflow:
      step_1_backup:
        action: "Create backup before any changes"
        command: "cp <file> <file>.backup-$(date +%Y%m%d-%H%M%S)"
        reason: "Enables rollback if migration fails"
        
      step_2_understand:
        action: "Read and understand current artifact"
        read:
          - "Current artifact content"
          - "Target schema: schemas/<schema>.json"
          - "Migration guide if specified in migration_guide field"
          - "registry.yaml for version-specific ai_instructions"
        
      step_3_transform:
        action: "Apply migration transformations"
        rules:
          - "Follow migration guide step-by-step"
          - "Preserve ALL existing content (never delete user data)"
          - "Add new required fields with sensible defaults or [TODO] markers"
          - "Update version comment to target_version"
        
      step_4_validate_schema:
        action: "Validate transformed artifact against schema"
        command: "./scripts/validate-schemas.sh <file>"
        requirement: "MUST pass before proceeding"
        on_failure:
          - "DO NOT proceed to next artifact"
          - "Fix validation errors in current artifact"
          - "Re-run validation until it passes"
          - "If stuck, report specific error to user"
        
      step_5_validate_content:
        action: "Check content quality of migrated artifact"
        command: "./scripts/check-content-readiness.sh <file>"
        requirement: "Should achieve Grade C or better"
        on_failure:
          - "If Grade D or F, review for template patterns"
          - "Replace obvious placeholders (TBD, TODO, Example:)"
          - "Re-run content check"
          - "Report final grade - Grade D acceptable for initial migration"
        
      step_6_report:
        action: "Report artifact migration result"
        report_format:
          - "Artifact: <filename>"
          - "Schema validation: PASS/FAIL"
          - "Content grade: A/B/C/D/F"
          - "Issues fixed: <count>"
          - "Ready for next: YES/NO"
        
    critical_rules:
      - "NEVER skip validation steps"
      - "NEVER proceed if schema validation fails"
      - "FIX errors immediately, not at the end"
      - "Each artifact must pass validation before starting next"
      - "If artifact cannot be fixed, STOP and report to user"
    
  verify_phase:
    description: "MANDATORY - Run these checks after ALL migrations complete"
    steps:
      - step: "Schema Validation"
        command: "./scripts/validate-instance.sh <instance>"
        requirement: "MUST PASS - All artifacts must validate against schemas"
        failure_action: "Fix validation errors before proceeding"
        
      - step: "Version Alignment"
        command: "./scripts/check-version-alignment.sh <instance>"
        requirement: "All artifacts should show CURRENT status"
        failure_action: "Re-migrate artifacts still showing BEHIND/STALE/OUTDATED"
        
      - step: "Content Readiness Assessment"
        command: "./scripts/check-content-readiness.sh <instance>/READY"
        requirement: "Understand post-migration content quality"
        note: |
          Migration ensures structural compliance, but content quality may still
          need attention. This check shows:
          - Template patterns that need real content
          - Placeholder text that should be replaced
          - Strategic depth assessment
          - Recommended enrichment areas
        
      - step: "Field Coverage Analysis"  
        command: "./scripts/analyze-field-coverage.sh <instance>"
        requirement: "Understand what optional enrichment is available"
        note: |
          After basic migration, artifacts may have new optional fields
          that could improve strategic clarity. This shows:
          - Missing CRITICAL fields (should address)
          - Missing HIGH fields (recommended)
          - Missing MEDIUM/LOW fields (nice to have)
        
      - step: "Update Instance Metadata"
        action: "Update _meta.yaml with migration record"
        fields:
          - "epf_version: <new_version>"
          - "last_migrated: <date>"
          - "migration_notes: <summary of changes>"

  post_migration_guidance: |
    After migration completes and passes validation:
    
    1. REQUIRED CHECKS (must pass):
       - Schema validation (validate-instance.sh)
       - Version alignment (all artifacts CURRENT)
    
    2. QUALITY ASSESSMENT (understand status):
       - Content readiness score (aim for Grade B or higher)
       - Field coverage percentage (identify enrichment opportunities)
    
    3. OPTIONAL ENRICHMENT (improve over time):
       - Address template content flagged by content-readiness
       - Add missing HIGH-importance fields
       - Consider MEDIUM fields for strategic clarity
    
    Migration is complete when required checks pass. Content quality
    improvements can be done incrementally based on the assessments.

# Validation Requirements
# These are the minimum requirements for successful migration
validation_requirements:
  mandatory:
    - name: "Schema Compliance"
      script: "validate-instance.sh"
      description: "All YAML files must validate against their JSON schemas"
      exit_code_pass: 0
      
    - name: "Version Alignment"
      script: "check-version-alignment.sh"  
      description: "All migrated artifacts must show CURRENT status"
      acceptable_statuses: ["CURRENT"]
      
  recommended:
    - name: "Content Readiness"
      script: "check-content-readiness.sh"
      description: "Content quality assessment post-migration"
      target_grade: "B"
      minimum_grade: "C"
      note: "Grade D or F indicates significant template content remaining"
      
    - name: "Field Coverage"
      script: "analyze-field-coverage.sh"
      description: "Field completeness analysis"
      target_coverage: "70%"
      critical_fields: "Must all be populated"

# Reference documentation
references:
  migration_guide: "MIGRATIONS.md"
  registry: "migrations/registry.yaml"
  guides_directory: "migrations/guides/"
  validation_scripts:
    - script: "scripts/validate-instance.sh"
      purpose: "Schema compliance and structure validation"
    - script: "scripts/check-version-alignment.sh"
      purpose: "Detect version gaps and migration status"
    - script: "scripts/check-content-readiness.sh"
      purpose: "Content quality and template detection"
    - script: "scripts/analyze-field-coverage.sh"
      purpose: "Field completeness and enrichment guidance"
    - script: "scripts/epf-health-check.sh"
      purpose: "Comprehensive framework and instance health"
